/*! For license information please see main.js.LICENSE.txt */
(()=>{var t={676:function(t,e){!function(t){"use strict";function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function r(t,e,r){var i,s=new Promise((function(s,o){n(i=t[e].apply(t,r)).then(s,o)}));return s.request=i,s}function i(t,e,n){var i=r(t,e,n);return i.then((function(t){if(t)return new h(t,i.request)}))}function s(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function o(t,e,n,i){i.forEach((function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})}))}function a(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})}))}function c(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})}))}function l(t){this._index=t}function h(t,e){this._cursor=t,this._request=e}function u(t){this._store=t}function d(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function f(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new d(n)}function p(t){this._db=t}s(l,"_index",["name","keyPath","multiEntry","unique"]),o(l,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),c(l,"_index",IDBIndex,["openCursor","openKeyCursor"]),s(h,"_cursor",["direction","key","primaryKey","value"]),o(h,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(h.prototype[t]=function(){var e=this,r=arguments;return Promise.resolve().then((function(){return e._cursor[t].apply(e._cursor,r),n(e._request).then((function(t){if(t)return new h(t,e._request)}))}))})})),u.prototype.createIndex=function(){return new l(this._store.createIndex.apply(this._store,arguments))},u.prototype.index=function(){return new l(this._store.index.apply(this._store,arguments))},s(u,"_store",["name","keyPath","indexNames","autoIncrement"]),o(u,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),c(u,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(u,"_store",IDBObjectStore,["deleteIndex"]),d.prototype.objectStore=function(){return new u(this._tx.objectStore.apply(this._tx,arguments))},s(d,"_tx",["objectStoreNames","mode"]),a(d,"_tx",IDBTransaction,["abort"]),f.prototype.createObjectStore=function(){return new u(this._db.createObjectStore.apply(this._db,arguments))},s(f,"_db",["name","version","objectStoreNames"]),a(f,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new d(this._db.transaction.apply(this._db,arguments))},s(p,"_db",["name","version","objectStoreNames"]),a(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[u,l].forEach((function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),r=n[n.length-1],i=this._store||this._index,s=i[t].apply(i,n.slice(0,-1));s.onsuccess=function(){r(s.result)}})}))})),[l,u].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise((function(i){n.iterateCursor(t,(function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)}))}))})})),t.openDb=function(t,e,n){var i=r(indexedDB,"open",[t,e]),s=i.request;return s&&(s.onupgradeneeded=function(t){n&&n(new f(s.result,t.oldVersion,s.transaction))}),i.then((function(t){return new p(t)}))},t.deleteDb=function(t){return r(indexedDB,"deleteDatabase",[t])},Object.defineProperty(t,"__esModule",{value:!0})}(e)}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var s=e[r]={exports:{}};return t[r].call(s.exports,s,s.exports,n),s.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{"use strict";const t={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let e=0;e<t.length;e+=3){const i=t[e],s=e+1<t.length,o=s?t[e+1]:0,a=e+2<t.length,c=a?t[e+2]:0,l=i>>2,h=(3&i)<<4|o>>4;let u=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(u=64)),r.push(n[l],n[h],n[u],n[d])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let e=0;e<t.length;){const i=n[t.charAt(e++)],s=e<t.length?n[t.charAt(e)]:0;++e;const o=e<t.length?n[t.charAt(e)]:64;++e;const a=e<t.length?n[t.charAt(e)]:64;if(++e,null==i||null==s||null==o||null==a)throw Error();const c=i<<2|s>>4;if(r.push(c),64!==o){const t=s<<4&240|o>>2;if(r.push(t),64!==a){const t=o<<6&192|a;r.push(t)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class e{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}function r(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function i(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(r())}function s(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function o(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function a(){const t=r();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function c(){return"object"==typeof indexedDB}function l(){return new Promise(((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))}function h(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class u extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,u.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,d.prototype.create)}}class d{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},r=`${this.service}/${t}`,i=this.errors[t],s=i?function(t,e){return t.replace(f,((t,n)=>{const r=e[n];return null!=r?String(r):`<${n}?>`}))}(i,n):"Error",o=`${this.serviceName}: ${s} (${r}).`;return new u(r,o,n)}}const f=/\{\$([^}]+)}/g;function p(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const n=t[i],s=e[i];if(g(n)&&g(s)){if(!p(n,s))return!1}else if(n!==s)return!1}for(const t of r)if(!n.includes(t))return!1;return!0}function g(t){return null!==t&&"object"==typeof t}function m(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach((t=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(t))})):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function y(t){const e={};return t.replace(/^\?/,"").split("&").forEach((t=>{if(t){const[n,r]=t.split("=");e[decodeURIComponent(n)]=decodeURIComponent(r)}})),e}function v(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}class w{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((()=>{t(this)})).catch((t=>{this.error(t)}))}next(t){this.forEachObserver((e=>{e.next(t)}))}error(t){this.forEachObserver((e=>{e.error(t)})),this.close(t)}complete(){this.forEachObserver((t=>{t.complete()})),this.close()}subscribe(t,e,n){let r;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");r=function(t,e){if("object"!=typeof t||null===t)return!1;for(const e of["next","error","complete"])if(e in t&&"function"==typeof t[e])return!0;return!1}(t)?t:{next:t,error:e,complete:n},void 0===r.next&&(r.next=E),void 0===r.error&&(r.error=E),void 0===r.complete&&(r.complete=E);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(t){}})),this.observers.push(r),i}unsubscribeOne(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{e(this.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))}close(t){this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function E(){}function I(t,e=1e3,n=2){const r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function T(t){return t&&t._delegate?t._delegate:t}class b{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const _="[DEFAULT]";class S{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const t=new e;if(this.instancesDeferred.set(n,t),this.isInitialized(n)||this.shouldAutoInitialize())try{const e=this.getOrInitializeService({instanceIdentifier:n});e&&t.resolve(e)}catch(t){}}return this.instancesDeferred.get(n).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(r)return null;throw t}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:_})}catch(t){}for(const[t,e]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:n});e.resolve(t)}catch(t){}}}}clearInstance(t="[DEFAULT]"){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t="[DEFAULT]"){return this.instances.has(t)}getOptions(t="[DEFAULT]"){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[t,e]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(t)&&e.resolve(r);return r}onInit(t,e){var n;const r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&t(s,r),()=>{i.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const r of n)try{r(t,e)}catch(t){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=t,r===_?void 0:r),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(t){}var r;return n||null}normalizeInstanceIdentifier(t="[DEFAULT]"){return this.component?this.component.multipleInstances?t:_:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class k{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new S(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const A=[];var R,C;(C=R||(R={}))[C.DEBUG=0]="DEBUG",C[C.VERBOSE=1]="VERBOSE",C[C.INFO=2]="INFO",C[C.WARN=3]="WARN",C[C.ERROR=4]="ERROR",C[C.SILENT=5]="SILENT";const N={debug:R.DEBUG,verbose:R.VERBOSE,info:R.INFO,warn:R.WARN,error:R.ERROR,silent:R.SILENT},O=R.INFO,D={[R.DEBUG]:"log",[R.VERBOSE]:"log",[R.INFO]:"info",[R.WARN]:"warn",[R.ERROR]:"error"},L=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=D[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class P{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const M="@firebase/app",x="0.7.11",U=new class{constructor(t){this.name=t,this._logLevel=O,this._logHandler=L,this._userLogHandler=null,A.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in R))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?N[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,R.DEBUG,...t),this._logHandler(this,R.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,R.VERBOSE,...t),this._logHandler(this,R.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,R.INFO,...t),this._logHandler(this,R.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,R.WARN,...t),this._logHandler(this,R.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,R.ERROR,...t),this._logHandler(this,R.ERROR,...t)}}("@firebase/app"),F={[M]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},V=new Map,B=new Map;function j(t,e){try{t.container.addComponent(e)}catch(n){U.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function H(t){const e=t.name;if(B.has(e))return U.debug(`There were multiple attempts to register component ${e}.`),!1;B.set(e,t);for(const e of V.values())j(e,t);return!0}function q(t,e){return t.container.getProvider(e)}const $=new d("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class z{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new b("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw $.create("app-deleted",{appName:this._name})}}const K="9.6.1";function W(t="[DEFAULT]"){const e=V.get(t);if(!e)throw $.create("no-app",{appName:t});return e}function G(t,e,n){var r;let i=null!==(r=F[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const t=[`Unable to register library "${i}" with version "${e}":`];return s&&t.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&t.push("and"),o&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void U.warn(t.join(" "))}H(new b(`${i}-version`,(()=>({library:i,version:e})),"VERSION"))}function J(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}H(new b("platform-logger",(t=>new P(t)),"PRIVATE")),G(M,x,""),G(M,x,"esm2017"),G("fire-js",""),G("firebase","9.6.1","app"),Object.create,Object.create;const X=[];var Y;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(Y||(Y={}));const Q={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},Z=Y.INFO,tt={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},et=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=tt[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};const nt=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},rt=new d("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),it=new class{constructor(t){this.name=t,this._logLevel=Z,this._logHandler=et,this._userLogHandler=null,X.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Y))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?Q[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...t),this._logHandler(this,Y.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...t),this._logHandler(this,Y.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...t),this._logHandler(this,Y.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...t),this._logHandler(this,Y.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...t),this._logHandler(this,Y.ERROR,...t)}}("@firebase/auth");function st(t,...e){it.logLevel<=Y.ERROR&&it.error(`Auth (9.6.1): ${t}`,...e)}function ot(t,...e){throw lt(t,...e)}function at(t,...e){return lt(t,...e)}function ct(t,e,n){const r=Object.assign(Object.assign({},nt()),{[e]:n});return new d("auth","Firebase",r).create(e,{appName:t.name})}function lt(t,...e){if("string"!=typeof t){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return rt.create(t,...e)}function ht(t,e,...n){if(!t)throw lt(e,...n)}function ut(t){const e="INTERNAL ASSERTION FAILED: "+t;throw st(e),new Error(e)}function dt(t,e){t||ut(e)}const ft=new Map;function pt(t){dt(t instanceof Function,"Expected a class definition");let e=ft.get(t);return e?(dt(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ft.set(t,e),e)}function gt(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function mt(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}class yt{constructor(t,e){this.shortDelay=t,this.longDelay=e,dt(e>t,"Short delay should be less than long delay!"),this.isMobile=i()||o()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===mt()||"https:"===mt()||s()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function vt(t,e){dt(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class wt{static initialize(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ut("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ut("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ut("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Et={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},It=new yt(3e4,6e4);function Tt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function bt(t,e,n,r,i={}){return _t(t,i,(async()=>{let i={},s={};r&&("GET"===e?s=r:i={body:JSON.stringify(r)});const o=m(Object.assign({key:t.config.apiKey},s)).slice(1),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode),wt.fetch()(kt(t,t.config.apiHost,n,o),Object.assign({method:e,headers:a,referrerPolicy:"no-referrer"},i))}))}async function _t(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Et),e);try{const e=new At(t),i=await Promise.race([n(),e.promise]);e.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Rt(t,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const e=i.ok?s.errorMessage:s.error.message,[n,o]=e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Rt(t,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Rt(t,"email-already-in-use",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw ct(t,a,o);ot(t,a)}}catch(e){if(e instanceof u)throw e;ot(t,"network-request-failed")}}async function St(t,e,n,r,i={}){const s=await bt(t,e,n,r,i);return"mfaPendingCredential"in s&&ot(t,"multi-factor-auth-required",{_serverResponse:s}),s}function kt(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?vt(t.config,i):`${t.config.apiScheme}://${i}`}class At{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise(((t,e)=>{this.timer=setTimeout((()=>e(at(this.auth,"timeout"))),It.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Rt(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=at(t,e,r);return i.customData._tokenResponse=n,i}function Ct(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(t){}}function Nt(t){return 1e3*Number(t)}function Ot(e){const[n,r,i]=e.split(".");if(void 0===n||void 0===r||void 0===i)return st("JWT malformed, contained fewer than 3 sections"),null;try{const e=function(e){try{return t.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}(r);return e?JSON.parse(e):(st("Failed to decode base64 JWT payload"),null)}catch(t){return st("Caught error parsing JWT payload as JSON",t),null}}async function Dt(t,e,n=!1){if(n)return e;try{return await e}catch(e){throw e instanceof u&&function({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}(e)&&t.auth.currentUser===t&&await t.auth.signOut(),e}}class Lt{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const t=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),t}{this.errorBackoff=3e4;const t=(null!==(e=this.user.stsTokenManager.expirationTime)&&void 0!==e?e:0)-Date.now()-3e5;return Math.max(0,t)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout((async()=>{await this.iteration()}),e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t.code&&this.schedule(!0))}this.schedule()}}class Pt{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ct(this.lastLoginAt),this.creationTime=Ct(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Mt(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Dt(t,async function(t,e){return bt(t,"POST","/v1/accounts:lookup",e)}(n,{idToken:r}));ht(null==i?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=(null===(e=s.providerUserInfo)||void 0===e?void 0:e.length)?s.providerUserInfo.map((t=>{var{providerId:e}=t,n=J(t,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],a=(c=t.providerData,l=o,[...c.filter((t=>!l.some((e=>e.providerId===t.providerId)))),...l]);var c,l;const h=t.isAnonymous,u=!(t.email&&s.passwordHash||(null==a?void 0:a.length)),d=!!h&&u,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Pt(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)}class xt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){ht(t.idToken,"internal-error"),ht(void 0!==t.idToken,"internal-error"),ht(void 0!==t.refreshToken,"internal-error");const e="expiresIn"in t&&void 0!==t.expiresIn?Number(t.expiresIn):function(t){const e=Ot(t);return ht(e,"internal-error"),ht(void 0!==e.exp,"internal-error"),ht(void 0!==e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}async getToken(t,e=!1){return ht(!this.accessToken||this.refreshToken,t,"user-token-expired"),e||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(t,e){const n=await _t(t,{},(async()=>{const n=m({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,s=kt(t,r,"/v1/token",`key=${i}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",wt.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(t,e);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(t,e){const{refreshToken:n,accessToken:r,expirationTime:i}=e,s=new xt;return n&&(ht("string"==typeof n,"internal-error",{appName:t}),s.refreshToken=n),r&&(ht("string"==typeof r,"internal-error",{appName:t}),s.accessToken=r),i&&(ht("number"==typeof i,"internal-error",{appName:t}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new xt,this.toJSON())}_performRefresh(){return ut("not implemented")}}function Ut(t,e){ht("string"==typeof t||void 0===t,"internal-error",{appName:e})}class Ft{constructor(t){var{uid:e,auth:n,stsTokenManager:r}=t,i=J(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new Lt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.metadata=new Pt(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(t){const e=await Dt(this,this.stsTokenManager.getToken(this.auth,t));return ht(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return async function(t,e=!1){const n=T(t),r=await n.getIdToken(e),i=Ot(r);ht(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ct(Nt(i.auth_time)),issuedAtTime:Ct(Nt(i.iat)),expirationTime:Ct(Nt(i.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}(this,t)}reload(){return async function(t){const e=T(t);await Mt(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}(this)}_assign(t){this!==t&&(ht(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map((t=>Object.assign({},t))),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){return new Ft(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(t){ht(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),e&&await Mt(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await Dt(this,async function(t,e){return bt(t,"POST","/v1/accounts:delete",e)}(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((t=>Object.assign({},t))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var n,r,i,s,o,a,c,l;const h=null!==(n=e.displayName)&&void 0!==n?n:void 0,u=null!==(r=e.email)&&void 0!==r?r:void 0,d=null!==(i=e.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=e.photoURL)&&void 0!==s?s:void 0,p=null!==(o=e.tenantId)&&void 0!==o?o:void 0,g=null!==(a=e._redirectEventId)&&void 0!==a?a:void 0,m=null!==(c=e.createdAt)&&void 0!==c?c:void 0,y=null!==(l=e.lastLoginAt)&&void 0!==l?l:void 0,{uid:v,emailVerified:w,isAnonymous:E,providerData:I,stsTokenManager:T}=e;ht(v&&T,t,"internal-error");const b=xt.fromJSON(this.name,T);ht("string"==typeof v,t,"internal-error"),Ut(h,t.name),Ut(u,t.name),ht("boolean"==typeof w,t,"internal-error"),ht("boolean"==typeof E,t,"internal-error"),Ut(d,t.name),Ut(f,t.name),Ut(p,t.name),Ut(g,t.name),Ut(m,t.name),Ut(y,t.name);const _=new Ft({uid:v,auth:t,email:u,emailVerified:w,displayName:h,isAnonymous:E,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:b,createdAt:m,lastLoginAt:y});return I&&Array.isArray(I)&&(_.providerData=I.map((t=>Object.assign({},t)))),g&&(_._redirectEventId=g),_}static async _fromIdTokenResponse(t,e,n=!1){const r=new xt;r.updateFromServerResponse(e);const i=new Ft({uid:e.localId,auth:t,stsTokenManager:r,isAnonymous:n});return await Mt(i),i}}class Vt{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return void 0===e?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}Vt.type="NONE";const Bt=Vt;function jt(t,e,n){return`firebase:${t}:${e}:${n}`}class Ht{constructor(t,e,n){this.persistence=t,this.auth=e,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=jt(this.userKey,r.apiKey,i),this.fullPersistenceKey=jt("persistence",r.apiKey,i),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Ft._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=t,e?this.setCurrentUser(e):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,n="authUser"){if(!e.length)return new Ht(pt(Bt),t,n);const r=(await Promise.all(e.map((async t=>{if(await t._isAvailable())return t})))).filter((t=>t));let i=r[0]||pt(Bt);const s=jt(n,t.config.apiKey,t.name);let o=null;for(const n of e)try{const e=await n._get(s);if(e){const r=Ft._fromJSON(t,e);n!==i&&(o=r),i=n;break}}catch(t){}const a=r.filter((t=>t._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(e.map((async t=>{if(t!==i)try{await t._remove(s)}catch(t){}}))),new Ht(i,t,n)):new Ht(i,t,n)}}function qt(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Wt(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($t(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Jt(e))return"Blackberry";if(Xt(e))return"Webos";if(zt(e))return"Safari";if((e.includes("chrome/")||Kt(e))&&!e.includes("edge/"))return"Chrome";if(Gt(e))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(e);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function $t(t=r()){return/firefox\//i.test(t)}function zt(t=r()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Kt(t=r()){return/crios\//i.test(t)}function Wt(t=r()){return/iemobile/i.test(t)}function Gt(t=r()){return/android/i.test(t)}function Jt(t=r()){return/blackberry/i.test(t)}function Xt(t=r()){return/webos/i.test(t)}function Yt(t=r()){return/iphone|ipad|ipod/i.test(t)}function Qt(t=r()){return Yt(t)||Gt(t)||Xt(t)||Jt(t)||/windows phone/i.test(t)||Wt(t)}function Zt(t,e=[]){let n;switch(t){case"Browser":n=qt(r());break;case"Worker":n=`${qt(r())}-${t}`;break;default:n=t}return`${n}/JsCore/9.6.1/${e.length?e.join(","):"FirebaseCore-web"}`}class te{constructor(t,e){this.app=t,this.config=e,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ne(this),this.idTokenSubscription=new ne(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=e.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=pt(e)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Ht.create(this,t),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(t){}await this.initializeCurrentUser(e),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();return this.currentUser||t?this.currentUser&&t&&this.currentUser.uid===t.uid?(this._currentUser._assign(t),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(t):void 0}async initializeCurrentUser(t){var e;let n=await this.assertedPersistence.getCurrentUser();if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const r=null===(e=this.redirectUser)||void 0===e?void 0:e._redirectEventId,i=null==n?void 0:n._redirectEventId,s=await this.tryRedirectSignIn(t);r&&r!==i||!(null==s?void 0:s.user)||(n=s.user)}return n?n._redirectEventId?(ht(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)):this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch(t){await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await Mt(t)}catch(t){if("auth/network-request-failed"!==t.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const e=t?T(t):null;return e&&ht(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t){if(!this._deleted)return t&&ht(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),this.queue((async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()}))}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(t){return this.queue((async()=>{await this.assertedPersistence.setPersistence(pt(t))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new d("auth","Firebase",t())}onAuthStateChanged(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}onIdTokenChanged(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(t=this._currentUser)||void 0===t?void 0:t.toJSON()}}async _setRedirectUser(t,e){const n=await this.getOrInitRedirectPersistenceManager(e);return null===t?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&pt(t)||this._popupRedirectResolver;ht(e,this,"argument-error"),this.redirectPersistenceManager=await Ht.create(this,[pt(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(e=this._currentUser)||void 0===e?void 0:e._redirectEventId)===t?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(t)))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,n,r){if(this._deleted)return()=>{};const i="function"==typeof e?e:e.next.bind(e),s=this._isInitialized?Promise.resolve():this._initializationPromise;return ht(s,this,"internal-error"),s.then((()=>i(this.currentUser))),"function"==typeof e?t.addObserver(e,n,r):t.addObserver(e)}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return ht(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){t&&!this.frameworks.includes(t)&&(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Zt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};return this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId),t}}function ee(t){return T(t)}class ne{constructor(t){this.auth=t,this.observer=null,this.addObserver=function(t,e){const n=new w(t,void 0);return n.subscribe.bind(n)}((t=>this.observer=t))}get next(){return ht(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}class re{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return ut("not implemented")}_getIdTokenResponse(t){return ut("not implemented")}_linkToIdToken(t,e){return ut("not implemented")}_getReauthenticationResolver(t){return ut("not implemented")}}class ie extends re{constructor(t,e,n,r=null){super("password",n),this._email=t,this._password=e,this._tenantId=r}static _fromEmailAndPassword(t,e){return new ie(t,e,"password")}static _fromEmailAndCode(t,e,n=null){return new ie(t,e,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t;if((null==e?void 0:e.email)&&(null==e?void 0:e.password)){if("password"===e.signInMethod)return this._fromEmailAndPassword(e.email,e.password);if("emailLink"===e.signInMethod)return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":return async function(t,e){return St(t,"POST","/v1/accounts:signInWithPassword",Tt(t,e))}(t,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(t,e){return St(t,"POST","/v1/accounts:signInWithEmailLink",Tt(t,e))}(t,{email:this._email,oobCode:this._password});default:ot(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":return async function(t,e){return bt(t,"POST","/v1/accounts:update",e)}(t,{idToken:e,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(t,e){return St(t,"POST","/v1/accounts:signInWithEmailLink",Tt(t,e))}(t,{idToken:e,email:this._email,oobCode:this._password});default:ot(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function se(t,e){return St(t,"POST","/v1/accounts:signInWithIdp",Tt(t,e))}class oe extends re{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new oe(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):ot("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t,{providerId:n,signInMethod:r}=e,i=J(e,["providerId","signInMethod"]);if(!n||!r)return null;const s=new oe(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(t){return se(t,this.buildRequest())}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,se(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,se(t,e)}buildRequest(){const t={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=m(e)}return t}}const ae={USER_NOT_FOUND:"user-not-found"};class ce extends re{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,e){return new ce({verificationId:t,verificationCode:e})}static _fromTokenResponse(t,e){return new ce({phoneNumber:t,temporaryProof:e})}_getIdTokenResponse(t){return async function(t,e){return St(t,"POST","/v1/accounts:signInWithPhoneNumber",Tt(t,e))}(t,this._makeVerificationRequest())}_linkToIdToken(t,e){return async function(t,e){const n=await St(t,"POST","/v1/accounts:signInWithPhoneNumber",Tt(t,e));if(n.temporaryProof)throw Rt(t,"account-exists-with-different-credential",n);return n}(t,Object.assign({idToken:e},this._makeVerificationRequest()))}_getReauthenticationResolver(t){return async function(t,e){return St(t,"POST","/v1/accounts:signInWithPhoneNumber",Tt(t,Object.assign(Object.assign({},e),{operation:"REAUTH"})),ae)}(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:e,verificationId:n,verificationCode:r}=this.params;return t&&e?{temporaryProof:t,phoneNumber:e}:{sessionInfo:n,code:r}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){"string"==typeof t&&(t=JSON.parse(t));const{verificationId:e,verificationCode:n,phoneNumber:r,temporaryProof:i}=t;return n||e||r||i?new ce({verificationId:e,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class le{constructor(t){var e,n,r,i,s,o;const a=y(v(t)),c=null!==(e=a.apiKey)&&void 0!==e?e:null,l=null!==(n=a.oobCode)&&void 0!==n?n:null,h=function(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);ht(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(t){const e=function(t){const e=y(v(t)).link,n=e?y(v(e)).deep_link_id:null,r=y(v(t)).deep_link_id;return(r?y(v(r)).link:null)||r||n||e||t}(t);try{return new le(e)}catch(t){return null}}}class he{constructor(){this.providerId=he.PROVIDER_ID}static credential(t,e){return ie._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const n=le.parseLink(e);return ht(n,"argument-error"),ie._fromEmailAndCode(t,n.code,n.tenantId)}}he.PROVIDER_ID="password",he.EMAIL_PASSWORD_SIGN_IN_METHOD="password",he.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ue{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class de extends ue{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class fe extends de{constructor(){super("facebook.com")}static credential(t){return oe._fromParams({providerId:fe.PROVIDER_ID,signInMethod:fe.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return fe.credentialFromTaggedObject(t)}static credentialFromError(t){return fe.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return fe.credential(t.oauthAccessToken)}catch(t){return null}}}fe.FACEBOOK_SIGN_IN_METHOD="facebook.com",fe.PROVIDER_ID="facebook.com";class pe extends de{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return oe._fromParams({providerId:pe.PROVIDER_ID,signInMethod:pe.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return pe.credentialFromTaggedObject(t)}static credentialFromError(t){return pe.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:n}=t;if(!e&&!n)return null;try{return pe.credential(e,n)}catch(t){return null}}}pe.GOOGLE_SIGN_IN_METHOD="google.com",pe.PROVIDER_ID="google.com";class ge extends de{constructor(){super("github.com")}static credential(t){return oe._fromParams({providerId:ge.PROVIDER_ID,signInMethod:ge.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ge.credentialFromTaggedObject(t)}static credentialFromError(t){return ge.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return ge.credential(t.oauthAccessToken)}catch(t){return null}}}ge.GITHUB_SIGN_IN_METHOD="github.com",ge.PROVIDER_ID="github.com";class me extends de{constructor(){super("twitter.com")}static credential(t,e){return oe._fromParams({providerId:me.PROVIDER_ID,signInMethod:me.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return me.credentialFromTaggedObject(t)}static credentialFromError(t){return me.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:n}=t;if(!e||!n)return null;try{return me.credential(e,n)}catch(t){return null}}}me.TWITTER_SIGN_IN_METHOD="twitter.com",me.PROVIDER_ID="twitter.com";class ye{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,n,r=!1){const i=await Ft._fromIdTokenResponse(t,n,r),s=ve(n);return new ye({user:i,providerId:s,_tokenResponse:n,operationType:e})}static async _forOperation(t,e,n){await t._updateTokensIfNecessary(n,!0);const r=ve(n);return new ye({user:t,providerId:r,_tokenResponse:n,operationType:e})}}function ve(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class we extends u{constructor(t,e,n,r){var i;super(e.code,e.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,we.prototype),this.customData={appName:t.name,tenantId:null!==(i=t.tenantId)&&void 0!==i?i:void 0,_serverResponse:e.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,e,n,r){return new we(t,e,n,r)}}function Ee(t,e,n,r){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw we._fromErrorAndOperation(t,n,e,r);throw n}))}new WeakMap;const Ie="__sak";class Te{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Ie,"1"),this.storage.removeItem(Ie),Promise.resolve(!0)):Promise.resolve(!1)}catch(t){return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}class be extends Te{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const t=r();return zt(t)||Yt(t)}()&&function(){try{return!(!window||window===window.top)}catch(t){return!1}}(),this.fallbackToPolling=Qt(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const n=this.storage.getItem(e),r=this.localCache[e];n!==r&&t(e,r,n)}}onStorageEvent(t,e=!1){if(!t.key)return void this.forAllChangedKeys(((t,e,n)=>{this.notifyListeners(t,n)}));const n=t.key;if(e?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(t.newValue!==r)null!==t.newValue?this.storage.setItem(n,t.newValue):this.storage.removeItem(n);else if(this.localCache[n]===t.newValue&&!e)return}const r=()=>{const t=this.storage.getItem(n);(e||this.localCache[n]!==t)&&this.notifyListeners(n,t)},i=this.storage.getItem(n);a()&&10===document.documentMode&&i!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,10):r()}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const t of Array.from(n))t(e?JSON.parse(e):e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((t,e,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}be.type="LOCAL";const _e=be;class Se extends Te{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(t,e){}_removeListener(t,e){}}Se.type="SESSION";const ke=Se;class Ae{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find((e=>e.isListeningto(t)));if(e)return e;const n=new Ae(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:n,eventType:r,data:i}=e.data,s=this.handlersMap[r];if(!(null==s?void 0:s.size))return;e.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async t=>t(e.origin,i))),a=await function(t){return Promise.all(t.map((async t=>{try{return{fulfilled:!0,value:await t}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);e.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(t,e){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),e&&0!==this.handlersMap[t].size||delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Re(t="",e=10){let n="";for(let t=0;t<e;t++)n+=Math.floor(10*Math.random());return t+n}Ae.receivers=[];class Ce{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const c=Re("",20);r.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(t){const e=t;if(e.data.eventId===c)switch(e.data.status){case"ack":clearTimeout(l),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(e.data.response);break;default:clearTimeout(l),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:t,eventId:c,data:e},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Ne(){return window}function Oe(){return void 0!==Ne().WorkerGlobalScope&&"function"==typeof Ne().importScripts}const De="firebaseLocalStorageDb",Le="firebaseLocalStorage",Pe="fbase_key";class Me{constructor(t){this.request=t}toPromise(){return new Promise(((t,e)=>{this.request.addEventListener("success",(()=>{t(this.request.result)})),this.request.addEventListener("error",(()=>{e(this.request.error)}))}))}}function xe(t,e){return t.transaction([Le],e?"readwrite":"readonly").objectStore(Le)}function Ue(){const t=indexedDB.open(De,1);return new Promise(((e,n)=>{t.addEventListener("error",(()=>{n(t.error)})),t.addEventListener("upgradeneeded",(()=>{const e=t.result;try{e.createObjectStore(Le,{keyPath:Pe})}catch(t){n(t)}})),t.addEventListener("success",(async()=>{const n=t.result;n.objectStoreNames.contains(Le)?e(n):(n.close(),await function(){const t=indexedDB.deleteDatabase(De);return new Me(t).toPromise()}(),e(await Ue()))}))}))}async function Fe(t,e,n){const r=xe(t,!0).put({[Pe]:e,value:n});return new Me(r).toPromise()}function Ve(t,e){const n=xe(t,!0).delete(e);return new Me(n).toPromise()}class Be{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Ue()),this.db}async _withRetries(t){let e=0;for(;;)try{const e=await this._openDb();return await t(e)}catch(t){if(e++>3)throw t;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Oe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ae._getInstance(Oe()?self:null),this.receiver._subscribe("keyChanged",(async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)}))),this.receiver._subscribe("ping",(async(t,e)=>["keyChanged"]))}async initializeSender(){var t,e;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new Ce(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(t=n[0])||void 0===t?void 0:t.fulfilled)&&(null===(e=n[0])||void 0===e?void 0:e.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(this.sender&&this.activeServiceWorker&&((null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}var e}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Ue();return await Fe(t,Ie,"1"),await Ve(t,Ie),!0}catch(t){}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite((async()=>(await this._withRetries((n=>Fe(n,t,e))),this.localCache[t]=e,this.notifyServiceWorker(t))))}async _get(t){const e=await this._withRetries((e=>async function(t,e){const n=xe(t,!1).get(e),r=await new Me(n).toPromise();return void 0===r?null:r.value}(e,t)));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite((async()=>(await this._withRetries((e=>Ve(e,t))),delete this.localCache[t],this.notifyServiceWorker(t))))}async _poll(){const t=await this._withRetries((t=>{const e=xe(t,!1).getAll();return new Me(e).toPromise()}));if(!t)return[];if(0!==this.pendingWrites)return[];const e=[],n=new Set;for(const{fbase_key:r,value:i}of t)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),e.push(r));for(const t of Object.keys(this.localCache))this.localCache[t]&&!n.has(t)&&(this.notifyListeners(t,null),e.push(t));return e}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const t of Array.from(n))t(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Be.type="LOCAL";const je=Be;function He(t){return`__${t}${Math.floor(1e6*Math.random())}`}He("rcb"),new yt(3e4,6e4);class qe{constructor(t){this.providerId=qe.PROVIDER_ID,this.auth=ee(t)}verifyPhoneNumber(t,e){return async function(t,e,n){var r;const i=await n.verify();try{let s;if(ht("string"==typeof i,t,"argument-error"),ht("recaptcha"===n.type,t,"argument-error"),s="string"==typeof e?{phoneNumber:e}:e,"session"in s){const e=s.session;if("phoneNumber"in s){ht("enroll"===e.type,t,"internal-error");const n=await function(t,e){return bt(t,"POST","/v2/accounts/mfaEnrollment:start",Tt(t,e))}(t,{idToken:e.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{ht("signin"===e.type,t,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;ht(n,t,"missing-multi-factor-info");const o=await function(t,e){return bt(t,"POST","/v2/accounts/mfaSignIn:start",Tt(t,e))}(t,{mfaPendingCredential:e.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:e}=await async function(t,e){return bt(t,"POST","/v1/accounts:sendVerificationCode",Tt(t,e))}(t,{phoneNumber:s.phoneNumber,recaptchaToken:i});return e}}finally{n._reset()}}(this.auth,t,T(e))}static credential(t,e){return ce._fromVerification(t,e)}static credentialFromResult(t){const e=t;return qe.credentialFromTaggedObject(e)}static credentialFromError(t){return qe.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{phoneNumber:e,temporaryProof:n}=t;return e&&n?ce._fromTokenResponse(e,n):null}}function $e(t,e){return e?pt(e):(ht(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}qe.PROVIDER_ID="phone",qe.PHONE_SIGN_IN_METHOD="phone";class ze extends re{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return se(t,this._buildIdpRequest())}_linkToIdToken(t,e){return se(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return se(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function Ke(t){return async function(t,e,n=!1){const r="signIn",i=await Ee(t,r,e),s=await ye._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}(t.auth,new ze(t),t.bypassAuthState)}function We(t){const{auth:e,user:n}=t;return ht(n,e,"internal-error"),async function(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await Dt(t,Ee(r,i,e,t),n);ht(s.idToken,r,"internal-error");const o=Ot(s.idToken);ht(o,r,"internal-error");const{sub:a}=o;return ht(t.uid===a,r,"user-mismatch"),ye._forOperation(t,i,s)}catch(t){throw"auth/user-not-found"===(null==t?void 0:t.code)&&ot(r,"user-mismatch"),t}}(n,new ze(t),t.bypassAuthState)}async function Ge(t){const{auth:e,user:n}=t;return ht(n,e,"internal-error"),async function(t,e,n=!1){const r=await Dt(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ye._forOperation(t,"link",r)}(n,new ze(t),t.bypassAuthState)}class Je{constructor(t,e,n,r,i=!1){this.auth=t,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise((async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(t){this.reject(t)}}))}async onAuthEvent(t){const{urlResponse:e,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=t;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:e,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(t){this.reject(t)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Ke;case"linkViaPopup":case"linkViaRedirect":return Ge;case"reauthViaPopup":case"reauthViaRedirect":return We;default:ot(this.auth,"internal-error")}}resolve(t){dt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){dt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Xe=new yt(2e3,1e4);async function Ye(t,e,n){const r=ee(t);!function(t,e,n){if(!(e instanceof n))throw n.name!==e.constructor.name&&ot(t,"argument-error"),ct(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}(t,e,ue);const i=$e(r,n);return new Qe(r,"signInViaPopup",e,i).executeNotNull()}class Qe extends Je{constructor(t,e,n,r,i){super(t,e,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Qe.currentPopupAction&&Qe.currentPopupAction.cancel(),Qe.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return ht(t,this.auth,"internal-error"),t}async onExecution(){dt(1===this.filter.length,"Popup operations only handle one event");const t=Re();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((t=>{this.reject(t)})),this.resolver._isIframeWebStorageSupported(this.auth,(t=>{t||this.reject(at(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(at(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qe.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,n;(null===(n=null===(e=this.authWindow)||void 0===e?void 0:e.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(at(this.auth,"popup-closed-by-user"))}),2e3):this.pollId=window.setTimeout(t,Xe.get())};t()}}Qe.currentPopupAction=null;const Ze=new Map;class tn extends Je{constructor(t,e,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,n),this.eventId=null}async execute(){let t=Ze.get(this.auth._key());if(!t){try{const e=await async function(t,e){const n=function(t){return jt("pendingRedirect",t.config.apiKey,t.name)}(e),r=function(t){return pt(t._redirectPersistence)}(t);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=e?await super.execute():null;t=()=>Promise.resolve(n)}catch(e){t=()=>Promise.reject(e)}Ze.set(this.auth._key(),t)}return this.bypassAuthState||Ze.set(this.auth._key(),(()=>Promise.resolve(null))),t()}async onAuthEvent(t){if("signInViaRedirect"===t.type)return super.onAuthEvent(t);if("unknown"!==t.type){if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function en(t,e,n=!1){const r=ee(t),i=$e(r,e),s=new tn(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}class nn{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(t,n)&&(e=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))})),this.hasHandledPotentialRedirect||!function(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sn(t);default:return!1}}(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var n;if(t.error&&!sn(t)){const r=(null===(n=t.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";e.onError(at(this.auth,r))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const n=null===e.eventId||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(rn(t))}saveEventToCache(t){this.cachedEventUids.add(rn(t)),this.lastProcessedEventTime=Date.now()}}function rn(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter((t=>t)).join("-")}function sn({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===(null==e?void 0:e.code)}const on=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,an=/^https?/;function cn(t){const e=gt(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return""===i.hostname&&""===r?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!an.test(n))return!1;if(on.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const ln=new yt(3e4,6e4);function hn(){const t=Ne().___jsl;if(null==t?void 0:t.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let e=0;e<t.CP.length;e++)t.CP[e]=null}let un=null;function dn(t){return un=un||function(t){return new Promise(((e,n)=>{var r,i,s,o;function a(){hn(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{hn(),n(at(t,"network-request-failed"))},timeout:ln.get()})}if(null===(i=null===(r=Ne().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)e(gapi.iframes.getContext());else{if(!(null===(s=Ne().gapi)||void 0===s?void 0:s.load)){const e=He("iframefcb");return Ne()[e]=()=>{gapi.load?a():n(at(t,"network-request-failed"))},(o=`https://apis.google.com/js/api.js?onload=${e}`,new Promise(((t,e)=>{const n=document.createElement("script");var r,i;n.setAttribute("src",o),n.onload=t,n.onerror=t=>{const n=at("internal-error");n.customData=t,e(n)},n.type="text/javascript",n.charset="UTF-8",(null!==(i=null===(r=document.getElementsByTagName("head"))||void 0===r?void 0:r[0])&&void 0!==i?i:document).appendChild(n)}))).catch((t=>n(t)))}a()}})).catch((t=>{throw un=null,t}))}(t),un}const fn=new yt(5e3,15e3),pn={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mn(t){const e=t.config;ht(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?vt(e,"emulator/auth/iframe"):`https://${t.config.authDomain}/__/auth/iframe`,r={apiKey:e.apiKey,appName:t.name,v:K},i=gn.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${m(r).slice(1)}`}const yn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class vn{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(t){}}}function wn(t,e,n,r,i,s){ht(t.config.authDomain,t,"auth-domain-config-required"),ht(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:K,eventId:i};if(e instanceof ue){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",function(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[t,e]of Object.entries(s||{}))o[t]=e}if(e instanceof de){const t=e.getScopes().filter((t=>""!==t));t.length>0&&(o.scopes=t.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const t of Object.keys(a))void 0===a[t]&&delete a[t];return`${function({config:t}){return t.emulator?vt(t,"emulator/auth/handler"):`https://${t.authDomain}/__/auth/handler`}(t)}?${m(a).slice(1)}`}const En="webStorageSupport",In=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ke,this._completeRedirectFn=en}async _openPopup(t,e,n,i){var s;return dt(null===(s=this.eventManagers[t._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()"),function(t,e,n,i=500,s=600){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const l=Object.assign(Object.assign({},yn),{width:i.toString(),height:s.toString(),top:o,left:a}),h=r().toLowerCase();n&&(c=Kt(h)?"_blank":n),$t(h)&&(e=e||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((t,[e,n])=>`${t}${e}=${n},`),"");if(function(t=r()){var e;return Yt(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(h)&&"_self"!==c)return function(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(e||"",c),new vn(null);const d=window.open(e||"",c,u);ht(d,t,"popup-blocked");try{d.focus()}catch(t){}return new vn(d)}(t,wn(t,e,n,gt(),i),Re())}async _openRedirect(t,e,n,r){var i;return await this._originValidation(t),i=wn(t,e,n,gt(),r),Ne().location.href=i,new Promise((()=>{}))}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:t,promise:n}=this.eventManagers[e];return t?Promise.resolve(t):(dt(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(t);return this.eventManagers[e]={promise:n},n.catch((()=>{delete this.eventManagers[e]})),n}async initAndGetManager(t){const e=await async function(t){const e=await dn(t),n=Ne().gapi;return ht(n,t,"internal-error"),e.open({where:document.body,url:mn(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pn,dontclear:!0},(e=>new Promise((async(n,r)=>{await e.restyle({setHideOnLeave:!1});const i=at(t,"network-request-failed"),s=Ne().setTimeout((()=>{r(i)}),fn.get());function o(){Ne().clearTimeout(s),n(e)}e.ping(o).then(o,(()=>{r(i)}))}))))}(t),n=new nn(t);return e.register("authEvent",(e=>(ht(null==e?void 0:e.authEvent,t,"invalid-auth-event"),{status:n.onEvent(e.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=e,n}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(En,{type:En},(n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&e(!!i),ot(t,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=async function(t){if(t.config.emulator)return;const{authorizedDomains:e}=await async function(t,e={}){return bt(t,"GET","/v1/projects",e)}(t);for(const t of e)try{if(cn(t))return}catch(t){}ot(t,"unauthorized-domain")}(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return Qt()||zt()||Yt()}};var Tn,bn="@firebase/auth",_n="0.19.4";class Sn{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),(null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged((e=>{var n;t((null===(n=e)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){ht(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}Tn="Browser",H(new b("auth",((t,{options:e})=>{const n=t.getProvider("app").getImmediate(),{apiKey:r,authDomain:i}=n.options;return(t=>{ht(r&&!r.includes(":"),"invalid-api-key",{appName:t.name}),ht(!(null==i?void 0:i.includes(":")),"argument-error",{appName:t.name});const n={apiKey:r,authDomain:i,clientPlatform:Tn,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Zt(Tn)},s=new te(t,n);return function(t,e){const n=(null==e?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(pt);(null==e?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,null==e?void 0:e.popupRedirectResolver)}(s,e),s})(n)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((t,e,n)=>{t.getProvider("auth-internal").initialize()}))),H(new b("auth-internal",(t=>(t=>new Sn(t))(ee(t.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),G(bn,_n,void 0),G(bn,_n,"esm2017");const kn=[];var An;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(An||(An={}));const Rn={debug:An.DEBUG,verbose:An.VERBOSE,info:An.INFO,warn:An.WARN,error:An.ERROR,silent:An.SILENT},Cn=An.INFO,Nn={[An.DEBUG]:"log",[An.VERBOSE]:"log",[An.INFO]:"info",[An.WARN]:"warn",[An.ERROR]:"error"},On=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=Nn[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};var Dn,Ln="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},Pn={},Mn=Mn||{},xn=Ln||self;function Un(){}function Fn(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Vn(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Bn="closure_uid_"+(1e9*Math.random()>>>0),jn=0;function Hn(t,e,n){return t.call.apply(t.bind,arguments)}function qn(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function $n(t,e,n){return($n=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Hn:qn).apply(null,arguments)}function zn(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Kn(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return e.prototype[n].apply(t,i)}}function Wn(){this.s=this.s,this.o=this.o}var Gn={};Wn.prototype.s=!1,Wn.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,Bn)&&t[Bn]||(t[Bn]=++jn)}(this);delete Gn[t]}},Wn.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Jn=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Xn=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){const r=t.length,i="string"==typeof t?t.split(""):t;for(let s=0;s<r;s++)s in i&&e.call(n,i[s],s,t)};function Yn(t){return Array.prototype.concat.apply([],arguments)}function Qn(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Zn(t){return/^[\s\xa0]*$/.test(t)}var tr,er=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function nr(t,e){return-1!=t.indexOf(e)}function rr(t,e){return t<e?-1:t>e?1:0}t:{var ir=xn.navigator;if(ir){var sr=ir.userAgent;if(sr){tr=sr;break t}}tr=""}function or(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function ar(t){const e={};for(const n in t)e[n]=t[n];return e}var cr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function lr(t,e){let n,r;for(let e=1;e<arguments.length;e++){for(n in r=arguments[e],r)t[n]=r[n];for(let e=0;e<cr.length;e++)n=cr[e],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function hr(t){return hr[" "](t),t}hr[" "]=Un;var ur,dr,fr=nr(tr,"Opera"),pr=nr(tr,"Trident")||nr(tr,"MSIE"),gr=nr(tr,"Edge"),mr=gr||pr,yr=nr(tr,"Gecko")&&!(nr(tr.toLowerCase(),"webkit")&&!nr(tr,"Edge"))&&!(nr(tr,"Trident")||nr(tr,"MSIE"))&&!nr(tr,"Edge"),vr=nr(tr.toLowerCase(),"webkit")&&!nr(tr,"Edge");function wr(){var t=xn.document;return t?t.documentMode:void 0}t:{var Er="",Ir=(dr=tr,yr?/rv:([^\);]+)(\)|;)/.exec(dr):gr?/Edge\/([\d\.]+)/.exec(dr):pr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(dr):vr?/WebKit\/(\S+)/.exec(dr):fr?/(?:Version)[ \/]?(\S+)/.exec(dr):void 0);if(Ir&&(Er=Ir?Ir[1]:""),pr){var Tr=wr();if(null!=Tr&&Tr>parseFloat(Er)){ur=String(Tr);break t}}ur=Er}var br,_r={};function Sr(){return t=_r,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){let t=0;const e=er(String(ur)).split("."),n=er("9").split("."),r=Math.max(e.length,n.length);for(let o=0;0==t&&o<r;o++){var i=e[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;t=rr(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||rr(0==i[2].length,0==s[2].length)||rr(i[2],s[2]),i=i[3],s=s[3]}while(0==t)}return 0<=t}();var t}xn.document&&pr?br=wr()||parseInt(ur,10)||void 0:br=void 0;var kr=br,Ar=function(){if(!xn.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{xn.addEventListener("test",Un,e),xn.removeEventListener("test",Un,e)}catch(t){}return t}();function Rr(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function Cr(t,e){if(Rr.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(yr){t:{try{hr(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Nr[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Cr.Z.h.call(this)}}Rr.prototype.h=function(){this.defaultPrevented=!0},Kn(Cr,Rr);var Nr={2:"touch",3:"pen",4:"mouse"};Cr.prototype.h=function(){Cr.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Or="closure_listenable_"+(1e6*Math.random()|0),Dr=0;function Lr(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++Dr,this.ca=this.fa=!1}function Pr(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Mr(t){this.src=t,this.g={},this.h=0}function xr(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],s=Jn(i,e);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Pr(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Ur(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.ca&&s.listener==e&&s.capture==!!n&&s.ia==r)return i}return-1}Mr.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=Ur(t,e,r,i);return-1<o?(e=t[o],n||(e.fa=!1)):((e=new Lr(e,this.src,s,!!r,i)).fa=n,t.push(e)),e};var Fr="closure_lm_"+(1e6*Math.random()|0),Vr={};function Br(t,e,n,r,i){if(r&&r.once)return Hr(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Br(t,e[s],n,r,i);return null}return n=Jr(n),t&&t[Or]?t.N(e,n,Vn(r)?!!r.capture:!!r,i):jr(t,e,n,!1,r,i)}function jr(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Vn(i)?!!i.capture:!!i,a=Wr(t);if(a||(t[Fr]=a=new Mr(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function(){var t=Kr;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ar||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(zr(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Hr(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Hr(t,e[s],n,r,i);return null}return n=Jr(n),t&&t[Or]?t.O(e,n,Vn(r)?!!r.capture:!!r,i):jr(t,e,n,!0,r,i)}function qr(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)qr(t,e[s],n,r,i);else r=Vn(r)?!!r.capture:!!r,n=Jr(n),t&&t[Or]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=Ur(s=t.g[e],n,r,i))&&(Pr(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=Wr(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Ur(e,n,r,i)),(n=-1<t?e[t]:null)&&$r(n))}function $r(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[Or])xr(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(zr(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Wr(e))?(xr(n,t),0==n.h&&(n.src=null,e[Fr]=null)):Pr(t)}}}function zr(t){return t in Vr?Vr[t]:Vr[t]="on"+t}function Kr(t,e){if(t.ca)t=!0;else{e=new Cr(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&$r(t),t=n.call(r,e)}return t}function Wr(t){return(t=t[Fr])instanceof Mr?t:null}var Gr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Jr(t){return"function"==typeof t?t:(t[Gr]||(t[Gr]=function(e){return t.handleEvent(e)}),t[Gr])}function Xr(){Wn.call(this),this.i=new Mr(this),this.P=this,this.I=null}function Yr(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new Rr(e,t);else if(e instanceof Rr)e.target=e.target||t;else{var i=e;lr(e=new Rr(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Qr(o,r,!0,e)&&i}if(i=Qr(o=e.g=t,r,!0,e)&&i,i=Qr(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=Qr(o=e.g=n[s],r,!1,e)&&i}function Qr(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,c=o.ia||o.src;o.fa&&xr(t.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}Kn(Xr,Wn),Xr.prototype[Or]=!0,Xr.prototype.removeEventListener=function(t,e,n,r){qr(this,t,e,n,r)},Xr.prototype.M=function(){if(Xr.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)Pr(n[r]);delete e.g[t],e.h--}}this.I=null},Xr.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},Xr.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var Zr=xn.JSON.stringify;function ti(){var t=ai;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var ei,ni=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new ri),(t=>t.reset()));class ri{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function ii(t){xn.setTimeout((()=>{throw t}),0)}function si(t,e){ei||function(){var t=xn.Promise.resolve(void 0);ei=function(){t.then(ci)}}(),oi||(ei(),oi=!0),ai.add(t,e)}var oi=!1,ai=new class{constructor(){this.h=this.g=null}add(t,e){const n=ni.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}};function ci(){for(var t;t=ti();){try{t.h.call(t.g)}catch(t){ii(t)}var e=ni;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}oi=!1}function li(t,e){Xr.call(this),this.h=t||1,this.g=e||xn,this.j=$n(this.kb,this),this.l=Date.now()}function hi(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function ui(t,e,n){if("function"==typeof t)n&&(t=$n(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=$n(t.handleEvent,t)}return 2147483647<Number(e)?-1:xn.setTimeout(t,e||0)}function di(t){t.g=ui((()=>{t.g=null,t.i&&(t.i=!1,di(t))}),t.j);const e=t.h;t.h=null,t.m.apply(null,e)}Kn(li,Xr),(Dn=li.prototype).da=!1,Dn.S=null,Dn.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Yr(this,"tick"),this.da&&(hi(this),this.start()))}},Dn.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Dn.M=function(){li.Z.M.call(this),hi(this),delete this.g};class fi extends Wn{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:di(this)}M(){super.M(),this.g&&(xn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pi(t){Wn.call(this),this.h=t,this.g={}}Kn(pi,Wn);var gi=[];function mi(t,e,n,r){Array.isArray(n)||(n&&(gi[0]=n.toString()),n=gi);for(var i=0;i<n.length;i++){var s=Br(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function yi(t){or(t.g,(function(t,e){this.g.hasOwnProperty(e)&&$r(t)}),t),t.g={}}function vi(){this.g=!0}function wi(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Zr(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}pi.prototype.M=function(){pi.Z.M.call(this),yi(this)},pi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},vi.prototype.Aa=function(){this.g=!1},vi.prototype.info=function(){};var Ei={},Ii=null;function Ti(){return Ii=Ii||new Xr}function bi(t){Rr.call(this,Ei.Ma,t)}function _i(t){const e=Ti();Yr(e,new bi(e,t))}function Si(t,e){Rr.call(this,Ei.STAT_EVENT,t),this.stat=e}function ki(t){const e=Ti();Yr(e,new Si(e,t))}function Ai(t,e){Rr.call(this,Ei.Na,t),this.size=e}function Ri(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return xn.setTimeout((function(){t()}),e)}Ei.Ma="serverreachability",Kn(bi,Rr),Ei.STAT_EVENT="statevent",Kn(Si,Rr),Ei.Na="timingevent",Kn(Ai,Rr);var Ci={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Ni={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Oi(){}function Di(t){return t.h||(t.h=t.i())}function Li(){}Oi.prototype.h=null;var Pi,Mi={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function xi(){Rr.call(this,"d")}function Ui(){Rr.call(this,"c")}function Fi(){}function Vi(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new pi(this),this.P=ji,t=mr?125:void 0,this.W=new li(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Bi}function Bi(){this.i=null,this.g="",this.h=!1}Kn(xi,Rr),Kn(Ui,Rr),Kn(Fi,Oi),Fi.prototype.g=function(){return new XMLHttpRequest},Fi.prototype.i=function(){return{}},Pi=new Fi;var ji=45e3,Hi={},qi={};function $i(t,e,n){t.K=1,t.v=fs(as(e)),t.s=n,t.U=!0,zi(t,null)}function zi(t,e){t.F=Date.now(),Ji(t),t.A=as(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),ks(n.h,"t",r),t.C=0,n=t.l.H,t.h=new Bi,t.g=Ao(t.l,n?e:null,!t.s),0<t.O&&(t.L=new fi($n(t.Ia,t,t.g),t.O)),mi(t.V,t.g,"readystatechange",t.gb),e=t.H?ar(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),_i(1),function(t,e,n,r,i,s){t.info((function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var h=l[0];l=l[1];var u=h.split("_");o=2<=u.length&&"type"==u[1]?o+(h+"=")+l+"&":o+(h+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function Ki(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function Wi(t,e,n){let r,i=!0;for(;!t.I&&t.C<n.length;){if(r=Gi(t,n),r==qi){4==e&&(t.o=4,ki(14),i=!1),wi(t.j,t.m,null,"[Incomplete Response]");break}if(r==Hi){t.o=4,ki(15),wi(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}wi(t.j,t.m,r,null),ts(t,r)}Ki(t)&&r!=qi&&r!=Hi&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,ki(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),wo(e),e.L=!0,ki(11))):(wi(t.j,t.m,n,"[Invalid Chunked Response]"),Zi(t),Qi(t))}function Gi(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?qi:(n=Number(e.substring(n,r)),isNaN(n)?Hi:(r+=1)+n>e.length?qi:(e=e.substr(r,n),t.C=r+n,e))}function Ji(t){t.Y=Date.now()+t.P,Xi(t,t.P)}function Xi(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Ri($n(t.eb,t),e)}function Yi(t){t.B&&(xn.clearTimeout(t.B),t.B=null)}function Qi(t){0==t.l.G||t.I||To(t.l,t)}function Zi(t){Yi(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,hi(t.W),yi(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function ts(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||Ds(n.i,t)))if(n.I=t.N,!t.J&&Ds(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;Io(n),lo(n)}vo(n),ki(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Ri($n(n.ab,n),6e3));if(1>=Os(n.i)&&n.ka){try{n.ka()}catch(t){}n.ka=void 0}}else _o(n,11)}else if((t.J||n.g==t)&&Io(n),!Zn(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){let l=i[e];if(n.U=l[0],l=l[1],2==n.G)if("c"==l[0]){n.J=l[1],n.la=l[2];const e=l[3];null!=e&&(n.ma=e,n.h.info("VER="+n.ma));const i=l[4];null!=i&&(n.za=i,n.h.info("SVER="+n.za));const h=l[5];null!=h&&"number"==typeof h&&0<h&&(r=1.5*h,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;const u=t.g;if(u){const t=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=r.i;!s.g&&(nr(t,"spdy")||nr(t,"quic")||nr(t,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(Ls(s,s.h),s.h=null))}if(r.D){const t=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(r.sa=t,ds(r.F,r.D,t))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var o=t;if((r=n).oa=ko(r,r.H?r.la:null,r.W),o.J){Ps(r.i,o);var a=o,c=r.K;c&&a.setTimeout(c),a.B&&(Yi(a),Ji(a)),r.g=o}else yo(r);0<n.l.length&&fo(n)}else"stop"!=l[0]&&"close"!=l[0]||_o(n,7);else 3==n.G&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?_o(n,7):co(n):"noop"!=l[0]&&n.j&&n.j.wa(l),n.A=0)}_i(4)}catch(t){}}function es(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Fn(t)||"string"==typeof t)Xn(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(Fn(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(Fn(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length;for(var s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}}function ns(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof ns)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function rs(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];is(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)is(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function is(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Dn=Vi.prototype).setTimeout=function(t){this.P=t},Dn.gb=function(t){t=t.target;const e=this.L;e&&3==ro(t)?e.l():this.Ia(t)},Dn.Ia=function(t){try{if(t==this.g)t:{const h=ro(this.g);var e=this.g.Da();const u=this.g.ba();if(!(3>h)&&(3!=h||mr||this.g&&(this.h.h||this.g.ga()||io(this.g)))){this.I||4!=h||7==e||_i(8==e||0>=u?3:2),Yi(this);var n=this.g.ba();this.N=n;e:if(Ki(this)){var r=io(this.g);t="";var i=r.length,s=4==ro(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Zi(this),Qi(this);var o="";break e}this.h.i=new xn.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==n,function(t,e,n,r,i,s,o){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.X,h,n),this.i){if(this.$&&!this.J){e:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Zn(a)){var l=a;break e}}l=null}if(!(n=l)){this.i=!1,this.o=3,ki(12),Zi(this),Qi(this);break t}wi(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ts(this,n)}this.U?(Wi(this,h,o),mr&&this.i&&3==h&&(mi(this.V,this.W,"tick",this.fb),this.W.start())):(wi(this.j,this.m,o,null),ts(this,o)),4==h&&Zi(this),this.i&&!this.I&&(4==h?To(this.l,this):(this.i=!1,Ji(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,ki(12)):(this.o=0,ki(13)),Zi(this),Qi(this)}}}catch(t){}},Dn.fb=function(){if(this.g){var t=ro(this.g),e=this.g.ga();this.C<e.length&&(Yi(this),Wi(this,t,e),this.i&&4!=t&&Ji(this))}},Dn.cancel=function(){this.I=!0,Zi(this)},Dn.eb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(_i(3),ki(17)),Zi(this),this.o=2,Qi(this)):Xi(this,this.Y-t)},(Dn=ns.prototype).R=function(){rs(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},Dn.T=function(){return rs(this),this.g.concat()},Dn.get=function(t,e){return is(this.h,t)?this.h[t]:e},Dn.set=function(t,e){is(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},Dn.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);t.call(e,s,i,this)}};var ss=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function os(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof os){this.g=void 0!==e?e:t.g,cs(this,t.j),this.s=t.s,ls(this,t.i),hs(this,t.m),this.l=t.l,e=t.h;var n=new Ts;n.i=e.i,e.g&&(n.g=new ns(e.g),n.h=e.h),us(this,n),this.o=t.o}else t&&(n=String(t).match(ss))?(this.g=!!e,cs(this,n[1]||"",!0),this.s=ps(n[2]||""),ls(this,n[3]||"",!0),hs(this,n[4]),this.l=ps(n[5]||"",!0),us(this,n[6]||"",!0),this.o=ps(n[7]||"")):(this.g=!!e,this.h=new Ts(null,this.g))}function as(t){return new os(t)}function cs(t,e,n){t.j=n?ps(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function ls(t,e,n){t.i=n?ps(e,!0):e}function hs(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function us(t,e,n){e instanceof Ts?(t.h=e,function(t,e){e&&!t.j&&(bs(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(_s(this,e),ks(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=gs(e,Es)),t.h=new Ts(e,t.g))}function ds(t,e,n){t.h.set(e,n)}function fs(t){return ds(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function ps(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function gs(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,ms),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ms(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}os.prototype.toString=function(){var t=[],e=this.j;e&&t.push(gs(e,ys,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(gs(e,ys,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(gs(n,"/"==n.charAt(0)?ws:vs,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",gs(n,Is)),t.join("")};var ys=/[#\/\?@]/g,vs=/[#\?:]/g,ws=/[#\?]/g,Es=/[#\?@]/g,Is=/#/g;function Ts(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function bs(t){t.g||(t.g=new ns,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function _s(t,e){bs(t),e=As(t,e),is(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,is((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&rs(t)))}function Ss(t,e){return bs(t),e=As(t,e),is(t.g.h,e)}function ks(t,e,n){_s(t,e),0<n.length&&(t.i=null,t.g.set(As(t,e),Qn(n)),t.h+=n.length)}function As(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Rs(t){this.l=t||Cs,t=xn.PerformanceNavigationTiming?0<(t=xn.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(xn.g&&xn.g.Ea&&xn.g.Ea()&&xn.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Dn=Ts.prototype).add=function(t,e){bs(this),this.i=null,t=As(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},Dn.forEach=function(t,e){bs(this),this.g.forEach((function(n,r){Xn(n,(function(n){t.call(e,n,r,this)}),this)}),this)},Dn.T=function(){bs(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],s=0;s<i.length;s++)n.push(e[r]);return n},Dn.R=function(t){bs(this);var e=[];if("string"==typeof t)Ss(this,t)&&(e=Yn(e,this.g.get(As(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=Yn(e,t[n])}return e},Dn.set=function(t,e){return bs(this),this.i=null,Ss(this,t=As(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Dn.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},Dn.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),t.push(o)}}return this.i=t.join("&")};var Cs=10;function Ns(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Os(t){return t.h?1:t.g?t.g.size:0}function Ds(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function Ls(t,e){t.g?t.g.add(e):t.h=e}function Ps(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Ms(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return Qn(t.i)}function xs(){}function Us(){this.g=new xs}function Fs(t,e,n){const r=n||"";try{es(t,(function(t,n){let i=t;Vn(t)&&(i=Zr(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function Vs(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}function Bs(t){this.l=t.$b||null,this.j=t.ib||!1}function js(t,e){Xr.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Hs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Rs.prototype.cancel=function(){if(this.i=Ms(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}},xs.prototype.stringify=function(t){return xn.JSON.stringify(t,void 0)},xs.prototype.parse=function(t){return xn.JSON.parse(t,void 0)},Kn(Bs,Oi),Bs.prototype.g=function(){return new js(this.l,this.j)},Bs.prototype.i=function(t){return function(){return t}}({}),Kn(js,Xr);var Hs=0;function qs(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function $s(t){t.readyState=4,t.l=null,t.j=null,t.A=null,zs(t)}function zs(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Dn=js.prototype).open=function(t,e){if(this.readyState!=Hs)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,zs(this)},Dn.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||xn).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Dn.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,$s(this)),this.readyState=Hs},Dn.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,zs(this)),this.g&&(this.readyState=3,zs(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==xn.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;qs(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},Dn.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?$s(this):zs(this),3==this.readyState&&qs(this)}},Dn.Ua=function(t){this.g&&(this.response=this.responseText=t,$s(this))},Dn.Ta=function(t){this.g&&(this.response=t,$s(this))},Dn.ha=function(){this.g&&$s(this)},Dn.setRequestHeader=function(t,e){this.v.append(t,e)},Dn.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Dn.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(js.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Ks=xn.JSON.parse;function Ws(t){Xr.call(this),this.headers=new ns,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Gs,this.K=this.L=!1}Kn(Ws,Xr);var Gs="",Js=/^https?$/i,Xs=["POST","PUT"];function Ys(t){return"content-type"==t.toLowerCase()}function Qs(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Zs(t),eo(t)}function Zs(t){t.D||(t.D=!0,Yr(t,"complete"),Yr(t,"error"))}function to(t){if(t.h&&void 0!==Mn&&(!t.C[1]||4!=ro(t)||2!=t.ba()))if(t.v&&4==ro(t))ui(t.Fa,0,t);else if(Yr(t,"readystatechange"),4==ro(t)){t.h=!1;try{const a=t.ba();t:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var r;if(r=0===a){var i=String(t.H).match(ss)[1]||null;if(!i&&xn.self&&xn.self.location){var s=xn.self.location.protocol;i=s.substr(0,s.length-1)}r=!Js.test(i?i.toLowerCase():"")}n=r}if(n)Yr(t,"complete"),Yr(t,"success");else{t.m=6;try{var o=2<ro(t)?t.g.statusText:""}catch(t){o=""}t.j=o+" ["+t.ba()+"]",Zs(t)}}finally{eo(t)}}}function eo(t,e){if(t.g){no(t);const n=t.g,r=t.C[0]?Un:null;t.g=null,t.C=null,e||Yr(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function no(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(xn.clearTimeout(t.A),t.A=null)}function ro(t){return t.g?t.g.readyState:0}function io(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Gs:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function so(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){let e="";return or(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):ds(t,e,n))}function oo(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function ao(t){this.za=0,this.l=[],this.h=new vi,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=oo("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=oo("baseRetryDelayMs",5e3,t),this.$a=oo("retryDelaySeedMs",1e4,t),this.Ya=oo("forwardChannelMaxRetries",2,t),this.ra=oo("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new Rs(t&&t.concurrentRequestLimit),this.Ca=new Us,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function co(t){if(ho(t),3==t.G){var e=t.V++,n=as(t.F);ds(n,"SID",t.J),ds(n,"RID",e),ds(n,"TYPE","terminate"),go(t,n),(e=new Vi(t,t.h,e,void 0)).K=2,e.v=fs(as(n)),n=!1,xn.navigator&&xn.navigator.sendBeacon&&(n=xn.navigator.sendBeacon(e.v.toString(),"")),!n&&xn.Image&&((new Image).src=e.v,n=!0),n||(e.g=Ao(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Ji(e)}So(t)}function lo(t){t.g&&(wo(t),t.g.cancel(),t.g=null)}function ho(t){lo(t),t.u&&(xn.clearTimeout(t.u),t.u=null),Io(t),t.i.cancel(),t.m&&("number"==typeof t.m&&xn.clearTimeout(t.m),t.m=null)}function uo(t,e){t.l.push(new class{constructor(t,e){this.h=t,this.g=e}}(t.Za++,e)),3==t.G&&fo(t)}function fo(t){Ns(t.i)||t.m||(t.m=!0,si(t.Ha,t),t.C=0)}function po(t,e){var n;n=e?e.m:t.V++;const r=as(t.F);ds(r,"SID",t.J),ds(r,"RID",n),ds(r,"AID",t.U),go(t,r),t.o&&t.s&&so(r,t.o,t.s),n=new Vi(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=mo(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),Ls(t.i,n),$i(n,r,e)}function go(t,e){t.j&&es({},(function(t,n){ds(e,n,t)}))}function mo(t,e,n){n=Math.min(t.l.length,n);var r=t.j?$n(t.j.Oa,t.j,t):null;t:{var i=t.l;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=i[0].h,t.push("ofs="+e)):e=0:t.push("ofs="+e);let s=!0;for(let o=0;o<n;o++){let n=i[o].h;const a=i[o].g;if(n-=e,0>n)e=Math.max(0,i[o].h-100),s=!1;else try{Fs(a,t,"req"+n+"_")}catch(t){r&&r(a)}}if(s){r=t.join("&");break t}}}return t=t.l.splice(0,n),e.D=t,r}function yo(t){t.g||t.u||(t.Y=1,si(t.Ga,t),t.A=0)}function vo(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=Ri($n(t.Ga,t),bo(t,t.A)),t.A++,0))}function wo(t){null!=t.B&&(xn.clearTimeout(t.B),t.B=null)}function Eo(t){t.g=new Vi(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=as(t.oa);ds(e,"RID","rpc"),ds(e,"SID",t.J),ds(e,"CI",t.N?"0":"1"),ds(e,"AID",t.U),go(t,e),ds(e,"TYPE","xmlhttp"),t.o&&t.s&&so(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=fs(as(e)),n.s=null,n.U=!0,zi(n,t)}function Io(t){null!=t.v&&(xn.clearTimeout(t.v),t.v=null)}function To(t,e){var n=null;if(t.g==e){Io(t),wo(t),t.g=null;var r=2}else{if(!Ds(t.i,e))return;n=e.D,Ps(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;Yr(r=Ti(),new Ai(r,n,e,i)),fo(t)}else yo(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Os(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=Ri($n(t.Ha,t,e),bo(t,t.C)),t.C++,0)))}(t,e)||2==r&&vo(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:_o(t,5);break;case 4:_o(t,10);break;case 3:_o(t,6);break;default:_o(t,2)}}function bo(t,e){let n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function _o(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=$n(t.jb,t);n||(n=new os("//www.google.com/images/cleardot.gif"),xn.location&&"http"==xn.location.protocol||cs(n,"https"),fs(n)),function(t,e){const n=new vi;if(xn.Image){const r=new Image;r.onload=zn(Vs,n,r,"TestLoadImage: loaded",!0,e),r.onerror=zn(Vs,n,r,"TestLoadImage: error",!1,e),r.onabort=zn(Vs,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=zn(Vs,n,r,"TestLoadImage: timeout",!1,e),xn.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else ki(2);t.G=0,t.j&&t.j.va(e),So(t),ho(t)}function So(t){t.G=0,t.I=-1,t.j&&(0==Ms(t.i).length&&0==t.l.length||(t.i.i.length=0,Qn(t.l),t.l.length=0),t.j.ua())}function ko(t,e,n){let r=function(t){return t instanceof os?as(t):new os(t,void 0)}(n);if(""!=r.i)e&&ls(r,e+"."+r.i),hs(r,r.m);else{const t=xn.location;r=function(t,e,n,r){var i=new os(null,void 0);return t&&cs(i,t),e&&ls(i,e),n&&hs(i,n),r&&(i.l=r),i}(t.protocol,e?e+"."+t.hostname:t.hostname,+t.port,n)}return t.aa&&or(t.aa,(function(t,e){ds(r,e,t)})),e=t.D,n=t.sa,e&&n&&ds(r,e,n),ds(r,"VER",t.ma),go(t,r),r}function Ao(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new Ws(new Bs({ib:!0})):new Ws(t.qa)).L=t.H,e}function Ro(){}function Co(){if(pr&&!(10<=Number(kr)))throw Error("Environmental error: no available transport.")}function No(t,e){Xr.call(this),this.g=new ao(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!Zn(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Zn(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Lo(this)}function Oo(t){xi.call(this);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Do(){Ui.call(this),this.status=1}function Lo(t){this.g=t}(Dn=Ws.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Pi.g(),this.C=this.u?Di(this.u):Di(Pi),this.g.onreadystatechange=$n(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(t){return void Qs(this,t)}t=n||"";const i=new ns(this.headers);r&&es(r,(function(t,e){i.set(e,t)})),r=function(t){t:{var e=Ys;const n=t.length,r="string"==typeof t?t.split(""):t;for(let i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=xn.FormData&&t instanceof xn.FormData,!(0<=Jn(Xs,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{no(this),0<this.B&&((this.K=function(t){return pr&&Sr()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=$n(this.pa,this)):this.A=ui(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){Qs(this,t)}},Dn.pa=function(){void 0!==Mn&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Yr(this,"timeout"),this.abort(8))},Dn.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Yr(this,"complete"),Yr(this,"abort"),eo(this))},Dn.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),eo(this,!0)),Ws.Z.M.call(this)},Dn.Fa=function(){this.s||(this.F||this.v||this.l?to(this):this.cb())},Dn.cb=function(){to(this)},Dn.ba=function(){try{return 2<ro(this)?this.g.status:-1}catch(t){return-1}},Dn.ga=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},Dn.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Ks(e)}},Dn.Da=function(){return this.m},Dn.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Dn=ao.prototype).ma=8,Dn.G=1,Dn.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(t){}},Dn.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const i=new Vi(this,this.h,t,void 0);let s=this.s;if(this.P&&(s?(s=ar(s),lr(s,this.P)):s=this.P),null===this.o&&(i.H=s),this.ja)t:{for(var e=0,n=0;n<this.l.length;n++){var r=this.l[n];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break t}if(4096===e||n===this.l.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=mo(this,i,e),ds(n=as(this.F),"RID",t),ds(n,"CVER",22),this.D&&ds(n,"X-HTTP-Session-Id",this.D),go(this,n),this.o&&s&&so(n,this.o,s),Ls(this.i,i),this.Ra&&ds(n,"TYPE","init"),this.ja?(ds(n,"$req",e),ds(n,"SID","null"),i.$=!0,$i(i,n,null)):$i(i,n,e),this.G=2}}else 3==this.G&&(t?po(this,t):0==this.l.length||Ns(this.i)||po(this))},Dn.Ga=function(){if(this.u=null,Eo(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Ri($n(this.bb,this),t)}},Dn.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ki(10),lo(this),Eo(this))},Dn.ab=function(){null!=this.v&&(this.v=null,lo(this),vo(this),ki(19))},Dn.jb=function(t){t?(this.h.info("Successfully pinged google.com"),ki(2)):(this.h.info("Failed to ping google.com"),ki(1))},(Dn=Ro.prototype).xa=function(){},Dn.wa=function(){},Dn.va=function(){},Dn.ua=function(){},Dn.Oa=function(){},Co.prototype.g=function(t,e){return new No(t,e)},Kn(No,Xr),No.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),si($n(t.hb,t,e))),ki(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=ko(t,null,t.W),fo(t)},No.prototype.close=function(){co(this.g)},No.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,uo(this.g,e)}else this.v?((e={}).__data__=Zr(t),uo(this.g,e)):uo(this.g,t)},No.prototype.M=function(){this.g.j=null,delete this.j,co(this.g),delete this.g,No.Z.M.call(this)},Kn(Oo,xi),Kn(Do,Ui),Kn(Lo,Ro),Lo.prototype.xa=function(){Yr(this.g,"a")},Lo.prototype.wa=function(t){Yr(this.g,new Oo(t))},Lo.prototype.va=function(t){Yr(this.g,new Do(t))},Lo.prototype.ua=function(){Yr(this.g,"b")},Co.prototype.createWebChannel=Co.prototype.g,No.prototype.send=No.prototype.u,No.prototype.open=No.prototype.m,No.prototype.close=No.prototype.close,Ci.NO_ERROR=0,Ci.TIMEOUT=8,Ci.HTTP_ERROR=6,Ni.COMPLETE="complete",Li.EventType=Mi,Mi.OPEN="a",Mi.CLOSE="b",Mi.ERROR="c",Mi.MESSAGE="d",Xr.prototype.listen=Xr.prototype.N,Ws.prototype.listenOnce=Ws.prototype.O,Ws.prototype.getLastError=Ws.prototype.La,Ws.prototype.getLastErrorCode=Ws.prototype.Da,Ws.prototype.getStatus=Ws.prototype.ba,Ws.prototype.getResponseJson=Ws.prototype.Qa,Ws.prototype.getResponseText=Ws.prototype.ga,Ws.prototype.send=Ws.prototype.ea;var Po=Pn.createWebChannelTransport=function(){return new Co},Mo=Pn.getStatEventTarget=function(){return Ti()},xo=Pn.ErrorCode=Ci,Uo=Pn.EventType=Ni,Fo=Pn.Event=Ei,Vo=Pn.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Bo=Pn.FetchXmlHttpFactory=Bs,jo=Pn.WebChannel=Li,Ho=Pn.XhrIo=Ws;const qo="@firebase/firestore";class $o{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}$o.UNAUTHENTICATED=new $o(null),$o.GOOGLE_CREDENTIALS=new $o("google-credentials-uid"),$o.FIRST_PARTY=new $o("first-party-uid"),$o.MOCK_USER=new $o("mock-user");let zo="9.6.1";const Ko=new class{constructor(t){this.name=t,this._logLevel=Cn,this._logHandler=On,this._userLogHandler=null,kn.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in An))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?Rn[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,An.DEBUG,...t),this._logHandler(this,An.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,An.VERBOSE,...t),this._logHandler(this,An.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,An.INFO,...t),this._logHandler(this,An.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,An.WARN,...t),this._logHandler(this,An.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,An.ERROR,...t),this._logHandler(this,An.ERROR,...t)}}("@firebase/firestore");function Wo(){return Ko.logLevel}function Go(t,...e){if(Ko.logLevel<=An.DEBUG){const n=e.map(Yo);Ko.debug(`Firestore (${zo}): ${t}`,...n)}}function Jo(t,...e){if(Ko.logLevel<=An.ERROR){const n=e.map(Yo);Ko.error(`Firestore (${zo}): ${t}`,...n)}}function Xo(t,...e){if(Ko.logLevel<=An.WARN){const n=e.map(Yo);Ko.warn(`Firestore (${zo}): ${t}`,...n)}}function Yo(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function Qo(t="Unexpected state"){const e=`FIRESTORE (${zo}) INTERNAL ASSERTION FAILED: `+t;throw Jo(e),new Error(e)}function Zo(t,e){t||Qo()}function ta(t,e){return t}const ea={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class na extends Error{constructor(t,e){super(e),this.code=t,this.message=e,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ra{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class ia{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class sa{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e($o.UNAUTHENTICATED)))}shutdown(){}}class oa{constructor(t){this.t=t,this.currentUser=$o.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const r=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let i=new ra;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ra,t.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const e=i;t.enqueueRetryable((async()=>{await e.promise,await r(this.currentUser)}))},o=t=>{Go("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(Go("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ra)}}),0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(Go("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(Zo("string"==typeof e.accessToken),new ia(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Zo(null===t||"string"==typeof t),new $o(t)}}class aa{constructor(t,e,n){this.type="FirstParty",this.user=$o.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",e);const r=t.auth.getAuthHeaderValueForFirstParty([]);r&&this.headers.set("Authorization",r),n&&this.headers.set("X-Goog-Iam-Authorization-Token",n)}}class ca{constructor(t,e,n){this.h=t,this.l=e,this.m=n}getToken(){return Promise.resolve(new aa(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable((()=>e($o.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class la{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ha{constructor(t){this.g=t,this.forceRefresh=!1,this.appCheck=null}start(t,e){this.o=n=>{t.enqueueRetryable((()=>(t=>(null!=t.error&&Go("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`),e(t.token)))(n)))};const n=t=>{Go("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.g.onInit((t=>n(t))),setTimeout((()=>{if(!this.appCheck){const t=this.g.getImmediate({optional:!0});t?n(t):Go("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(Zo("string"==typeof t.token),new la(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class ua{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.p(t),this.T=t=>e.writeSequenceNumber(t))}p(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.T&&this.T(t),t}}function da(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let e=0;e<t;e++)n[e]=Math.floor(256*Math.random());return n}ua.I=-1;function fa(t,e){return t<e?-1:t>e?1:0}function pa(t,e,n){return t.length===e.length&&t.every(((t,r)=>n(t,e[r])))}class ga{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new na(ea.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new na(ea.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new na(ea.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new na(ea.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return ga.fromMillis(Date.now())}static fromDate(t){return ga.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new ga(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?fa(this.nanoseconds,t.nanoseconds):fa(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ma{constructor(t){this.timestamp=t}static fromTimestamp(t){return new ma(t)}static min(){return new ma(new ga(0,0))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function ya(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function va(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}class wa{constructor(t,e,n){void 0===e?e=0:e>t.length&&Qo(),void 0===n?n=t.length-e:n>t.length-e&&Qo(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===wa.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof wa?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const n=t.get(r),i=e.get(r);if(n<i)return-1;if(n>i)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Ea extends wa{construct(t,e,n){return new Ea(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new na(ea.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new Ea(e)}static emptyPath(){return new Ea([])}}const Ia=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ta extends wa{construct(t,e,n){return new Ta(t,e,n)}static isValidIdentifier(t){return Ia.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ta.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ta(["__name__"])}static fromServerFormat(t){const e=[];let n="",r=0;const i=()=>{if(0===n.length)throw new na(ea.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let s=!1;for(;r<t.length;){const e=t[r];if("\\"===e){if(r+1===t.length)throw new na(ea.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[r+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new na(ea.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,r+=2}else"`"===e?(s=!s,r++):"."!==e||s?(n+=e,r++):(i(),r++)}if(i(),s)throw new na(ea.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ta(e)}static emptyPath(){return new Ta([])}}class ba{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new ba(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new ba(e)}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return fa(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ba.EMPTY_BYTE_STRING=new ba("");const _a=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sa(t){if(Zo(!!t),"string"==typeof t){let e=0;const n=_a.exec(t);if(Zo(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ka(t.seconds),nanos:ka(t.nanos)}}function ka(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Aa(t){return"string"==typeof t?ba.fromBase64String(t):ba.fromUint8Array(t)}function Ra(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ca(t){const e=t.mapValue.fields.__previous_value__;return Ra(e)?Ca(e):e}function Na(t){const e=Sa(t.mapValue.fields.__local_write_time__.timestampValue);return new ga(e.seconds,e.nanos)}function Oa(t){return null==t}function Da(t){return 0===t&&1/t==-1/0}class La{constructor(t){this.path=t}static fromPath(t){return new La(Ea.fromString(t))}static fromName(t){return new La(Ea.fromString(t).popFirst(5))}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}isEqual(t){return null!==t&&0===Ea.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return Ea.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new La(new Ea(t.slice()))}}function Pa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ra(t)?4:10:Qo()}function Ma(t,e){const n=Pa(t);if(n!==Pa(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Na(t).isEqual(Na(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=Sa(t.timestampValue),r=Sa(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Aa(t.bytesValue).isEqual(Aa(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return ka(t.geoPointValue.latitude)===ka(e.geoPointValue.latitude)&&ka(t.geoPointValue.longitude)===ka(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return ka(t.integerValue)===ka(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=ka(t.doubleValue),r=ka(e.doubleValue);return n===r?Da(n)===Da(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return pa(t.arrayValue.values||[],e.arrayValue.values||[],Ma);case 10:return function(t,e){const n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(ya(n)!==ya(r))return!1;for(const t in n)if(n.hasOwnProperty(t)&&(void 0===r[t]||!Ma(n[t],r[t])))return!1;return!0}(t,e);default:return Qo()}}function xa(t,e){return void 0!==(t.values||[]).find((t=>Ma(t,e)))}function Ua(t,e){const n=Pa(t),r=Pa(e);if(n!==r)return fa(n,r);switch(n){case 0:return 0;case 1:return fa(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=ka(t.integerValue||t.doubleValue),r=ka(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Fa(t.timestampValue,e.timestampValue);case 4:return Fa(Na(t),Na(e));case 5:return fa(t.stringValue,e.stringValue);case 6:return function(t,e){const n=Aa(t),r=Aa(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),r=e.split("/");for(let t=0;t<n.length&&t<r.length;t++){const e=fa(n[t],r[t]);if(0!==e)return e}return fa(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=fa(ka(t.latitude),ka(e.latitude));return 0!==n?n:fa(ka(t.longitude),ka(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],r=e.values||[];for(let t=0;t<n.length&&t<r.length;++t){const e=Ua(n[t],r[t]);if(e)return e}return fa(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){const n=t.fields||{},r=Object.keys(n),i=e.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let t=0;t<r.length&&t<s.length;++t){const e=fa(r[t],s[t]);if(0!==e)return e;const o=Ua(n[r[t]],i[s[t]]);if(0!==o)return o}return fa(r.length,s.length)}(t.mapValue,e.mapValue);default:throw Qo()}}function Fa(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return fa(t,e);const n=Sa(t),r=Sa(e),i=fa(n.seconds,r.seconds);return 0!==i?i:fa(n.nanos,r.nanos)}function Va(t){return Ba(t)}function Ba(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=Sa(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Aa(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,La.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(t){let e="[",n=!0;for(const r of t.values||[])n?n=!1:e+=",",e+=Ba(r);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",r=!0;for(const i of e)r?r=!1:n+=",",n+=`${i}:${Ba(t.fields[i])}`;return n+"}"}(t.mapValue):Qo();var e,n}function ja(t){return!!t&&"integerValue"in t}function Ha(t){return!!t&&"arrayValue"in t}function qa(t){return!!t&&"nullValue"in t}function $a(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function za(t){return!!t&&"mapValue"in t}function Ka(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return va(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=Ka(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ka(t.arrayValue.values[n]);return e}return Object.assign({},t)}class Wa{constructor(t){this.value=t}static empty(){return new Wa({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!za(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ka(e)}setAll(t){let e=Ta.emptyPath(),n={},r=[];t.forEach(((t,i)=>{if(!e.isImmediateParentOf(i)){const t=this.getFieldsMap(e);this.applyChanges(t,n,r),n={},r=[],e=i.popLast()}t?n[i.lastSegment()]=Ka(t):r.push(i.lastSegment())}));const i=this.getFieldsMap(e);this.applyChanges(i,n,r)}delete(t){const e=this.field(t.popLast());za(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Ma(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let r=e.mapValue.fields[t.get(n)];za(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,n){va(e,((e,n)=>t[e]=n));for(const e of n)delete t[e]}clone(){return new Wa(Ka(this.value))}}class Ga{constructor(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}static newInvalidDocument(t){return new Ga(t,0,ma.min(),Wa.empty(),0)}static newFoundDocument(t,e,n){return new Ga(t,1,e,n,0)}static newNoDocument(t,e){return new Ga(t,2,e,Wa.empty(),0)}static newUnknownDocument(t,e){return new Ga(t,3,e,Wa.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Wa.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Wa.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof Ga&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}clone(){return new Ga(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ja{constructor(t,e=null,n=[],r=[],i=null,s=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.R=null}}function Xa(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Ja(t,e,n,r,i,s,o)}function Ya(t){const e=ta(t);if(null===e.R){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>function(t){return t.field.canonicalString()+t.op.toString()+Va(t.value)}(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),Oa(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=hc(e.startAt)),e.endAt&&(t+="|ub:",t+=hc(e.endAt)),e.R=t}return e.R}function Qa(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!dc(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let i=0;i<t.filters.length;i++)if(n=t.filters[i],r=e.filters[i],n.op!==r.op||!n.field.isEqual(r.field)||!Ma(n.value,r.value))return!1;var n,r;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!pc(t.startAt,e.startAt)&&pc(t.endAt,e.endAt)}function Za(t){return La.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class tc extends class{}{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.P(t,e,n):new ec(t,e,n):"array-contains"===e?new sc(t,n):"in"===e?new oc(t,n):"not-in"===e?new ac(t,n):"array-contains-any"===e?new cc(t,n):new tc(t,e,n)}static P(t,e,n){return"in"===e?new nc(t,n):new rc(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.v(Ua(e,this.value)):null!==e&&Pa(this.value)===Pa(e)&&this.v(Ua(e,this.value))}v(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Qo()}}V(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class ec extends tc{constructor(t,e,n){super(t,e,n),this.key=La.fromName(n.referenceValue)}matches(t){const e=La.comparator(t.key,this.key);return this.v(e)}}class nc extends tc{constructor(t,e){super(t,"in",e),this.keys=ic(0,e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class rc extends tc{constructor(t,e){super(t,"not-in",e),this.keys=ic(0,e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function ic(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>La.fromName(t.referenceValue)))}class sc extends tc{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Ha(e)&&xa(e.arrayValue,this.value)}}class oc extends tc{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&xa(this.value.arrayValue,e)}}class ac extends tc{constructor(t,e){super(t,"not-in",e)}matches(t){if(xa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!xa(this.value.arrayValue,e)}}class cc extends tc{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Ha(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>xa(this.value.arrayValue,t)))}}class lc{constructor(t,e){this.position=t,this.before=e}}function hc(t){return`${t.before?"b":"a"}:${t.position.map((t=>Va(t))).join(",")}`}class uc{constructor(t,e="asc"){this.field=t,this.dir=e}}function dc(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function fc(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?La.comparator(La.fromName(o.referenceValue),n.key):Ua(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function pc(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ma(t.position[n],e.position[n]))return!1;return!0}class gc{constructor(t,e=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.S=null,this.D=null,this.startAt,this.endAt}}function mc(t){return new gc(t)}function yc(t){return!Oa(t.limit)&&"F"===t.limitType}function vc(t){return!Oa(t.limit)&&"L"===t.limitType}function wc(t){const e=ta(t);if(null===e.S){e.S=[];const t=function(t){for(const e of t.filters)if(e.V())return e.field;return null}(e),n=function(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}(e);if(null!==t&&null===n)t.isKeyField()||e.S.push(new uc(t)),e.S.push(new uc(Ta.keyField(),"asc"));else{let t=!1;for(const n of e.explicitOrderBy)e.S.push(n),n.field.isKeyField()&&(t=!0);if(!t){const t=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.S.push(new uc(Ta.keyField(),t))}}}return e.S}function Ec(t){const e=ta(t);if(!e.D)if("F"===e.limitType)e.D=Xa(e.path,e.collectionGroup,wc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const n of wc(e)){const e="desc"===n.dir?"asc":"desc";t.push(new uc(n.field,e))}const n=e.endAt?new lc(e.endAt.position,!e.endAt.before):null,r=e.startAt?new lc(e.startAt.position,!e.startAt.before):null;e.D=Xa(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}return e.D}function Ic(t,e){return Qa(Ec(t),Ec(e))&&t.limitType===e.limitType}function Tc(t){return`${Ya(Ec(t))}|lt:${t.limitType}`}function bc(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>{return`${(e=t).field.canonicalString()} ${e.op} ${Va(e.value)}`;var e})).join(", ")}]`),Oa(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t))).join(", ")}]`),t.startAt&&(e+=", startAt: "+hc(t.startAt)),t.endAt&&(e+=", endAt: "+hc(t.endAt)),`Target(${e})`}(Ec(t))}; limitType=${t.limitType})`}function _c(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):La.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of t.explicitOrderBy)if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!fc(t.startAt,wc(t),e)||t.endAt&&fc(t.endAt,wc(t),e))}(t,e)}function Sc(t){return(e,n)=>{let r=!1;for(const i of wc(t)){const t=kc(i,e,n);if(0!==t)return t;r=r||i.field.isKeyField()}return 0}}function kc(t,e,n){const r=t.field.isKeyField()?La.comparator(e.key,n.key):function(t,e,n){const r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Ua(r,i):Qo()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Qo()}}class Ac{constructor(){this._=void 0}}function Rc(t,e,n){return t instanceof Nc?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Oc?Dc(t,e):t instanceof Lc?Pc(t,e):function(t,e){const n=function(t,e){return t instanceof Mc?ja(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}(t,e),r=xc(n)+xc(t.N);return ja(n)&&ja(t.N)?function(t){return{integerValue:""+t}}(r):function(t,e){if(t.C){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Da(e)?"-0":e}}(t.k,r)}(t,e)}function Cc(t,e,n){return t instanceof Oc?Dc(t,e):t instanceof Lc?Pc(t,e):n}class Nc extends Ac{}class Oc extends Ac{constructor(t){super(),this.elements=t}}function Dc(t,e){const n=Uc(e);for(const e of t.elements)n.some((t=>Ma(t,e)))||n.push(e);return{arrayValue:{values:n}}}class Lc extends Ac{constructor(t){super(),this.elements=t}}function Pc(t,e){let n=Uc(e);for(const e of t.elements)n=n.filter((t=>!Ma(t,e)));return{arrayValue:{values:n}}}class Mc extends Ac{constructor(t,e){super(),this.k=t,this.N=e}}function xc(t){return ka(t.integerValue||t.doubleValue)}function Uc(t){return Ha(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Fc(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Vc{}function Bc(t,e,n){t instanceof $c?function(t,e,n){const r=t.value.clone(),i=Wc(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof zc?function(t,e,n){if(!Fc(t.precondition,e))return void e.convertToUnknownDocument(n.version);const r=Wc(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Kc(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function jc(t,e,n){t instanceof $c?function(t,e,n){if(!Fc(t.precondition,e))return;const r=t.value.clone(),i=Gc(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(qc(e),r).setHasLocalMutations()}(t,e,n):t instanceof zc?function(t,e,n){if(!Fc(t.precondition,e))return;const r=Gc(t.fieldTransforms,n,e),i=e.data;i.setAll(Kc(t)),i.setAll(r),e.convertToFoundDocument(qc(e),i).setHasLocalMutations()}(t,e,n):function(t,e){Fc(t.precondition,e)&&e.convertToNoDocument(ma.min())}(t,e)}function Hc(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&pa(t,e,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Oc&&e instanceof Oc||t instanceof Lc&&e instanceof Lc?pa(t.elements,e.elements,Ma):t instanceof Mc&&e instanceof Mc?Ma(t.N,e.N):t instanceof Nc&&e instanceof Nc}(t.transform,e.transform)}(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function qc(t){return t.isFoundDocument()?t.version:ma.min()}class $c extends Vc{constructor(t,e,n,r=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=r,this.type=0}}class zc extends Vc{constructor(t,e,n,r,i=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}}function Kc(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function Wc(t,e,n){const r=new Map;Zo(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Cc(o,a,n[i]))}return r}function Gc(t,e,n){const r=new Map;for(const i of t){const t=i.transform,s=n.data.field(i.field);r.set(i.field,Rc(t,s,e))}return r}class Jc{constructor(t){this.count=t}}var Xc,Yc;function Qc(t){if(void 0===t)return Jo("GRPC error has no .code"),ea.UNKNOWN;switch(t){case Xc.OK:return ea.OK;case Xc.CANCELLED:return ea.CANCELLED;case Xc.UNKNOWN:return ea.UNKNOWN;case Xc.DEADLINE_EXCEEDED:return ea.DEADLINE_EXCEEDED;case Xc.RESOURCE_EXHAUSTED:return ea.RESOURCE_EXHAUSTED;case Xc.INTERNAL:return ea.INTERNAL;case Xc.UNAVAILABLE:return ea.UNAVAILABLE;case Xc.UNAUTHENTICATED:return ea.UNAUTHENTICATED;case Xc.INVALID_ARGUMENT:return ea.INVALID_ARGUMENT;case Xc.NOT_FOUND:return ea.NOT_FOUND;case Xc.ALREADY_EXISTS:return ea.ALREADY_EXISTS;case Xc.PERMISSION_DENIED:return ea.PERMISSION_DENIED;case Xc.FAILED_PRECONDITION:return ea.FAILED_PRECONDITION;case Xc.ABORTED:return ea.ABORTED;case Xc.OUT_OF_RANGE:return ea.OUT_OF_RANGE;case Xc.UNIMPLEMENTED:return ea.UNIMPLEMENTED;case Xc.DATA_LOSS:return ea.DATA_LOSS;default:return Qo()}}(Yc=Xc||(Xc={}))[Yc.OK=0]="OK",Yc[Yc.CANCELLED=1]="CANCELLED",Yc[Yc.UNKNOWN=2]="UNKNOWN",Yc[Yc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Yc[Yc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Yc[Yc.NOT_FOUND=5]="NOT_FOUND",Yc[Yc.ALREADY_EXISTS=6]="ALREADY_EXISTS",Yc[Yc.PERMISSION_DENIED=7]="PERMISSION_DENIED",Yc[Yc.UNAUTHENTICATED=16]="UNAUTHENTICATED",Yc[Yc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Yc[Yc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Yc[Yc.ABORTED=10]="ABORTED",Yc[Yc.OUT_OF_RANGE=11]="OUT_OF_RANGE",Yc[Yc.UNIMPLEMENTED=12]="UNIMPLEMENTED",Yc[Yc.INTERNAL=13]="INTERNAL",Yc[Yc.UNAVAILABLE=14]="UNAVAILABLE",Yc[Yc.DATA_LOSS=15]="DATA_LOSS";class Zc{constructor(t,e){this.comparator=t,this.root=e||el.EMPTY}insert(t,e){return new Zc(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,el.BLACK,null,null))}remove(t){return new Zc(this.comparator,this.root.remove(t,this.comparator).copy(null,null,el.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new tl(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new tl(this.root,t,this.comparator,!1)}getReverseIterator(){return new tl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new tl(this.root,t,this.comparator,!0)}}class tl{constructor(t,e,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class el{constructor(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:el.RED,this.left=null!=r?r:el.EMPTY,this.right=null!=i?i:el.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,r,i){return new el(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let r=this;const i=n(t,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return el.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return el.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,el.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,el.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Qo();if(this.right.isRed())throw Qo();const t=this.left.check();if(t!==this.right.check())throw Qo();return t+(this.isRed()?0:1)}}el.EMPTY=null,el.RED=!0,el.BLACK=!1,el.EMPTY=new class{constructor(){this.size=0}get key(){throw Qo()}get value(){throw Qo()}get color(){throw Qo()}get left(){throw Qo()}get right(){throw Qo()}copy(t,e,n,r,i){return this}insert(t,e,n){return new el(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class nl{constructor(t){this.comparator=t,this.data=new Zc(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new rl(this.data.getIterator())}getIteratorFrom(t){return new rl(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof nl))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(0!==this.comparator(t,r))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new nl(this.comparator);return e.data=t,e}}class rl{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const il=new Zc(La.comparator);function sl(){return il}const ol=new Zc(La.comparator);function al(){return ol}new Zc(La.comparator);const cl=new nl(La.comparator);function ll(...t){let e=cl;for(const n of t)e=e.add(n);return e}const hl=new nl(fa);function ul(){return hl}class dl{constructor(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,e){const n=new Map;return n.set(t,fl.createSynthesizedTargetChangeForCurrentChange(t,e)),new dl(ma.min(),n,ul(),sl(),ll())}}class fl{constructor(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,e){return new fl(ba.EMPTY_BYTE_STRING,e,ll(),ll(),ll())}}class pl{constructor(t,e,n,r){this.$=t,this.removedTargetIds=e,this.key=n,this.F=r}}class gl{constructor(t,e){this.targetId=t,this.O=e}}class ml{constructor(t,e,n=ba.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}}class yl{constructor(){this.M=0,this.L=El(),this.B=ba.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}get current(){return this.U}get resumeToken(){return this.B}get K(){return 0!==this.M}get j(){return this.q}W(t){t.approximateByteSize()>0&&(this.q=!0,this.B=t)}G(){let t=ll(),e=ll(),n=ll();return this.L.forEach(((r,i)=>{switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Qo()}})),new fl(this.B,this.U,t,e,n)}H(){this.q=!1,this.L=El()}J(t,e){this.q=!0,this.L=this.L.insert(t,e)}Y(t){this.q=!0,this.L=this.L.remove(t)}X(){this.M+=1}Z(){this.M-=1}tt(){this.q=!0,this.U=!0}}class vl{constructor(t){this.et=t,this.nt=new Map,this.st=sl(),this.it=wl(),this.rt=new nl(fa)}ot(t){for(const e of t.$)t.F&&t.F.isFoundDocument()?this.at(e,t.F):this.ct(e,t.key,t.F);for(const e of t.removedTargetIds)this.ct(e,t.key,t.F)}ut(t){this.forEachTarget(t,(e=>{const n=this.ht(e);switch(t.state){case 0:this.lt(e)&&n.W(t.resumeToken);break;case 1:n.Z(),n.K||n.H(),n.W(t.resumeToken);break;case 2:n.Z(),n.K||this.removeTarget(e);break;case 3:this.lt(e)&&(n.tt(),n.W(t.resumeToken));break;case 4:this.lt(e)&&(this.ft(e),n.W(t.resumeToken));break;default:Qo()}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.nt.forEach(((t,n)=>{this.lt(n)&&e(n)}))}dt(t){const e=t.targetId,n=t.O.count,r=this.wt(e);if(r){const t=r.target;if(Za(t))if(0===n){const n=new La(t.path);this.ct(e,n,Ga.newNoDocument(n,ma.min()))}else Zo(1===n);else this._t(e)!==n&&(this.ft(e),this.rt=this.rt.add(e))}}gt(t){const e=new Map;this.nt.forEach(((n,r)=>{const i=this.wt(r);if(i){if(n.current&&Za(i.target)){const e=new La(i.target.path);null!==this.st.get(e)||this.yt(r,e)||this.ct(r,e,Ga.newNoDocument(e,t))}n.j&&(e.set(r,n.G()),n.H())}}));let n=ll();this.it.forEach(((t,e)=>{let r=!0;e.forEachWhile((t=>{const e=this.wt(t);return!e||2===e.purpose||(r=!1,!1)})),r&&(n=n.add(t))}));const r=new dl(t,e,this.rt,this.st,n);return this.st=sl(),this.it=wl(),this.rt=new nl(fa),r}at(t,e){if(!this.lt(t))return;const n=this.yt(t,e.key)?2:0;this.ht(t).J(e.key,n),this.st=this.st.insert(e.key,e),this.it=this.it.insert(e.key,this.Tt(e.key).add(t))}ct(t,e,n){if(!this.lt(t))return;const r=this.ht(t);this.yt(t,e)?r.J(e,1):r.Y(e),this.it=this.it.insert(e,this.Tt(e).delete(t)),n&&(this.st=this.st.insert(e,n))}removeTarget(t){this.nt.delete(t)}_t(t){const e=this.ht(t).G();return this.et.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}X(t){this.ht(t).X()}ht(t){let e=this.nt.get(t);return e||(e=new yl,this.nt.set(t,e)),e}Tt(t){let e=this.it.get(t);return e||(e=new nl(fa),this.it=this.it.insert(t,e)),e}lt(t){const e=null!==this.wt(t);return e||Go("WatchChangeAggregator","Detected inactive target",t),e}wt(t){const e=this.nt.get(t);return e&&e.K?null:this.et.Et(t)}ft(t){this.nt.set(t,new yl),this.et.getRemoteKeysForTarget(t).forEach((e=>{this.ct(t,e,null)}))}yt(t,e){return this.et.getRemoteKeysForTarget(t).has(e)}}function wl(){return new Zc(La.comparator)}function El(){return new Zc(La.comparator)}const Il={asc:"ASCENDING",desc:"DESCENDING"},Tl={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class bl{constructor(t,e){this.databaseId=t,this.C=e}}function _l(t){return Zo(!!t),ma.fromTimestamp(function(t){const e=Sa(t);return new ga(e.seconds,e.nanos)}(t))}function Sl(t){const e=Ea.fromString(t);return Zo(Hl(e)),e}function kl(t,e){const n=Sl(e);if(n.get(1)!==t.databaseId.projectId)throw new na(ea.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new na(ea.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new La(Cl(n))}function Al(t,e){return function(t,e){return function(t){return new Ea(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}(t.databaseId,e)}function Rl(t){return new Ea(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Cl(t){return Zo(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Nl(t,e){return{documents:[Al(t,e.path)]}}function Ol(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Al(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Al(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(t){if(0===t.length)return;const e=t.map((t=>function(t){if("=="===t.op){if($a(t.value))return{unaryFilter:{field:Fl(t.field),op:"IS_NAN"}};if(qa(t.value))return{unaryFilter:{field:Fl(t.field),op:"IS_NULL"}}}else if("!="===t.op){if($a(t.value))return{unaryFilter:{field:Fl(t.field),op:"IS_NOT_NAN"}};if(qa(t.value))return{unaryFilter:{field:Fl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fl(t.field),op:Ul(t.op),value:t.value}}}(t)));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}(e.filters);i&&(n.structuredQuery.where=i);const s=function(t){if(0!==t.length)return t.map((t=>function(t){return{field:Fl(t.field),direction:xl(t.dir)}}(t)))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(t,e){return t.C||Oa(e)?e:{value:e}}(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=Pl(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Pl(e.endAt)),n}function Dl(t){let e=function(t){const e=Sl(t);return 4===e.length?Ea.emptyPath():Cl(e)}(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Zo(1===r);const t=n.from[0];t.allDescendants?i=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=Ll(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((t=>function(t){return new uc(Vl(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t))));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,Oa(e)?null:e}(n.limit));let c=null;n.startAt&&(c=Ml(n.startAt));let l=null;return n.endAt&&(l=Ml(n.endAt)),function(t,e,n,r,i,s,o,a){return new gc(t,e,n,r,i,s,o,a)}(e,i,o,s,a,"F",c,l)}function Ll(t){return t?void 0!==t.unaryFilter?[jl(t)]:void 0!==t.fieldFilter?[Bl(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((t=>Ll(t))).reduce(((t,e)=>t.concat(e))):Qo():[]}function Pl(t){return{before:t.before,values:t.position}}function Ml(t){const e=!!t.before,n=t.values||[];return new lc(n,e)}function xl(t){return Il[t]}function Ul(t){return Tl[t]}function Fl(t){return{fieldPath:t.canonicalString()}}function Vl(t){return Ta.fromServerFormat(t.fieldPath)}function Bl(t){return tc.create(Vl(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Qo()}}(t.fieldFilter.op),t.fieldFilter.value)}function jl(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Vl(t.unaryFilter.field);return tc.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Vl(t.unaryFilter.field);return tc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Vl(t.unaryFilter.field);return tc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Vl(t.unaryFilter.field);return tc.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Qo()}}function Hl(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function ql(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=zl(e)),e=$l(t.get(n),e);return zl(e)}function $l(t,e){let n=e;const r=t.length;for(let e=0;e<r;e++){const r=t.charAt(e);switch(r){case"\0":n+="";break;case"":n+="";break;default:n+=r}}return n}function zl(t){return t+""}class Kl{constructor(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}}Kl.store="owner",Kl.key="owner";class Wl{constructor(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}}Wl.store="mutationQueues",Wl.keyPath="userId";class Gl{constructor(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}}Gl.store="mutations",Gl.keyPath="batchId",Gl.userMutationsIndex="userMutationsIndex",Gl.userMutationsKeyPath=["userId","batchId"];class Jl{constructor(){}static prefixForUser(t){return[t]}static prefixForPath(t,e){return[t,ql(e)]}static key(t,e,n){return[t,ql(e),n]}}Jl.store="documentMutations",Jl.PLACEHOLDER=new Jl;class Xl{constructor(t,e,n,r,i,s){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=s}}Xl.store="remoteDocuments",Xl.readTimeIndex="readTimeIndex",Xl.readTimeIndexPath="readTime",Xl.collectionReadTimeIndex="collectionReadTimeIndex",Xl.collectionReadTimeIndexPath=["parentPath","readTime"];class Yl{constructor(t){this.byteSize=t}}Yl.store="remoteDocumentGlobal",Yl.key="remoteDocumentGlobalKey";class Ql{constructor(t,e,n,r,i,s,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=s,this.query=o}}Ql.store="targets",Ql.keyPath="targetId",Ql.queryTargetsIndexName="queryTargetsIndex",Ql.queryTargetsKeyPath=["canonicalId","targetId"];class Zl{constructor(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n}}Zl.store="targetDocuments",Zl.keyPath=["targetId","path"],Zl.documentTargetsIndex="documentTargetsIndex",Zl.documentTargetsKeyPath=["path","targetId"];class th{constructor(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}}th.key="targetGlobalKey",th.store="targetGlobal";class eh{constructor(t,e){this.collectionId=t,this.parent=e}}eh.store="collectionParents",eh.keyPath=["collectionId","parent"];class nh{constructor(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r}}nh.store="clientMetadata",nh.keyPath="clientId";class rh{constructor(t,e,n){this.bundleId=t,this.createTime=e,this.version=n}}rh.store="bundles",rh.keyPath="bundleId";class ih{constructor(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n}}ih.store="namedQueries",ih.keyPath="name",Wl.store,Gl.store,Jl.store,Xl.store,Ql.store,Kl.store,th.store,Zl.store,nh.store,Yl.store,eh.store,rh.store,ih.store;class sh{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Qo(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new sh(((n,r)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,r)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,r)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof sh?e:sh.resolve(e)}catch(t){return sh.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):sh.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):sh.reject(e)}static resolve(t){return new sh(((e,n)=>{e(t)}))}static reject(t){return new sh(((e,n)=>{n(t)}))}static waitFor(t){return new sh(((e,n)=>{let r=0,i=0,s=!1;t.forEach((t=>{++r,t.next((()=>{++i,s&&i===r&&e()}),(t=>n(t)))})),s=!0,i===r&&e()}))}static or(t){let e=sh.resolve(!1);for(const n of t)e=e.next((t=>t?sh.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,r)=>{n.push(e.call(this,t,r))})),this.waitFor(n)}}function oh(t){return"IndexedDbTransactionError"===t.name}class ah{constructor(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let e=0;e<this.mutations.length;e++){const r=this.mutations[e];r.key.isEqual(t.key)&&Bc(r,t,n[e])}}applyToLocalView(t){for(const e of this.baseMutations)e.key.isEqual(t.key)&&jc(e,t,this.localWriteTime);for(const e of this.mutations)e.key.isEqual(t.key)&&jc(e,t,this.localWriteTime)}applyToLocalDocumentSet(t){this.mutations.forEach((e=>{const n=t.get(e.key),r=n;this.applyToLocalView(r),n.isValidDocument()||r.convertToNoDocument(ma.min())}))}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),ll())}isEqual(t){return this.batchId===t.batchId&&pa(this.mutations,t.mutations,((t,e)=>Hc(t,e)))&&pa(this.baseMutations,t.baseMutations,((t,e)=>Hc(t,e)))}}class ch{constructor(t,e,n,r,i=ma.min(),s=ma.min(),o=ba.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}withSequenceNumber(t){return new ch(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new ch(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new ch(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class lh{constructor(t){this.Gt=t}}function hh(t){const e=Dl({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?function(t,e,n){return new gc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}(e,e.limit,"L"):e}class uh{constructor(){this.zt=new dh}addToCollectionParentIndex(t,e){return this.zt.add(e),sh.resolve()}getCollectionParents(t,e){return sh.resolve(this.zt.getEntries(e))}}class dh{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new nl(Ea.comparator),i=!r.has(n);return this.index[e]=r.add(n),i}has(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)}getEntries(t){return(this.index[t]||new nl(Ea.comparator)).toArray()}}class fh{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new fh(t,fh.DEFAULT_COLLECTION_PERCENTILE,fh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}fh.DEFAULT_COLLECTION_PERCENTILE=10,fh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fh.DEFAULT=new fh(41943040,fh.DEFAULT_COLLECTION_PERCENTILE,fh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fh.DISABLED=new fh(-1,0,0);class ph{constructor(t){this.se=t}next(){return this.se+=2,this.se}static ie(){return new ph(0)}static re(){return new ph(-1)}}async function gh(t){if(t.code!==ea.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==t.message)throw t;Go("LocalStore","Unexpectedly lost primary lease")}class mh{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[e,r]of n)if(this.equalsFn(e,t))return r}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],t))return void(r[n]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1}forEach(t){va(this.inner,((e,n)=>{for(const[e,r]of n)t(e,r)}))}isEmpty(){return function(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}(this.inner)}}class yh{constructor(t,e,n){this.Je=t,this.An=e,this.Jt=n}Rn(t,e){return this.An.getAllMutationBatchesAffectingDocumentKey(t,e).next((n=>this.Pn(t,e,n)))}Pn(t,e,n){return this.Je.getEntry(t,e).next((t=>{for(const e of n)e.applyToLocalView(t);return t}))}bn(t,e){t.forEach(((t,n)=>{for(const t of e)t.applyToLocalView(n)}))}vn(t,e){return this.Je.getEntries(t,e).next((e=>this.Vn(t,e).next((()=>e))))}Vn(t,e){return this.An.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>this.bn(e,t)))}getDocumentsMatchingQuery(t,e,n){return function(t){return La.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Sn(t,e.path):function(t){return null!==t.collectionGroup}(e)?this.Dn(t,e,n):this.Cn(t,e,n)}Sn(t,e){return this.Rn(t,new La(e)).next((t=>{let e=al();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}Dn(t,e,n){const r=e.collectionGroup;let i=al();return this.Jt.getCollectionParents(t,r).next((s=>sh.forEach(s,(s=>{const o=function(t,e){return new gc(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(r));return this.Cn(t,o,n).next((t=>{t.forEach(((t,e)=>{i=i.insert(t,e)}))}))})).next((()=>i))))}Cn(t,e,n){let r,i;return this.Je.getDocumentsMatchingQuery(t,e,n).next((n=>(r=n,this.An.getAllMutationBatchesAffectingQuery(t,e)))).next((e=>(i=e,this.Nn(t,i,r).next((t=>{r=t;for(const t of i)for(const e of t.mutations){const n=e.key;let i=r.get(n);null==i&&(i=Ga.newInvalidDocument(n),r=r.insert(n,i)),jc(e,i,t.localWriteTime),i.isFoundDocument()||(r=r.remove(n))}}))))).next((()=>(r.forEach(((t,n)=>{_c(e,n)||(r=r.remove(t))})),r)))}Nn(t,e,n){let r=ll();for(const t of e)for(const e of t.mutations)e instanceof zc&&null===n.get(e.key)&&(r=r.add(e.key));let i=n;return this.Je.getEntries(t,r).next((t=>(t.forEach(((t,e)=>{e.isFoundDocument()&&(i=i.insert(t,e))})),i)))}}class vh{constructor(t,e,n,r){this.targetId=t,this.fromCache=e,this.kn=n,this.xn=r}static $n(t,e){let n=ll(),r=ll();for(const t of e.docChanges)switch(t.type){case 0:n=n.add(t.doc.key);break;case 1:r=r.add(t.doc.key)}return new vh(t,e.fromCache,n,r)}}class wh{Fn(t){this.On=t}getDocumentsMatchingQuery(t,e,n,r){return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(ma.min())?this.Mn(t,e):this.On.vn(t,r).next((i=>{const s=this.Ln(e,i);return(yc(e)||vc(e))&&this.Bn(e.limitType,s,r,n)?this.Mn(t,e):(Wo()<=An.DEBUG&&Go("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),bc(e)),this.On.getDocumentsMatchingQuery(t,e,n).next((t=>(s.forEach((e=>{t=t.insert(e.key,e)})),t))))}))}Ln(t,e){let n=new nl(Sc(t));return e.forEach(((e,r)=>{_c(t,r)&&(n=n.add(r))})),n}Bn(t,e,n,r){if(n.size!==e.size)return!0;const i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Mn(t,e){return Wo()<=An.DEBUG&&Go("QueryEngine","Using full collection scan to execute query:",bc(e)),this.On.getDocumentsMatchingQuery(t,e,ma.min())}}class Eh{constructor(t,e,n,r){this.persistence=t,this.Un=e,this.k=r,this.qn=new Zc(fa),this.Kn=new mh((t=>Ya(t)),Qa),this.jn=ma.min(),this.An=t.getMutationQueue(n),this.Qn=t.getRemoteDocumentCache(),this.He=t.getTargetCache(),this.Wn=new yh(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=t.getBundleCache(),this.Un.Fn(this.Wn)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.qn)))}}async function Ih(t,e){const n=ta(t);let r=n.An,i=n.Wn;const s=await n.persistence.runTransaction("Handle user change","readonly",(t=>{let s;return n.An.getAllMutationBatches(t).next((o=>(s=o,r=n.persistence.getMutationQueue(e),i=new yh(n.Qn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)))).next((e=>{const n=[],r=[];let o=ll();for(const t of s){n.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){r.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return i.vn(t,o).next((t=>({Gn:t,removedBatchIds:n,addedBatchIds:r})))}))}));return n.An=r,n.Wn=i,n.Un.Fn(n.Wn),s}function Th(t){const e=ta(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.He.getLastRemoteSnapshotVersion(t)))}async function bh(t,e,n){const r=ta(t),i=r.qn.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(t=>r.persistence.referenceDelegate.removeTarget(t,i)))}catch(t){if(!oh(t))throw t;Go("LocalStore",`Failed to update sequence numbers for target ${e}: ${t}`)}r.qn=r.qn.remove(e),r.Kn.delete(i.target)}function _h(t,e,n){const r=ta(t);let i=ma.min(),s=ll();return r.persistence.runTransaction("Execute query","readonly",(t=>function(t,e,n){const r=ta(t),i=r.Kn.get(n);return void 0!==i?sh.resolve(r.qn.get(i)):r.He.getTargetData(e,n)}(r,t,Ec(e)).next((e=>{if(e)return i=e.lastLimboFreeSnapshotVersion,r.He.getMatchingKeysForTargetId(t,e.targetId).next((t=>{s=t}))})).next((()=>r.Un.getDocumentsMatchingQuery(t,e,n?i:ma.min(),n?s:ll()))).next((t=>({documents:t,zn:s})))))}class Sh{constructor(t){this.k=t,this.Xn=new Map,this.Zn=new Map}getBundleMetadata(t,e){return sh.resolve(this.Xn.get(e))}saveBundleMetadata(t,e){var n;return this.Xn.set(e.id,{id:(n=e).id,version:n.version,createTime:_l(n.createTime)}),sh.resolve()}getNamedQuery(t,e){return sh.resolve(this.Zn.get(e))}saveNamedQuery(t,e){return this.Zn.set(e.name,function(t){return{name:t.name,query:hh(t.bundledQuery),readTime:_l(t.readTime)}}(e)),sh.resolve()}}class kh{constructor(){this.ts=new nl(Ah.es),this.ns=new nl(Ah.ss)}isEmpty(){return this.ts.isEmpty()}addReference(t,e){const n=new Ah(t,e);this.ts=this.ts.add(n),this.ns=this.ns.add(n)}rs(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.os(new Ah(t,e))}cs(t,e){t.forEach((t=>this.removeReference(t,e)))}us(t){const e=new La(new Ea([])),n=new Ah(e,t),r=new Ah(e,t+1),i=[];return this.ns.forEachInRange([n,r],(t=>{this.os(t),i.push(t.key)})),i}hs(){this.ts.forEach((t=>this.os(t)))}os(t){this.ts=this.ts.delete(t),this.ns=this.ns.delete(t)}ls(t){const e=new La(new Ea([])),n=new Ah(e,t),r=new Ah(e,t+1);let i=ll();return this.ns.forEachInRange([n,r],(t=>{i=i.add(t.key)})),i}containsKey(t){const e=new Ah(t,0),n=this.ts.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class Ah{constructor(t,e){this.key=t,this.fs=e}static es(t,e){return La.comparator(t.key,e.key)||fa(t.fs,e.fs)}static ss(t,e){return fa(t.fs,e.fs)||La.comparator(t.key,e.key)}}class Rh{constructor(t,e){this.Jt=t,this.referenceDelegate=e,this.An=[],this.ds=1,this.ws=new nl(Ah.es)}checkEmpty(t){return sh.resolve(0===this.An.length)}addMutationBatch(t,e,n,r){const i=this.ds;this.ds++,this.An.length>0&&this.An[this.An.length-1];const s=new ah(i,e,n,r);this.An.push(s);for(const e of r)this.ws=this.ws.add(new Ah(e.key,i)),this.Jt.addToCollectionParentIndex(t,e.key.path.popLast());return sh.resolve(s)}lookupMutationBatch(t,e){return sh.resolve(this._s(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,r=this.gs(n),i=r<0?0:r;return sh.resolve(this.An.length>i?this.An[i]:null)}getHighestUnacknowledgedBatchId(){return sh.resolve(0===this.An.length?-1:this.ds-1)}getAllMutationBatches(t){return sh.resolve(this.An.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new Ah(e,0),r=new Ah(e,Number.POSITIVE_INFINITY),i=[];return this.ws.forEachInRange([n,r],(t=>{const e=this._s(t.fs);i.push(e)})),sh.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new nl(fa);return e.forEach((t=>{const e=new Ah(t,0),r=new Ah(t,Number.POSITIVE_INFINITY);this.ws.forEachInRange([e,r],(t=>{n=n.add(t.fs)}))})),sh.resolve(this.ys(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,r=n.length+1;let i=n;La.isDocumentKey(i)||(i=i.child(""));const s=new Ah(new La(i),0);let o=new nl(fa);return this.ws.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(o=o.add(t.fs)),!0)}),s),sh.resolve(this.ys(o))}ys(t){const e=[];return t.forEach((t=>{const n=this._s(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){Zo(0===this.ps(e.batchId,"removed")),this.An.shift();let n=this.ws;return sh.forEach(e.mutations,(r=>{const i=new Ah(r.key,e.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)})).next((()=>{this.ws=n}))}ee(t){}containsKey(t,e){const n=new Ah(e,0),r=this.ws.firstAfterOrEqual(n);return sh.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.An.length,sh.resolve()}ps(t,e){return this.gs(t)}gs(t){return 0===this.An.length?0:t-this.An[0].batchId}_s(t){const e=this.gs(t);return e<0||e>=this.An.length?null:this.An[e]}}class Ch{constructor(t,e){this.Jt=t,this.Ts=e,this.docs=new Zc(La.comparator),this.size=0}addEntry(t,e,n){const r=e.key,i=this.docs.get(r),s=i?i.size:0,o=this.Ts(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:o,readTime:n}),this.size+=o-s,this.Jt.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return sh.resolve(n?n.document.clone():Ga.newInvalidDocument(e))}getEntries(t,e){let n=sl();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.clone():Ga.newInvalidDocument(t))})),sh.resolve(n)}getDocumentsMatchingQuery(t,e,n){let r=sl();const i=new La(e.path.child("")),s=this.docs.getIteratorFrom(i);for(;s.hasNext();){const{key:t,value:{document:i,readTime:o}}=s.getNext();if(!e.path.isPrefixOf(t.path))break;o.compareTo(n)<=0||_c(e,i)&&(r=r.insert(i.key,i.clone()))}return sh.resolve(r)}Es(t,e){return sh.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new Nh(this)}getSize(t){return sh.resolve(this.size)}}class Nh extends class{constructor(){this.changes=new mh((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}getReadTime(t){const e=this.changes.get(t);return e?e.readTime:ma.min()}addEntry(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})}removeEntry(t,e=null){this.assertNotApplied(),this.changes.set(t,{document:Ga.newInvalidDocument(t),readTime:e})}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?sh.resolve(n.document):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}{constructor(t){super(),this.De=t}applyChanges(t){const e=[];return this.changes.forEach(((n,r)=>{r.document.isValidDocument()?e.push(this.De.addEntry(t,r.document,this.getReadTime(n))):this.De.removeEntry(n)})),sh.waitFor(e)}getFromCache(t,e){return this.De.getEntry(t,e)}getAllFromCache(t,e){return this.De.getEntries(t,e)}}class Oh{constructor(t){this.persistence=t,this.Is=new mh((t=>Ya(t)),Qa),this.lastRemoteSnapshotVersion=ma.min(),this.highestTargetId=0,this.As=0,this.Rs=new kh,this.targetCount=0,this.Ps=ph.ie()}forEachTarget(t,e){return this.Is.forEach(((t,n)=>e(n))),sh.resolve()}getLastRemoteSnapshotVersion(t){return sh.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return sh.resolve(this.As)}allocateTargetId(t){return this.highestTargetId=this.Ps.next(),sh.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.As&&(this.As=e),sh.resolve()}ce(t){this.Is.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Ps=new ph(e),this.highestTargetId=e),t.sequenceNumber>this.As&&(this.As=t.sequenceNumber)}addTargetData(t,e){return this.ce(e),this.targetCount+=1,sh.resolve()}updateTargetData(t,e){return this.ce(e),sh.resolve()}removeTargetData(t,e){return this.Is.delete(e.target),this.Rs.us(e.targetId),this.targetCount-=1,sh.resolve()}removeTargets(t,e,n){let r=0;const i=[];return this.Is.forEach(((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Is.delete(s),i.push(this.removeMatchingKeysForTargetId(t,o.targetId)),r++)})),sh.waitFor(i).next((()=>r))}getTargetCount(t){return sh.resolve(this.targetCount)}getTargetData(t,e){const n=this.Is.get(e)||null;return sh.resolve(n)}addMatchingKeys(t,e,n){return this.Rs.rs(e,n),sh.resolve()}removeMatchingKeys(t,e,n){this.Rs.cs(e,n);const r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((e=>{i.push(r.markPotentiallyOrphaned(t,e))})),sh.waitFor(i)}removeMatchingKeysForTargetId(t,e){return this.Rs.us(e),sh.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Rs.ls(e);return sh.resolve(n)}containsKey(t,e){return sh.resolve(this.Rs.containsKey(e))}}class Dh{constructor(t,e){this.bs={},this.Be=new ua(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=t(this),this.He=new Oh(this),this.Jt=new uh,this.Je=function(t,e){return new Ch(t,e)}(this.Jt,(t=>this.referenceDelegate.vs(t))),this.k=new lh(e),this.Ye=new Sh(this.k)}start(){return Promise.resolve()}shutdown(){return this.Ue=!1,Promise.resolve()}get started(){return this.Ue}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Jt}getMutationQueue(t){let e=this.bs[t.toKey()];return e||(e=new Rh(this.Jt,this.referenceDelegate),this.bs[t.toKey()]=e),e}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getBundleCache(){return this.Ye}runTransaction(t,e,n){Go("MemoryPersistence","Starting transaction:",t);const r=new Lh(this.Be.next());return this.referenceDelegate.Vs(),n(r).next((t=>this.referenceDelegate.Ss(r).next((()=>t)))).toPromise().then((t=>(r.raiseOnCommittedEvent(),t)))}Ds(t,e){return sh.or(Object.values(this.bs).map((n=>()=>n.containsKey(t,e))))}}class Lh extends class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}{constructor(t){super(),this.currentSequenceNumber=t}}class Ph{constructor(t){this.persistence=t,this.Cs=new kh,this.Ns=null}static ks(t){return new Ph(t)}get xs(){if(this.Ns)return this.Ns;throw Qo()}addReference(t,e,n){return this.Cs.addReference(n,e),this.xs.delete(n.toString()),sh.resolve()}removeReference(t,e,n){return this.Cs.removeReference(n,e),this.xs.add(n.toString()),sh.resolve()}markPotentiallyOrphaned(t,e){return this.xs.add(e.toString()),sh.resolve()}removeTarget(t,e){this.Cs.us(e.targetId).forEach((t=>this.xs.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.xs.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}Vs(){this.Ns=new Set}Ss(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return sh.forEach(this.xs,(n=>{const r=La.fromPath(n);return this.$s(t,r).next((t=>{t||e.removeEntry(r)}))})).next((()=>(this.Ns=null,e.apply(t))))}updateLimboDocument(t,e){return this.$s(t,e).next((t=>{t?this.xs.delete(e.toString()):this.xs.add(e.toString())}))}vs(t){return 0}$s(t,e){return sh.or([()=>sh.resolve(this.Cs.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ds(t,e)])}}class Mh{constructor(){this.activeTargetIds=ul()}Ms(t){this.activeTargetIds=this.activeTargetIds.add(t)}Ls(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Os(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class xh{constructor(){this.pi=new Mh,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.pi.Ms(t),this.Ti[t]||"not-current"}updateQueryState(t,e,n){this.Ti[t]=e}removeLocalQueryTarget(t){this.pi.Ls(t)}isLocalQueryTarget(t){return this.pi.activeTargetIds.has(t)}clearQueryState(t){delete this.Ti[t]}getAllActiveQueryTargets(){return this.pi.activeTargetIds}isActiveQueryTarget(t){return this.pi.activeTargetIds.has(t)}start(){return this.pi=new Mh,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(){}}class Uh{Ei(t){}shutdown(){}}class Fh{constructor(){this.Ii=()=>this.Ai(),this.Ri=()=>this.Pi(),this.bi=[],this.vi()}Ei(t){this.bi.push(t)}shutdown(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}vi(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}Ai(){Go("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.bi)t(0)}Pi(){Go("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.bi)t(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Vh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Bh{constructor(t){this.Vi=t.Vi,this.Si=t.Si}Di(t){this.Ci=t}Ni(t){this.ki=t}onMessage(t){this.xi=t}close(){this.Si()}send(t){this.Vi(t)}$i(){this.Ci()}Fi(t){this.ki(t)}Oi(t){this.xi(t)}}class jh extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http";this.Mi=e+"://"+t.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Bi(t,e,n,r,i){const s=this.Ui(t,e);Go("RestConnection","Sending: ",s,n);const o={};return this.qi(o,r,i),this.Ki(t,s,o,n).then((t=>(Go("RestConnection","Received: ",t),t)),(e=>{throw Xo("RestConnection",`${t} failed with error: `,e,"url: ",s,"request:",n),e}))}ji(t,e,n,r,i){return this.Bi(t,e,n,r,i)}qi(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+zo,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}Ui(t,e){const n=Vh[t];return`${this.Mi}/v1/${e}:${n}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}Ki(t,e,n,r){return new Promise(((i,s)=>{const o=new Ho;o.listenOnce(Uo.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case xo.NO_ERROR:const e=o.getResponseJson();Go("Connection","XHR received:",JSON.stringify(e)),i(e);break;case xo.TIMEOUT:Go("Connection",'RPC "'+t+'" timed out'),s(new na(ea.DEADLINE_EXCEEDED,"Request time out"));break;case xo.HTTP_ERROR:const n=o.getStatus();if(Go("Connection",'RPC "'+t+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const t=o.getResponseJson().error;if(t&&t.status&&t.message){const e=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(ea).indexOf(e)>=0?e:ea.UNKNOWN}(t.status);s(new na(e,t.message))}else s(new na(ea.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new na(ea.UNAVAILABLE,"Connection failed."));break;default:Qo()}}finally{Go("Connection",'RPC "'+t+'" completed.')}}));const a=JSON.stringify(r);o.send(e,"POST",a,n,15)}))}Qi(t,e,n){const c=[this.Mi,"/","google.firestore.v1.Firestore","/",t,"/channel"],l=Po(),h=Mo(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(u.xmlHttpFactory=new Bo({})),this.qi(u.initMessageHeaders,e,n),i()||o()||r().indexOf("Electron/")>=0||a()||r().indexOf("MSAppHost/")>=0||s()||(u.httpHeadersOverwriteParam="$httpHeaders");const d=c.join("");Go("Connection","Creating WebChannel: "+d,u);const f=l.createWebChannel(d,u);let p=!1,g=!1;const m=new Bh({Vi:t=>{g?Go("Connection","Not sending because WebChannel is closed:",t):(p||(Go("Connection","Opening WebChannel transport."),f.open(),p=!0),Go("Connection","WebChannel sending:",t),f.send(t))},Si:()=>f.close()}),y=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return y(f,jo.EventType.OPEN,(()=>{g||Go("Connection","WebChannel transport opened.")})),y(f,jo.EventType.CLOSE,(()=>{g||(g=!0,Go("Connection","WebChannel transport closed"),m.Fi())})),y(f,jo.EventType.ERROR,(t=>{g||(g=!0,Xo("Connection","WebChannel transport errored:",t),m.Fi(new na(ea.UNAVAILABLE,"The operation could not be completed")))})),y(f,jo.EventType.MESSAGE,(t=>{var e;if(!g){const n=t.data[0];Zo(!!n);const r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){Go("Connection","WebChannel received error:",i);const t=i.status;let e=function(t){const e=Xc[t];if(void 0!==e)return Qc(e)}(t),n=i.message;void 0===e&&(e=ea.INTERNAL,n="Unknown error status: "+t+" with message "+i.message),g=!0,m.Fi(new na(e,n)),f.close()}else Go("Connection","WebChannel received:",n),m.Oi(n)}})),y(h,Fo.STAT_EVENT,(t=>{t.stat===Vo.PROXY?Go("Connection","Detected buffering proxy"):t.stat===Vo.NOPROXY&&Go("Connection","Detected no buffering proxy")})),setTimeout((()=>{m.$i()}),0),m}}function Hh(){return"undefined"!=typeof document?document:null}function qh(t){return new bl(t,!0)}class $h{constructor(t,e,n=1e3,r=1.5,i=6e4){this.Oe=t,this.timerId=e,this.Wi=n,this.Gi=r,this.zi=i,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}reset(){this.Hi=0}Xi(){this.Hi=this.zi}Zi(t){this.cancel();const e=Math.floor(this.Hi+this.tr()),n=Math.max(0,Date.now()-this.Yi),r=Math.max(0,e-n);r>0&&Go("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Hi} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.Ji=this.Oe.enqueueAfterDelay(this.timerId,r,(()=>(this.Yi=Date.now(),t()))),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}er(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}cancel(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}tr(){return(Math.random()-.5)*this.Hi}}class zh extends class{constructor(t,e,n,r,i,s,o,a){this.Oe=t,this.nr=n,this.sr=r,this.ir=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.rr=0,this.ar=null,this.cr=null,this.stream=null,this.ur=new $h(t,e)}hr(){return 1===this.state||5===this.state||this.lr()}lr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.dr()}async stop(){this.hr()&&await this.close(0)}wr(){this.state=0,this.ur.reset()}_r(){this.lr()&&null===this.ar&&(this.ar=this.Oe.enqueueAfterDelay(this.nr,6e4,(()=>this.mr())))}gr(t){this.yr(),this.stream.send(t)}async mr(){if(this.lr())return this.close(0)}yr(){this.ar&&(this.ar.cancel(),this.ar=null)}pr(){this.cr&&(this.cr.cancel(),this.cr=null)}async close(t,e){this.yr(),this.pr(),this.ur.cancel(),this.rr++,4!==t?this.ur.reset():e&&e.code===ea.RESOURCE_EXHAUSTED?(Jo(e.toString()),Jo("Using maximum backoff delay to prevent overloading the backend."),this.ur.Xi()):e&&e.code===ea.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Tr(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ni(e)}Tr(){}auth(){this.state=1;const t=this.Er(this.rr),e=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([t,n])=>{this.rr===e&&this.Ir(t,n)}),(e=>{t((()=>{const t=new na(ea.UNKNOWN,"Fetching auth token failed: "+e.message);return this.Ar(t)}))}))}Ir(t,e){const n=this.Er(this.rr);this.stream=this.Rr(t,e),this.stream.Di((()=>{n((()=>(this.state=2,this.cr=this.Oe.enqueueAfterDelay(this.sr,1e4,(()=>(this.lr()&&(this.state=3),Promise.resolve()))),this.listener.Di())))})),this.stream.Ni((t=>{n((()=>this.Ar(t)))})),this.stream.onMessage((t=>{n((()=>this.onMessage(t)))}))}dr(){this.state=5,this.ur.Zi((async()=>{this.state=0,this.start()}))}Ar(t){return Go("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Er(t){return e=>{this.Oe.enqueueAndForget((()=>this.rr===t?e():(Go("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}{constructor(t,e,n,r,i,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,r,s),this.k=i}Rr(t,e){return this.ir.Qi("Listen",t,e)}onMessage(t){this.ur.reset();const e=function(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Qo()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(t,e){return t.C?(Zo(void 0===e||"string"==typeof e),ba.fromBase64String(e||"")):(Zo(void 0===e||e instanceof Uint8Array),ba.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){const e=void 0===t.code?ea.UNKNOWN:Qc(t.code);return new na(e,t.message||"")}(o);n=new ml(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=kl(t,r.document.name),s=_l(r.document.updateTime),o=new Wa({mapValue:{fields:r.document.fields}}),a=Ga.newFoundDocument(i,s,o),c=r.targetIds||[],l=r.removedTargetIds||[];n=new pl(c,l,a.key,a)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=kl(t,r.document),s=r.readTime?_l(r.readTime):ma.min(),o=Ga.newNoDocument(i,s),a=r.removedTargetIds||[];n=new pl([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=kl(t,r.document),s=r.removedTargetIds||[];n=new pl([],s,i,null)}else{if(!("filter"in e))return Qo();{e.filter;const t=e.filter;t.targetId;const r=t.count||0,i=new Jc(r),s=t.targetId;n=new gl(s,i)}}return n}(this.k,t),n=function(t){if(!("targetChange"in t))return ma.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?ma.min():e.readTime?_l(e.readTime):ma.min()}(t);return this.listener.Pr(e,n)}br(t){const e={};e.database=Rl(this.k),e.addTarget=function(t,e){let n;const r=e.target;return n=Za(r)?{documents:Nl(t,r)}:{query:Ol(t,r)},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=function(t,e){return t.C?e.toBase64():e.toUint8Array()}(t,e.resumeToken):e.snapshotVersion.compareTo(ma.min())>0&&(n.readTime=function(t,e){return t.C?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}(t,e.snapshotVersion.toTimestamp())),n}(this.k,t);const n=function(t,e){const n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Qo()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.k,t);n&&(e.labels=n),this.gr(e)}vr(t){const e={};e.database=Rl(this.k),e.removeTarget=t,this.gr(e)}}class Kh extends class{}{constructor(t,e,n,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.ir=n,this.k=r,this.$r=!1}Fr(){if(this.$r)throw new na(ea.FAILED_PRECONDITION,"The client has already been terminated.")}Bi(t,e,n){return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,i])=>this.ir.Bi(t,e,n,r,i))).catch((t=>{throw"FirebaseError"===t.name?(t.code===ea.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new na(ea.UNKNOWN,t.toString())}))}ji(t,e,n){return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,i])=>this.ir.ji(t,e,n,r,i))).catch((t=>{throw"FirebaseError"===t.name?(t.code===ea.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new na(ea.UNKNOWN,t.toString())}))}terminate(){this.$r=!0}}class Wh{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.Or=0,this.Mr=null,this.Lr=!0}Br(){0===this.Or&&(this.Ur("Unknown"),this.Mr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.Mr=null,this.qr("Backend didn't respond within 10 seconds."),this.Ur("Offline"),Promise.resolve()))))}Kr(t){"Online"===this.state?this.Ur("Unknown"):(this.Or++,this.Or>=1&&(this.jr(),this.qr(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.Ur("Offline")))}set(t){this.jr(),this.Or=0,"Online"===t&&(this.Lr=!1),this.Ur(t)}Ur(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}qr(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Lr?(Jo(e),this.Lr=!1):Go("OnlineStateTracker",e)}jr(){null!==this.Mr&&(this.Mr.cancel(),this.Mr=null)}}class Gh{constructor(t,e,n,r,i){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=i,this.Hr.Ei((t=>{n.enqueueAndForget((async()=>{ru(this)&&(Go("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=ta(t);e.Gr.add(4),await Xh(e),e.Jr.set("Unknown"),e.Gr.delete(4),await Jh(e)}(this))}))})),this.Jr=new Wh(n,r)}}async function Jh(t){if(ru(t))for(const e of t.zr)await e(!0)}async function Xh(t){for(const e of t.zr)await e(!1)}function Yh(t,e){const n=ta(t);n.Wr.has(e.targetId)||(n.Wr.set(e.targetId,e),nu(n)?eu(n):lu(n).lr()&&Zh(n,e))}function Qh(t,e){const n=ta(t),r=lu(n);n.Wr.delete(e),r.lr()&&tu(n,e),0===n.Wr.size&&(r.lr()?r._r():ru(n)&&n.Jr.set("Unknown"))}function Zh(t,e){t.Yr.X(e.targetId),lu(t).br(e)}function tu(t,e){t.Yr.X(e),lu(t).vr(e)}function eu(t){t.Yr=new vl({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Wr.get(e)||null}),lu(t).start(),t.Jr.Br()}function nu(t){return ru(t)&&!lu(t).hr()&&t.Wr.size>0}function ru(t){return 0===ta(t).Gr.size}function iu(t){t.Yr=void 0}async function su(t){t.Wr.forEach(((e,n)=>{Zh(t,e)}))}async function ou(t,e){iu(t),nu(t)?(t.Jr.Kr(e),eu(t)):t.Jr.set("Unknown")}async function au(t,e,n){if(t.Jr.set("Online"),e instanceof ml&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const r of e.targetIds)t.Wr.has(r)&&(await t.remoteSyncer.rejectListen(r,n),t.Wr.delete(r),t.Yr.removeTarget(r))}(t,e)}catch(n){Go("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await cu(t,n)}else if(e instanceof pl?t.Yr.ot(e):e instanceof gl?t.Yr.dt(e):t.Yr.ut(e),!n.isEqual(ma.min()))try{const e=await Th(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.Yr.gt(e);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=t.Wr.get(r);i&&t.Wr.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((e=>{const n=t.Wr.get(e);if(!n)return;t.Wr.set(e,n.withResumeToken(ba.EMPTY_BYTE_STRING,n.snapshotVersion)),tu(t,e);const r=new ch(n.target,e,1,n.sequenceNumber);Zh(t,r)})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(e){Go("RemoteStore","Failed to raise snapshot:",e),await cu(t,e)}}async function cu(t,e,n){if(!oh(e))throw e;t.Gr.add(1),await Xh(t),t.Jr.set("Offline"),n||(n=()=>Th(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Go("RemoteStore","Retrying IndexedDB access"),await n(),t.Gr.delete(1),await Jh(t)}))}function lu(t){return t.Xr||(t.Xr=function(t,e,n){const r=ta(t);return r.Fr(),new zh(e,r.ir,r.authCredentials,r.appCheckCredentials,r.k,n)}(t.datastore,t.asyncQueue,{Di:su.bind(null,t),Ni:ou.bind(null,t),Pr:au.bind(null,t)}),t.zr.push((async e=>{e?(t.Xr.wr(),nu(t)?eu(t):t.Jr.set("Unknown")):(await t.Xr.stop(),iu(t))}))),t.Xr}class hu{constructor(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new ra,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}static createAndSchedule(t,e,n,r,i){const s=Date.now()+n,o=new hu(t,e,s,r,i);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new na(ea.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function uu(t,e){if(Jo("AsyncQueue",`${e}: ${t}`),oh(t))return new na(ea.UNAVAILABLE,`${e}: ${t}`);throw t}class du{constructor(t){this.comparator=t?(e,n)=>t(e,n)||La.comparator(e.key,n.key):(t,e)=>La.comparator(t.key,e.key),this.keyedMap=al(),this.sortedSet=new Zc(this.comparator)}static emptySet(t){return new du(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof du))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(!t.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new du;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class fu{constructor(){this.eo=new Zc(La.comparator)}track(t){const e=t.doc.key,n=this.eo.get(e);n?0!==t.type&&3===n.type?this.eo=this.eo.insert(e,t):3===t.type&&1!==n.type?this.eo=this.eo.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.eo=this.eo.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.eo=this.eo.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.eo=this.eo.remove(e):1===t.type&&2===n.type?this.eo=this.eo.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.eo=this.eo.insert(e,{type:2,doc:t.doc}):Qo():this.eo=this.eo.insert(e,t)}no(){const t=[];return this.eo.inorderTraversal(((e,n)=>{t.push(n)})),t}}class pu{constructor(t,e,n,r,i,s,o,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a}static fromInitialDocuments(t,e,n,r){const i=[];return e.forEach((t=>{i.push({type:0,doc:t})})),new pu(t,e,du.emptySet(e),i,n,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Ic(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t].type!==n[t].type||!e[t].doc.isEqual(n[t].doc))return!1;return!0}}class gu{constructor(){this.so=void 0,this.listeners=[]}}class mu{constructor(){this.queries=new mh((t=>Tc(t)),Ic),this.onlineState="Unknown",this.io=new Set}}function yu(t,e){const n=ta(t);let r=!1;for(const t of e){const e=t.query,i=n.queries.get(e);if(i){for(const e of i.listeners)e.oo(t)&&(r=!0);i.so=t}}r&&wu(n)}function vu(t,e,n){const r=ta(t),i=r.queries.get(e);if(i)for(const t of i.listeners)t.onError(n);r.queries.delete(e)}function wu(t){t.io.forEach((t=>{t.next()}))}class Eu{constructor(t,e,n){this.query=t,this.ao=e,this.co=!1,this.uo=null,this.onlineState="Unknown",this.options=n||{}}oo(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new pu(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let e=!1;return this.co?this.ho(t)&&(this.ao.next(t),e=!0):this.lo(t,this.onlineState)&&(this.fo(t),e=!0),this.uo=t,e}onError(t){this.ao.error(t)}ro(t){this.onlineState=t;let e=!1;return this.uo&&!this.co&&this.lo(this.uo,t)&&(this.fo(this.uo),e=!0),e}lo(t,e){if(!t.fromCache)return!0;const n="Offline"!==e;return!(this.options.wo&&n||t.docs.isEmpty()&&"Offline"!==e)}ho(t){if(t.docChanges.length>0)return!0;const e=this.uo&&this.uo.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}fo(t){t=pu.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.co=!0,this.ao.next(t)}}class Iu{constructor(t){this.key=t}}class Tu{constructor(t){this.key=t}}class bu{constructor(t,e){this.query=t,this.To=e,this.Eo=null,this.current=!1,this.Io=ll(),this.mutatedKeys=ll(),this.Ao=Sc(t),this.Ro=new du(this.Ao)}get Po(){return this.To}bo(t,e){const n=e?e.vo:new fu,r=e?e.Ro:this.Ro;let i=e?e.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a=yc(this.query)&&r.size===this.query.limit?r.last():null,c=vc(this.query)&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal(((t,e)=>{const l=r.get(t),h=_c(this.query,e)?e:null,u=!!l&&this.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let f=!1;l&&h?l.data.isEqual(h.data)?u!==d&&(n.track({type:3,doc:h}),f=!0):this.Vo(l,h)||(n.track({type:2,doc:h}),f=!0,(a&&this.Ao(h,a)>0||c&&this.Ao(h,c)<0)&&(o=!0)):!l&&h?(n.track({type:0,doc:h}),f=!0):l&&!h&&(n.track({type:1,doc:l}),f=!0,(a||c)&&(o=!0)),f&&(h?(s=s.add(h),i=d?i.add(t):i.delete(t)):(s=s.delete(t),i=i.delete(t)))})),yc(this.query)||vc(this.query))for(;s.size>this.query.limit;){const t=yc(this.query)?s.last():s.first();s=s.delete(t.key),i=i.delete(t.key),n.track({type:1,doc:t})}return{Ro:s,vo:n,Bn:o,mutatedKeys:i}}Vo(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n){const r=this.Ro;this.Ro=t.Ro,this.mutatedKeys=t.mutatedKeys;const i=t.vo.no();i.sort(((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qo()}};return n(t)-n(e)}(t.type,e.type)||this.Ao(t.doc,e.doc))),this.So(n);const s=e?this.Do():[],o=0===this.Io.size&&this.current?1:0,a=o!==this.Eo;return this.Eo=o,0!==i.length||a?{snapshot:new pu(this.query,t.Ro,r,i,t.mutatedKeys,0===o,a,!1),Co:s}:{Co:s}}ro(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new fu,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}No(t){return!this.To.has(t)&&!!this.Ro.has(t)&&!this.Ro.get(t).hasLocalMutations}So(t){t&&(t.addedDocuments.forEach((t=>this.To=this.To.add(t))),t.modifiedDocuments.forEach((t=>{})),t.removedDocuments.forEach((t=>this.To=this.To.delete(t))),this.current=t.current)}Do(){if(!this.current)return[];const t=this.Io;this.Io=ll(),this.Ro.forEach((t=>{this.No(t.key)&&(this.Io=this.Io.add(t.key))}));const e=[];return t.forEach((t=>{this.Io.has(t)||e.push(new Tu(t))})),this.Io.forEach((n=>{t.has(n)||e.push(new Iu(n))})),e}ko(t){this.To=t.zn,this.Io=ll();const e=this.bo(t.documents);return this.applyChanges(e,!0)}xo(){return pu.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}class _u{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class Su{constructor(t){this.key=t,this.$o=!1}}class ku{constructor(t,e,n,r,i,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Fo={},this.Oo=new mh((t=>Tc(t)),Ic),this.Mo=new Map,this.Lo=new Set,this.Bo=new Zc(La.comparator),this.Uo=new Map,this.qo=new kh,this.Ko={},this.jo=new Map,this.Qo=ph.re(),this.onlineState="Unknown",this.Wo=void 0}get isPrimaryClient(){return!0===this.Wo}}async function Au(t,e){const n=function(t){const e=ta(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Cu.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Vu.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ou.bind(null,e),e.Fo.Pr=yu.bind(null,e.eventManager),e.Fo.zo=vu.bind(null,e.eventManager),e}(t);let r,i;const s=n.Oo.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.xo();else{const t=await function(t,e){const n=ta(t);return n.persistence.runTransaction("Allocate target","readwrite",(t=>{let r;return n.He.getTargetData(t,e).next((i=>i?(r=i,sh.resolve(r)):n.He.allocateTargetId(t).next((i=>(r=new ch(e,i,0,t.currentSequenceNumber),n.He.addTargetData(t,r).next((()=>r)))))))})).then((t=>{const r=n.qn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.qn=n.qn.insert(t.targetId,t),n.Kn.set(e,t.targetId)),t}))}(n.localStore,Ec(e)),s=n.sharedClientState.addLocalQueryTarget(t.targetId);r=t.targetId,i=await async function(t,e,n,r){t.Go=(e,n,r)=>async function(t,e,n,r){let i=e.view.bo(n);i.Bn&&(i=await _h(t.localStore,e.query,!1).then((({documents:t})=>e.view.bo(t,i))));const s=r&&r.targetChanges.get(e.targetId),o=e.view.applyChanges(i,t.isPrimaryClient,s);return Pu(t,e.targetId,o.Co),o.snapshot}(t,e,n,r);const i=await _h(t.localStore,e,!0),s=new bu(e,i.zn),o=s.bo(i.documents),a=fl.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),c=s.applyChanges(o,t.isPrimaryClient,a);Pu(t,n,c.Co);const l=new _u(e,n,s);return t.Oo.set(e,l),t.Mo.has(n)?t.Mo.get(n).push(e):t.Mo.set(n,[e]),c.snapshot}(n,e,r,"current"===s),n.isPrimaryClient&&Yh(n.remoteStore,t)}return i}async function Ru(t,e){const n=ta(t),r=n.Oo.get(e),i=n.Mo.get(r.targetId);if(i.length>1)return n.Mo.set(r.targetId,i.filter((t=>!Ic(t,e)))),void n.Oo.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await bh(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),Qh(n.remoteStore,r.targetId),Du(n,r.targetId)})).catch(gh)):(Du(n,r.targetId),await bh(n.localStore,r.targetId,!0))}async function Cu(t,e){const n=ta(t);try{const t=await function(t,e){const n=ta(t),r=e.snapshotVersion;let i=n.qn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(t=>{const s=n.Qn.newChangeBuffer({trackRemovals:!0});i=n.qn;const o=[];e.targetChanges.forEach(((e,s)=>{const a=i.get(s);if(!a)return;o.push(n.He.removeMatchingKeys(t,e.removedDocuments,s).next((()=>n.He.addMatchingKeys(t,e.addedDocuments,s))));const c=e.resumeToken;if(c.approximateByteSize()>0){const l=a.withResumeToken(c,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(s,l),function(t,e,n){return Zo(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,l,e)&&o.push(n.He.updateTargetData(t,l))}}));let a=sl();if(e.documentUpdates.forEach(((r,i)=>{e.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),o.push(function(t,e,n,r,i){let s=ll();return n.forEach((t=>s=s.add(t))),e.getEntries(t,s).next((t=>{let s=sl();return n.forEach(((n,o)=>{const a=t.get(n),c=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(ma.min())?(e.removeEntry(n,c),s=s.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(o,c),s=s.insert(n,o)):Go("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)})),s}))}(t,s,e.documentUpdates,r,void 0).next((t=>{a=t}))),!r.isEqual(ma.min())){const e=n.He.getLastRemoteSnapshotVersion(t).next((e=>n.He.setTargetsMetadata(t,t.currentSequenceNumber,r)));o.push(e)}return sh.waitFor(o).next((()=>s.apply(t))).next((()=>n.Wn.Vn(t,a))).next((()=>a))})).then((t=>(n.qn=i,t)))}(n.localStore,e);e.targetChanges.forEach(((t,e)=>{const r=n.Uo.get(e);r&&(Zo(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.$o=!0:t.modifiedDocuments.size>0?Zo(r.$o):t.removedDocuments.size>0&&(Zo(r.$o),r.$o=!1))})),await Uu(n,t,e)}catch(t){await gh(t)}}function Nu(t,e,n){const r=ta(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const t=[];r.Oo.forEach(((n,r)=>{const i=r.view.ro(e);i.snapshot&&t.push(i.snapshot)})),function(t,e){const n=ta(t);n.onlineState=e;let r=!1;n.queries.forEach(((t,n)=>{for(const t of n.listeners)t.ro(e)&&(r=!0)})),r&&wu(n)}(r.eventManager,e),t.length&&r.Fo.Pr(t),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Ou(t,e,n){const r=ta(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Uo.get(e),s=i&&i.key;if(s){let t=new Zc(La.comparator);t=t.insert(s,Ga.newNoDocument(s,ma.min()));const n=ll().add(s),i=new dl(ma.min(),new Map,new nl(fa),t,n);await Cu(r,i),r.Bo=r.Bo.remove(s),r.Uo.delete(e),xu(r)}else await bh(r.localStore,e,!1).then((()=>Du(r,e,n))).catch(gh)}function Du(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Mo.get(e))t.Oo.delete(r),n&&t.Fo.zo(r,n);t.Mo.delete(e),t.isPrimaryClient&&t.qo.us(e).forEach((e=>{t.qo.containsKey(e)||Lu(t,e)}))}function Lu(t,e){t.Lo.delete(e.path.canonicalString());const n=t.Bo.get(e);null!==n&&(Qh(t.remoteStore,n),t.Bo=t.Bo.remove(e),t.Uo.delete(n),xu(t))}function Pu(t,e,n){for(const r of n)r instanceof Iu?(t.qo.addReference(r.key,e),Mu(t,r)):r instanceof Tu?(Go("SyncEngine","Document no longer in limbo: "+r.key),t.qo.removeReference(r.key,e),t.qo.containsKey(r.key)||Lu(t,r.key)):Qo()}function Mu(t,e){const n=e.key,r=n.path.canonicalString();t.Bo.get(n)||t.Lo.has(r)||(Go("SyncEngine","New document in limbo: "+n),t.Lo.add(r),xu(t))}function xu(t){for(;t.Lo.size>0&&t.Bo.size<t.maxConcurrentLimboResolutions;){const e=t.Lo.values().next().value;t.Lo.delete(e);const n=new La(Ea.fromString(e)),r=t.Qo.next();t.Uo.set(r,new Su(n)),t.Bo=t.Bo.insert(n,r),Yh(t.remoteStore,new ch(Ec(mc(n.path)),r,2,ua.I))}}async function Uu(t,e,n){const r=ta(t),i=[],s=[],o=[];r.Oo.isEmpty()||(r.Oo.forEach(((t,a)=>{o.push(r.Go(a,e,n).then((t=>{if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);const e=vh.$n(a.targetId,t);s.push(e)}})))})),await Promise.all(o),r.Fo.Pr(i),await async function(t,e){const n=ta(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>sh.forEach(e,(e=>sh.forEach(e.kn,(r=>n.persistence.referenceDelegate.addReference(t,e.targetId,r))).next((()=>sh.forEach(e.xn,(r=>n.persistence.referenceDelegate.removeReference(t,e.targetId,r)))))))))}catch(t){if(!oh(t))throw t;Go("LocalStore","Failed to update sequence numbers: "+t)}for(const t of e){const e=t.targetId;if(!t.fromCache){const t=n.qn.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.qn=n.qn.insert(e,i)}}}(r.localStore,s))}async function Fu(t,e){const n=ta(t);if(!n.currentUser.isEqual(e)){Go("SyncEngine","User change. New user:",e.toKey());const t=await Ih(n.localStore,e);n.currentUser=e,function(t,e){t.jo.forEach((t=>{t.forEach((t=>{t.reject(new na(ea.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.jo.clear()}(n),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await Uu(n,t.Gn)}}function Vu(t,e){const n=ta(t),r=n.Uo.get(e);if(r&&r.$o)return ll().add(r.key);{let t=ll();const r=n.Mo.get(e);if(!r)return t;for(const e of r){const r=n.Oo.get(e);t=t.unionWith(r.view.Po)}return t}}class Bu{constructor(){this.synchronizeTabs=!1}async initialize(t){this.k=qh(t.databaseInfo.databaseId),this.sharedClientState=this.Jo(t),this.persistence=this.Yo(t),await this.persistence.start(),this.gcScheduler=this.Xo(t),this.localStore=this.Zo(t)}Xo(t){return null}Zo(t){return function(t,e,n,r){return new Eh(t,e,n,r)}(this.persistence,new wh,t.initialUser,this.k)}Yo(t){return new Dh(Ph.ks,this.k)}Jo(t){return new xh}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class ju{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>Nu(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=Fu.bind(null,this.syncEngine),await async function(t,e){const n=ta(t);e?(n.Gr.delete(2),await Jh(n)):e||(n.Gr.add(2),await Xh(n),n.Jr.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new mu}createDatastore(t){const e=qh(t.databaseInfo.databaseId),n=(r=t.databaseInfo,new jh(r));var r;return function(t,e,n,r){return new Kh(t,e,n,r)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=t=>Nu(this.syncEngine,t,0),s=Fh.bt()?new Fh:new Uh,new Gh(e,n,r,i,s);var e,n,r,i,s}createSyncEngine(t,e){return function(t,e,n,r,i,s,o){const a=new ku(t,e,n,r,i,s);return o&&(a.Wo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return async function(t){const e=ta(t);Go("RemoteStore","RemoteStore shutting down."),e.Gr.add(5),await Xh(e),e.Hr.shutdown(),e.Jr.set("Unknown")}(this.remoteStore)}}class Hu{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.ea(this.observer.next,t)}error(t){this.observer.error?this.ea(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)}na(){this.muted=!0}ea(t,e){this.muted||setTimeout((()=>{this.muted||t(e)}),0)}}class qu{constructor(t,e,n,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=r,this.user=$o.UNAUTHENTICATED,this.clientId=class{static A(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let n="";for(;n.length<20;){const r=da(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length))}return n}}.A(),this.authCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async t=>{Go("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(()=>Promise.resolve()))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new na(ea.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ra;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=uu(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function $u(t,e){t.asyncQueue.verifyOperationInProgress();const n=await async function(t){return t.offlineComponents||(Go("FirestoreClient","Using default OfflineComponentProvider"),await async function(t,e){t.asyncQueue.verifyOperationInProgress(),Go("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async t=>{r.isEqual(t)||(await Ih(e.localStore,t),r=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t.offlineComponents=e}(t,new Bu)),t.offlineComponents}(t);Go("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener((t=>async function(t,e){const n=ta(t);n.asyncQueue.verifyOperationInProgress(),Go("RemoteStore","RemoteStore received new credentials");const r=ru(n);n.Gr.add(3),await Xh(n),r&&n.Jr.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Gr.delete(3),await Jh(n)}(e.remoteStore,t))),t.onlineComponents=e}async function zu(t){const e=await async function(t){return t.onlineComponents||(Go("FirestoreClient","Using default OnlineComponentProvider"),await $u(t,new ju)),t.onlineComponents}(t),n=e.eventManager;return n.onListen=Au.bind(null,e.syncEngine),n.onUnlisten=Ru.bind(null,e.syncEngine),n}class Ku{constructor(t,e,n,r,i,s,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class Wu{constructor(t,e){this.projectId=t,this.database=e||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Wu&&t.projectId===this.projectId&&t.database===this.database}}const Gu=new Map;function Ju(t){if(La.isDocumentKey(t))throw new na(ea.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Xu(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new na(ea.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=function(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":Qo()}(t);throw new na(ea.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class Yu{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new na(ea.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new na(ea.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,function(t,e,n,r){if(!0===e&&!0===r)throw new na(ea.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")}(0,t.experimentalForceLongPolling,0,t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Qu{constructor(t,e,n){this._authCredentials=e,this._appCheckCredentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yu({}),this._settingsFrozen=!1,t instanceof Wu?this._databaseId=t:(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new na(ea.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wu(t.options.projectId)}(t))}get app(){if(!this._app)throw new na(ea.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new na(ea.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yu(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new sa;switch(t.type){case"gapi":const e=t.client;return Zo(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new ca(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new na(ea.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=Gu.get(t);e&&(Go("ComponentProvider","Removing Datastore"),Gu.delete(t),e.terminate())}(this),Promise.resolve()}}class Zu{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ed(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Zu(this.firestore,t,this._key)}}class td{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new td(this.firestore,t,this._query)}}class ed extends td{constructor(t,e,n){super(t,e,mc(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Zu(this.firestore,null,new La(t))}withConverter(t){return new ed(this.firestore,t,this._path)}}class nd{constructor(){this.ma=Promise.resolve(),this.ga=[],this.ya=!1,this.pa=[],this.Ta=null,this.Ea=!1,this.Ia=!1,this.Aa=[],this.ur=new $h(this,"async_queue_retry"),this.Ra=()=>{const t=Hh();t&&Go("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ur.er()};const t=Hh();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Ra)}get isShuttingDown(){return this.ya}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pa(),this.ba(t)}enterRestrictedMode(t){if(!this.ya){this.ya=!0,this.Ia=t||!1;const e=Hh();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ra)}}enqueue(t){if(this.Pa(),this.ya)return new Promise((()=>{}));const e=new ra;return this.ba((()=>this.ya&&this.Ia?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.ga.push(t),this.va())))}async va(){if(0!==this.ga.length){try{await this.ga[0](),this.ga.shift(),this.ur.reset()}catch(t){if(!oh(t))throw t;Go("AsyncQueue","Operation failed with retryable error: "+t)}this.ga.length>0&&this.ur.Zi((()=>this.va()))}}ba(t){const e=this.ma.then((()=>(this.Ea=!0,t().catch((t=>{this.Ta=t,this.Ea=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t);throw Jo("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.Ea=!1,t))))));return this.ma=e,e}enqueueAfterDelay(t,e,n){this.Pa(),this.Aa.indexOf(t)>-1&&(e=0);const r=hu.createAndSchedule(this,t,e,n,(t=>this.Va(t)));return this.pa.push(r),r}Pa(){this.Ta&&Qo()}verifyOperationInProgress(){}async Sa(){let t;do{t=this.ma,await t}while(t!==this.ma)}Da(t){for(const e of this.pa)if(e.timerId===t)return!0;return!1}Ca(t){return this.Sa().then((()=>{this.pa.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.pa)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Sa()}))}Na(t){this.Aa.push(t)}Va(t){const e=this.pa.indexOf(t);this.pa.splice(e,1)}}function rd(t){return function(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const t of["next","error","complete"])if(t in n&&"function"==typeof n[t])return!0;return!1}(t)}class id extends Qu{constructor(t,e,n){super(t,e,n),this.type="firestore",this._queue=new nd,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||sd(this),this._firestoreClient.terminate()}}function sd(t){var e;const n=t._freezeSettings(),r=function(t,e,n,r){return new Ku(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new qu(t._authCredentials,t._appCheckCredentials,t._queue,r)}class od{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new na(ea.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ta(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class ad{constructor(t){this._byteString=t}static fromBase64String(t){try{return new ad(ba.fromBase64String(t))}catch(t){throw new na(ea.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new ad(ba.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class cd{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new na(ea.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new na(ea.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return fa(this._lat,t._lat)||fa(this._long,t._long)}}const ld=new RegExp("[~\\*/\\[\\]]");function hd(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new na(ea.INVALID_ARGUMENT,a+t+c)}class ud{constructor(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Zu(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new dd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(fd("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class dd extends ud{data(){return super.data()}}function fd(t,e){return"string"==typeof e?function(t,e,n){if(e.search(ld)>=0)throw hd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new od(...e.split("."))._internalPath}catch(r){throw hd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}(t,e):e instanceof od?e._internalPath:e._delegate._internalPath}class pd{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class gd extends ud{constructor(t,e,n,r,i,s){super(t,e,n,r,s),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new md(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(fd("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class md extends gd{data(t={}){return super.data(t)}}class yd{constructor(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new pd(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new md(this._firestore,this._userDataWriter,n.key,n,new pd(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new na(ea.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map((n=>({type:"added",doc:new md(t._firestore,t._userDataWriter,n.doc.key,n.doc,new pd(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:e++})))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((t=>e||3!==t.type)).map((e=>{const r=new md(t._firestore,t._userDataWriter,e.doc.key,e.doc,new pd(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let i=-1,s=-1;return 0!==e.type&&(i=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),s=n.indexOf(e.doc.key)),{type:vd(e.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function vd(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qo()}}class wd extends class{convertValue(t,e="none"){switch(Pa(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ka(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Aa(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Qo()}}convertObject(t,e){const n={};return va(t.fields,((t,r)=>{n[t]=this.convertValue(r,e)})),n}convertGeoPoint(t){return new cd(ka(t.latitude),ka(t.longitude))}convertArray(t,e){return(t.values||[]).map((t=>this.convertValue(t,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=Ca(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Na(t));default:return null}}convertTimestamp(t){const e=Sa(t);return new ga(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=Ea.fromString(t);Zo(Hl(n));const r=new Wu(n.get(1),n.get(3)),i=new La(n.popFirst(5));return r.isEqual(e)||Jo(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),i}}{constructor(t){super(),this.firestore=t}convertBytes(t){return new ad(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Zu(this.firestore,null,e)}}!function(t,e=!0){zo="9.6.1",H(new b("firestore",((t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=new id(r,new oa(t.getProvider("auth-internal")),new ha(t.getProvider("app-check-internal")));return n=Object.assign({useFetchStreams:e},n),i._setSettings(n),i}),"PUBLIC")),G(qo,"3.4.1",t),G(qo,"3.4.1","esm2017")}();const Ed=[];var Id;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(Id||(Id={}));const Td={debug:Id.DEBUG,verbose:Id.VERBOSE,info:Id.INFO,warn:Id.WARN,error:Id.ERROR,silent:Id.SILENT},bd=Id.INFO,_d={[Id.DEBUG]:"log",[Id.VERBOSE]:"log",[Id.INFO]:"info",[Id.WARN]:"warn",[Id.ERROR]:"error"},Sd=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=_d[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};var kd=n(676);const Ad="@firebase/installations",Rd="0.5.4",Cd="w:0.5.4",Nd=new d("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Od(t){return t instanceof u&&t.code.includes("request-failed")}function Dd({projectId:t}){return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function Ld(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}async function Pd(t,e){const n=(await e.json()).error;return Nd.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Md({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}async function xd(t){const e=await t();return e.status>=500&&e.status<600?t():e}function Ud(t){return new Promise((e=>{setTimeout(e,t)}))}const Fd=/^[cdef][\w-]{21}$/;function Vd(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const e=function(t){return(e=t,btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}(t);return Fd.test(e)?e:""}catch(t){return""}}function Bd(t){return`${t.appName}!${t.appId}`}const jd=new Map;function Hd(t,e){const n=Bd(t);qd(n,e),function(t,e){const n=(!$d&&"BroadcastChannel"in self&&($d=new BroadcastChannel("[Firebase] FID Change"),$d.onmessage=t=>{qd(t.data.key,t.data.fid)}),$d);n&&n.postMessage({key:t,fid:e}),0===jd.size&&$d&&($d.close(),$d=null)}(n,e)}function qd(t,e){const n=jd.get(t);if(n)for(const t of n)t(e)}let $d=null;const zd="firebase-installations-store";let Kd=null;function Wd(){return Kd||(Kd=(0,kd.openDb)("firebase-installations-database",1,(t=>{0===t.oldVersion&&t.createObjectStore(zd)}))),Kd}async function Gd(t,e){const n=Bd(t),r=(await Wd()).transaction(zd,"readwrite"),i=r.objectStore(zd),s=await i.get(n);return await i.put(e,n),await r.complete,s&&s.fid===e.fid||Hd(t,e.fid),e}async function Jd(t){const e=Bd(t),n=(await Wd()).transaction(zd,"readwrite");await n.objectStore(zd).delete(e),await n.complete}async function Xd(t,e){const n=Bd(t),r=(await Wd()).transaction(zd,"readwrite"),i=r.objectStore(zd),s=await i.get(n),o=e(s);return void 0===o?await i.delete(n):await i.put(o,n),await r.complete,!o||s&&s.fid===o.fid||Hd(t,o.fid),o}async function Yd(t){let e;const n=await Xd(t,(n=>{const r=function(t){return tf(t||{fid:Vd(),registrationStatus:0})}(n),i=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Nd.create("app-offline"))};const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(t,e){try{const n=await async function(t,{fid:e}){const n=Dd(t),r=Md(t),i={fid:e,authVersion:"FIS_v2",appId:t.appId,sdkVersion:Cd},s={method:"POST",headers:r,body:JSON.stringify(i)},o=await xd((()=>fetch(n,s)));if(o.ok){const t=await o.json();return{fid:t.fid||e,registrationStatus:2,refreshToken:t.refreshToken,authToken:Ld(t.authToken)}}throw await Pd("Create Installation",o)}(t,e);return Gd(t,n)}catch(n){throw Od(n)&&409===n.customData.serverCode?await Jd(t):await Gd(t,{fid:e.fid,registrationStatus:0}),n}}(t,n);return{installationEntry:n,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Qd(t)}:{installationEntry:e}}(t,r);return e=i.registrationPromise,i.installationEntry}));return""===n.fid?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}async function Qd(t){let e=await Zd(t);for(;1===e.registrationStatus;)await Ud(100),e=await Zd(t);if(0===e.registrationStatus){const{installationEntry:e,registrationPromise:n}=await Yd(t);return n||e}return e}function Zd(t){return Xd(t,(t=>{if(!t)throw Nd.create("installation-not-found");return tf(t)}))}function tf(t){return 1===(e=t).registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}async function ef({appConfig:t,platformLoggerProvider:e},n){const r=function(t,{fid:e}){return`${Dd(t)}/${e}/authTokens:generate`}(t,n),i=function(t,{refreshToken:e}){const n=Md(t);return n.append("Authorization",function(t){return`FIS_v2 ${t}`}(e)),n}(t,n),s=e.getImmediate({optional:!0});s&&i.append("x-firebase-client",s.getPlatformInfoString());const o={installation:{sdkVersion:Cd}},a={method:"POST",headers:i,body:JSON.stringify(o)},c=await xd((()=>fetch(r,a)));if(c.ok)return Ld(await c.json());throw await Pd("Generate Auth Token",c)}async function nf(t,e=!1){let n;const r=await Xd(t.appConfig,(r=>{if(!sf(r))throw Nd.create("not-registered");const i=r.authToken;if(!e&&(2===(s=i).requestStatus&&!function(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(s)))return r;var s;if(1===i.requestStatus)return n=async function(t,e){let n=await rf(t.appConfig);for(;1===n.authToken.requestStatus;)await Ud(100),n=await rf(t.appConfig);const r=n.authToken;return 0===r.requestStatus?nf(t,e):r}(t,e),r;{if(!navigator.onLine)throw Nd.create("app-offline");const e=function(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}(r);return n=async function(t,e){try{const n=await ef(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Gd(t.appConfig,r),n}catch(n){if(!Od(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Gd(t.appConfig,n)}else await Jd(t.appConfig);throw n}}(t,e),e}}));return n?await n:r.authToken}function rf(t){return Xd(t,(t=>{if(!sf(t))throw Nd.create("not-registered");return 1===(e=t.authToken).requestStatus&&e.requestTime+1e4<Date.now()?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t;var e}))}function sf(t){return void 0!==t&&2===t.registrationStatus}function of(t){return Nd.create("missing-app-config-values",{valueName:t})}const af="installations";H(new b(af,(t=>{const e=t.getProvider("app").getImmediate(),n=function(t){if(!t||!t.options)throw of("App Configuration");if(!t.name)throw of("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw of(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e);return{app:e,appConfig:n,platformLoggerProvider:q(e,"platform-logger"),_delete:()=>Promise.resolve()}}),"PUBLIC")),H(new b("installations-internal",(t=>{const e=q(t.getProvider("app").getImmediate(),af).getImmediate();return{getId:()=>async function(t){const e=t,{installationEntry:n,registrationPromise:r}=await Yd(e.appConfig);return r?r.catch(console.error):nf(e).catch(console.error),n.fid}(e),getToken:t=>async function(t,e=!1){const n=t;return await async function(t){const{registrationPromise:e}=await Yd(t);e&&await e}(n.appConfig),(await nf(n,e)).token}(e,t)}}),"PRIVATE")),G(Ad,Rd),G(Ad,Rd,"esm2017");const cf="@firebase/performance",lf="0.5.4",hf=lf,uf="FB-PERF-TRACE-MEASURE",df="_wt_",ff="_fcp",pf="_fid",gf="@firebase/performance/config",mf="@firebase/performance/configexpire",yf="Performance",vf=new d("performance",yf,{"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."}),wf=new class{constructor(t){this.name=t,this._logLevel=bd,this._logHandler=Sd,this._userLogHandler=null,Ed.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Id))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?Td[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Id.DEBUG,...t),this._logHandler(this,Id.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Id.VERBOSE,...t),this._logHandler(this,Id.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Id.INFO,...t),this._logHandler(this,Id.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Id.WARN,...t),this._logHandler(this,Id.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Id.ERROR,...t),this._logHandler(this,Id.ERROR,...t)}}(yf);let Ef,If,Tf,bf;wf.logLevel=Id.INFO;class _f{constructor(t){if(this.window=t,!t)throw vf.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}getUrl(){return this.windowLocation.href.split("?")[0]}mark(t){this.performance&&this.performance.mark&&this.performance.mark(t)}measure(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)}getEntriesByType(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]}getEntriesByName(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return fetch&&Promise&&h()?!!c()||(wf.info("IndexedDB is not supported by current browswer"),!1):(wf.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)}setupObserver(t,e){this.PerformanceObserver&&new this.PerformanceObserver((t=>{for(const n of t.getEntries())e(n)})).observe({entryTypes:[t]})}static getInstance(){return void 0===Ef&&(Ef=new _f(If)),Ef}}function Sf(){return Tf}function kf(t,e){const n=t.length-e.length;if(n<0||n>1)throw vf.create("invalid String merger input");const r=[];for(let n=0;n<t.length;n++)r.push(t.charAt(n)),e.length>n&&r.push(e.charAt(n));return r.join("")}class Af{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=kf("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=kf("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return void 0===bf&&(bf=new Af),bf}}var Rf;!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN"}(Rf||(Rf={}));const Cf=["firebase_","google_","ga_"],Nf=new RegExp("^[a-zA-Z]\\w*$");function Of(){const t=_f.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function Df(){switch(_f.getInstance().document.visibilityState){case"visible":return Rf.VISIBLE;case"hidden":return Rf.HIDDEN;default:return Rf.UNKNOWN}}function Lf(){const t=_f.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function Pf(t){var e;const n=null===(e=t.options)||void 0===e?void 0:e.appId;if(!n)throw vf.create("no app id");return n}const Mf="Could not fetch config, will use default configs";function xf(t){if(!t)return t;const e=Af.getInstance(),n=t.entries||{};return void 0!==n.fpr_enabled?e.loggingEnabled="true"===String(n.fpr_enabled):e.loggingEnabled=true,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=Uf(e.tracesSamplingRate),e.logNetworkAfterSampling=Uf(e.networkRequestsSamplingRate),t}function Uf(t){return Math.random()<=t}let Ff,Vf=1;function Bf(t){return Vf=2,Ff=Ff||function(t){return function(){const t=_f.getInstance().document;return new Promise((e=>{if(t&&"complete"!==t.readyState){const n=()=>{"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()}))}().then((()=>function(t){const e=t.getId();return e.then((t=>{Tf=t})),e}(t.installations))).then((e=>function(t,e){const n=function(){const t=_f.getInstance().localStorage;if(!t)return;const e=t.getItem(mf);if(!(e&&(n=e,Number(n)>Date.now())))return;var n;const r=t.getItem(gf);if(r)try{return JSON.parse(r)}catch(t){return}}();return n?(xf(n),Promise.resolve()):function(t,e){return function(t){const e=t.getToken();return e.then((t=>{})),e}(t.installations).then((n=>{const r=function(t){var e;const n=null===(e=t.options)||void 0===e?void 0:e.projectId;if(!n)throw vf.create("no project id");return n}(t.app),i=function(t){var e;const n=null===(e=t.options)||void 0===e?void 0:e.apiKey;if(!n)throw vf.create("no api key");return n}(t.app),s=new Request(`https://firebaseremoteconfig.googleapis.com/v1/projects/${r}/namespaces/fireperf:fetch?key=${i}`,{method:"POST",headers:{Authorization:`FIREBASE_INSTALLATIONS_AUTH ${n}`},body:JSON.stringify({app_instance_id:e,app_instance_id_token:n,app_id:Pf(t.app),app_version:hf,sdk_version:"0.0.1"})});return fetch(s).then((t=>{if(t.ok)return t.json();throw vf.create("RC response not ok")}))})).catch((()=>{wf.info(Mf)}))}(t,e).then(xf).then((t=>function(t){const e=_f.getInstance().localStorage;t&&e&&(e.setItem(gf,JSON.stringify(t)),e.setItem(mf,String(Date.now()+60*Af.getInstance().configTimeToLive*60*1e3)))}(t)),(()=>{}))}(t,e))).then((()=>jf()),(()=>jf()))}(t),Ff}function jf(){Vf=3}const Hf=1e4;let qf,$f=3,zf=[],Kf=!1;function Wf(t){setTimeout((()=>{if(0!==$f)return zf.length?void function(){const t=zf.splice(0,1e3),e=t.map((t=>({source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)})));(function(t,e){return function(t){const e=Af.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then((t=>(t.ok||wf.info("Call to Firebase backend failed."),t.json()))).then((t=>{const n=Number(t.nextRequestWaitMillis);let r=Hf;isNaN(n)||(r=Math.max(n,r));const i=t.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(zf=[...e,...zf],wf.info("Retry transport request later.")),$f=3,Wf(r)}))})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:Af.getInstance().logSource,log_event:e},t).catch((()=>{zf=[...t,...zf],$f--,wf.info(`Tries left: ${$f}.`),Wf(Hf)}))}():Wf(Hf)}),t)}function Gf(t,e){qf||(qf=function(t){return(...e)=>{!function(t){if(!t.eventTime||!t.message)throw vf.create("invalid cc log");zf=[...zf,t]}({message:t(...e),eventTime:Date.now()})}}(Yf)),qf(t,e)}function Jf(t){const e=Af.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&_f.getInstance().requiredApisAvailable()&&(t.isAuto&&Df()!==Rf.VISIBLE||(3===Vf?Xf(t):Bf(t.performanceController).then((()=>Xf(t)),(()=>Xf(t)))))}function Xf(t){if(!Sf())return;const e=Af.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout((()=>Gf(t,1)),0)}function Yf(t,e){return 0===e?function(t){const e={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},n={application_info:Qf(t.performanceController.app),network_request_metric:e};return JSON.stringify(n)}(t):function(t){const e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);const n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);const r={application_info:Qf(t.performanceController.app),trace_metric:e};return JSON.stringify(r)}(t)}function Qf(t){return{google_app_id:Pf(t),app_instance_id:Sf(),web_app_info:{sdk_version:hf,page_url:_f.getInstance().getUrl(),service_worker_status:Of(),visibility_state:Df(),effective_connection_type:Lf()},application_process_state:0}}const Zf=["_fp",ff,pf];class tp{constructor(t,e,n=!1,r){this.performanceController=t,this.name=e,this.isAuto=n,this.state=1,this.customAttributes={},this.counters={},this.api=_f.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark=`FB-PERF-TRACE-START-${this.randomId}-${this.name}`,this.traceStopMark=`FB-PERF-TRACE-STOP-${this.randomId}-${this.name}`,this.traceMeasure=r||`FB-PERF-TRACE-MEASURE-${this.randomId}-${this.name}`,r&&this.calculateTraceMetrics())}start(){if(1!==this.state)throw vf.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(2!==this.state)throw vf.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Jf(this)}record(t,e,n){if(t<=0)throw vf.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw vf.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=Object.assign({},n.attributes)),n&&n.metrics)for(const t of Object.keys(n.metrics))isNaN(Number(n.metrics[t]))||(this.counters[t]=Number(Math.floor(n.metrics[t])));Jf(this)}incrementMetric(t,e=1){void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)}putMetric(t,e){if(n=t,r=this.name,0===n.length||n.length>100||!(r&&r.startsWith(df)&&Zf.indexOf(n)>-1)&&n.startsWith("_"))throw vf.create("invalid custom metric name",{customMetricName:t});var n,r;this.counters[t]=function(t){const e=Math.floor(t);return e<t&&wf.info(`Metric value should be an Integer, setting the value as : ${e}.`),e}(e)}getMetric(t){return this.counters[t]||0}putAttribute(t,e){const n=!(0===(r=t).length||r.length>40||Cf.some((t=>r.startsWith(t)))||!r.match(Nf));var r;const i=function(t){return 0!==t.length&&t.length<=100}(e);if(n&&i)this.customAttributes[t]=e;else{if(!n)throw vf.create("invalid attribute name",{attributeName:t});if(!i)throw vf.create("invalid attribute value",{attributeValue:e})}}getAttribute(t){return this.customAttributes[t]}removeAttribute(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(t){this.startTimeUs=t}setDuration(t){this.durationUs=t}calculateTraceMetrics(){const t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))}static createOobTrace(t,e,n,r){const i=_f.getInstance().getUrl();if(!i)return;const s=new tp(t,df+i,!0),o=Math.floor(1e3*_f.getInstance().getTimeOrigin());if(s.setStartTime(o),e&&e[0]&&(s.setDuration(Math.floor(1e3*e[0].duration)),s.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),s.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),s.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd))),n){const t=n.find((t=>"first-paint"===t.name));t&&t.startTime&&s.putMetric("_fp",Math.floor(1e3*t.startTime));const e=n.find((t=>"first-contentful-paint"===t.name));e&&e.startTime&&s.putMetric(ff,Math.floor(1e3*e.startTime)),r&&s.putMetric(pf,Math.floor(1e3*r))}Jf(s)}static createUserTimingTrace(t,e){Jf(new tp(t,e,!1,e))}}function ep(t,e){const n=e;if(!n||void 0===n.responseStart)return;const r=_f.getInstance().getTimeOrigin(),i=Math.floor(1e3*(n.startTime+r)),s=n.responseStart?Math.floor(1e3*(n.responseStart-n.startTime)):void 0,o=Math.floor(1e3*(n.responseEnd-n.startTime));!function(t){const e=Af.getInstance();if(!e.instrumentationEnabled)return;const n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout((()=>Gf(t,0)),0)}({performanceController:t,url:n.name&&n.name.split("?")[0],responsePayloadBytes:n.transferSize,startTimeUs:i,timeToResponseInitiatedUs:s,timeToResponseCompletedUs:o})}function np(t){Sf()&&(setTimeout((()=>function(t){const e=_f.getInstance(),n=e.getEntriesByType("navigation"),r=e.getEntriesByType("paint");if(e.onFirstInputDelay){let i=setTimeout((()=>{tp.createOobTrace(t,n,r),i=void 0}),5e3);e.onFirstInputDelay((e=>{i&&(clearTimeout(i),tp.createOobTrace(t,n,r,e))}))}else tp.createOobTrace(t,n,r)}(t)),0),setTimeout((()=>function(t){const e=_f.getInstance(),n=e.getEntriesByType("resource");for(const e of n)ep(t,e);e.setupObserver("resource",(e=>ep(t,e)))}(t)),0),setTimeout((()=>function(t){const e=_f.getInstance(),n=e.getEntriesByType("measure");for(const e of n)rp(t,e);e.setupObserver("measure",(e=>rp(t,e)))}(t)),0))}function rp(t,e){const n=e.name;n.substring(0,uf.length)!==uf&&tp.createUserTimingTrace(t,n)}class ip{constructor(t,e){this.app=t,this.installations=e,this.initialized=!1}_init(t){this.initialized||(void 0!==(null==t?void 0:t.dataCollectionEnabled)&&(this.dataCollectionEnabled=t.dataCollectionEnabled),void 0!==(null==t?void 0:t.instrumentationEnabled)&&(this.instrumentationEnabled=t.instrumentationEnabled),_f.getInstance().requiredApisAvailable()?l().then((t=>{t&&(Kf||(Wf(5500),Kf=!0),Bf(this).then((()=>np(this)),(()=>np(this))),this.initialized=!0)})).catch((t=>{wf.info(`Environment doesn't support IndexedDB: ${t}`)})):wf.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(t){Af.getInstance().instrumentationEnabled=t}get instrumentationEnabled(){return Af.getInstance().instrumentationEnabled}set dataCollectionEnabled(t){Af.getInstance().dataCollectionEnabled=t}get dataCollectionEnabled(){return Af.getInstance().dataCollectionEnabled}}H(new b("performance",((t,{options:e})=>{const n=t.getProvider("app").getImmediate(),r=t.getProvider("installations-internal").getImmediate();if("[DEFAULT]"!==n.name)throw vf.create("FB not default");if("undefined"==typeof window)throw vf.create("no window");!function(t){If=t}(window);const i=new ip(n,r);return i._init(e),i}),"PUBLIC")),G(cf,lf),G(cf,lf,"esm2017");const sp=[];var op;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(op||(op={}));const ap={debug:op.DEBUG,verbose:op.VERBOSE,info:op.INFO,warn:op.WARN,error:op.ERROR,silent:op.SILENT},cp=op.INFO,lp={[op.DEBUG]:"log",[op.VERBOSE]:"log",[op.INFO]:"info",[op.WARN]:"warn",[op.ERROR]:"error"},hp=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=lp[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)},up="analytics",dp="https://www.googletagmanager.com/gtag/js",fp=new class{constructor(t){this.name=t,this._logLevel=cp,this._logHandler=hp,this._userLogHandler=null,sp.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in op))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?ap[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,op.DEBUG,...t),this._logHandler(this,op.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,op.VERBOSE,...t),this._logHandler(this,op.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,op.INFO,...t),this._logHandler(this,op.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,op.WARN,...t),this._logHandler(this,op.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,op.ERROR,...t),this._logHandler(this,op.ERROR,...t)}}("@firebase/analytics");function pp(t){return Promise.all(t.map((t=>t.catch((t=>t)))))}const gp=new d("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),mp=new class{constructor(t={},e=1e3){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}};function yp(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function vp(t,e=mp,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw gp.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw gp.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Ep;return setTimeout((async()=>{a.abort()}),void 0!==n?n:6e4),wp({appId:r,apiKey:i,measurementId:s},o,a,e)}async function wp(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=mp){const{appId:s,measurementId:o}=t;try{await function(t,e){return new Promise(((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener((()=>{clearTimeout(s),r(gp.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}(r,e)}catch(t){if(o)return fp.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${t.message}]`),{appId:s,measurementId:o};throw t}try{const e=await async function(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:yp(r)},s="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),o=await fetch(s,i);if(200!==o.status&&304!==o.status){let t="";try{const n=await o.json();(null===(e=n.error)||void 0===e?void 0:e.message)&&(t=n.error.message)}catch(t){}throw gp.create("config-fetch-failed",{httpStatus:o.status,responseMessage:t})}return o.json()}(t);return i.deleteThrottleMetadata(s),e}catch(e){if(!function(t){if(!(t instanceof u&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(e)){if(i.deleteThrottleMetadata(s),o)return fp.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${e.message}]`),{appId:s,measurementId:o};throw e}const a=503===Number(e.customData.httpStatus)?I(n,i.intervalMillis,30):I(n,i.intervalMillis),c={throttleEndTimeMillis:Date.now()+a,backoffCount:n+1};return i.setThrottleMetadata(s,c),fp.debug(`Calling attemptFetch again in ${a} millis`),wp(t,c,r,i)}}class Ep{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach((t=>t()))}}class Ip{constructor(t){this.app=t}_delete(){return delete Tp[this.app.options.appId],Promise.resolve()}}let Tp={},bp=[];const _p={};let Sp,kp,Ap="dataLayer",Rp=!1;function Cp(t,e,n){!function(){const t=[];if(s()&&t.push("This is a browser extension environment."),h()||t.push("Cookies are not available."),t.length>0){const e=t.map(((t,e)=>`(${e+1}) ${t}`)).join(" "),n=gp.create("invalid-analytics-context",{errorInfo:e});fp.warn(n.message)}}();const r=t.options.appId;if(!r)throw gp.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw gp.create("no-api-key");fp.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Tp[r])throw gp.create("already-exists",{id:r});if(!Rp){!function(t){let e=[];Array.isArray(window.dataLayer)?e=window.dataLayer:window.dataLayer=e}();const{wrappedGtag:t,gtagCore:e}=function(t,e,n,r,i){let s=function(...t){window.dataLayer.push(arguments)};return window.gtag&&"function"==typeof window.gtag&&(s=window.gtag),window.gtag=function(t,e,n,r){return async function(i,s,o){try{"event"===i?await async function(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let t=i.send_to;Array.isArray(t)||(t=[t]);const r=await pp(n);for(const n of t){const t=r.find((t=>t.measurementId===n)),i=t&&e[t.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(t){fp.error(t)}}(t,e,n,s,o):"config"===i?await async function(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const t=(await pp(n)).find((t=>t.measurementId===i));t&&await e[t.appId]}}catch(t){fp.error(t)}t("config",i,s)}(t,e,n,r,s,o):t("set",s)}catch(t){fp.error(t)}}}(s,t,e,n),{gtagCore:s,wrappedGtag:window.gtag}}(Tp,bp,_p);kp=t,Sp=e,Rp=!0}return Tp[r]=async function(t,e,n,r,i,s,o){var a;const h=vp(t);h.then((e=>{n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&fp.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${e.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((t=>fp.error(t))),e.push(h);const u=async function(){if(!c())return fp.warn(gp.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await l()}catch(t){return fp.warn(gp.create("indexeddb-unavailable",{errorInfo:t}).message),!1}return!0}().then((t=>t?r.getId():void 0)),[d,f]=await Promise.all([h,u]);(function(){const t=window.document.getElementsByTagName("script");for(const e of Object.values(t))if(e.src&&e.src.includes(dp))return e;return null})()||function(t,e){const n=document.createElement("script");n.src=`${dp}?l=${t}&id=${e}`,n.async=!0,document.head.appendChild(n)}(s,d.measurementId),i("js",new Date);const p=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return p.origin="firebase",p.update=!0,null!=f&&(p.firebase_id=f),i("config",d.measurementId,p),d.measurementId}(t,bp,_p,e,Sp,Ap,n),new Ip(t)}const Np="@firebase/analytics",Op="0.7.4";H(new b(up,((t,{options:e})=>Cp(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),e)),"PUBLIC")),H(new b("analytics-internal",(function(t){try{const e=t.getProvider(up).getImmediate();return{logEvent:(t,n,r)=>function(t,e,n,r){t=T(t),async function(t,e,n,r,i){if(i&&i.global)t("event",n,r);else{const i=await e;t("event",n,Object.assign(Object.assign({},r),{send_to:i}))}}(kp,Tp[t.app.options.appId],e,n,r).catch((t=>fp.error(t)))}(e,t,n,r)}}catch(t){throw gp.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),G(Np,Op),G(Np,Op,"esm2017");const Dp=[];var Lp;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(Lp||(Lp={}));const Pp={debug:Lp.DEBUG,verbose:Lp.VERBOSE,info:Lp.INFO,warn:Lp.WARN,error:Lp.ERROR,silent:Lp.SILENT},Mp=Lp.INFO,xp={[Lp.DEBUG]:"log",[Lp.VERBOSE]:"log",[Lp.INFO]:"info",[Lp.WARN]:"warn",[Lp.ERROR]:"error"},Up=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=xp[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)},Fp=new Map,Vp={activated:!1,tokenObservers:[]},Bp={initialized:!1,enabled:!1};function jp(t){return Fp.get(t)||Vp}function Hp(t,e){Fp.set(t,e)}function qp(){return Bp}const $p="https://content-firebaseappcheck.googleapis.com/v1beta";class zp{constructor(t,e,n,r,i){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch((()=>{}))}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new e,await function(t){return new Promise((e=>{setTimeout(e,t)}))}(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new e,await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch((()=>{}))}catch(t){this.retryPolicy(t)?this.process(!1).catch((()=>{})):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Kp=new d("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Wp(t=!1){var e;return t?null===(e=self.grecaptcha)||void 0===e?void 0:e.enterprise:self.grecaptcha}function Gp(t){if(!jp(t).activated)throw Kp.create("use-before-activation",{appName:t.name})}function Jp(t){const e=Math.round(t/1e3),n=Math.floor(e/86400),r=Math.floor((e-3600*n*24)/3600),i=Math.floor((e-3600*n*24-3600*r)/60),s=e-3600*n*24-3600*r-60*i;let o="";return n&&(o+=Xp(n)+"d:"),r&&(o+=Xp(r)+"h:"),o+=Xp(i)+"m:"+Xp(s)+"s",o}function Xp(t){return 0===t?"00":t>=10?t.toString():"0"+t}async function Yp({url:t,body:e},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});i&&(r["X-Firebase-Client"]=i.getPlatformInfoString());const s={method:"POST",body:JSON.stringify(e),headers:r};let o,a;try{o=await fetch(t,s)}catch(t){throw Kp.create("fetch-network-error",{originalErrorMessage:t.message})}if(200!==o.status)throw Kp.create("fetch-status-error",{httpStatus:o.status});try{a=await o.json()}catch(t){throw Kp.create("fetch-parse-error",{originalErrorMessage:t.message})}const c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw Kp.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=1e3*Number(c[1]),h=Date.now();return{token:a.attestationToken,expireTimeMillis:h+l,issuedAtTimeMillis:h}}const Qp="firebase-app-check-store",Zp="debug-token";let tg=null;function eg(){return tg||(tg=new Promise(((t,e)=>{try{const n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=e=>{t(e.target.result)},n.onerror=t=>{var n;e(Kp.create("storage-open",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=t=>{const e=t.target.result;0===t.oldVersion&&e.createObjectStore(Qp,{keyPath:"compositeKey"})}}catch(t){e(Kp.create("storage-open",{originalErrorMessage:t.message}))}})),tg)}async function ng(t,e){const n=(await eg()).transaction(Qp,"readwrite"),r=n.objectStore(Qp).put({compositeKey:t,value:e});return new Promise(((t,e)=>{r.onsuccess=e=>{t()},n.onerror=t=>{var n;e(Kp.create("storage-set",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}}))}async function rg(t){const e=(await eg()).transaction(Qp,"readonly"),n=e.objectStore(Qp).get(t);return new Promise(((t,r)=>{n.onsuccess=e=>{const n=e.target.result;t(n?n.value:void 0)},e.onerror=t=>{var e;r(Kp.create("storage-get",{originalErrorMessage:null===(e=t.target.error)||void 0===e?void 0:e.message}))}}))}function ig(t){return`${t.options.appId}-${t.name}`}const sg=new class{constructor(t){this.name=t,this._logLevel=Mp,this._logHandler=Up,this._userLogHandler=null,Dp.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Lp))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?Pp[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Lp.DEBUG,...t),this._logHandler(this,Lp.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Lp.VERBOSE,...t),this._logHandler(this,Lp.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Lp.INFO,...t),this._logHandler(this,Lp.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Lp.WARN,...t),this._logHandler(this,Lp.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Lp.ERROR,...t),this._logHandler(this,Lp.ERROR,...t)}}("@firebase/app-check");function og(t,e){return c()?function(t,e){return ng(ig(t),e)}(t,e).catch((t=>{sg.warn(`Failed to write token to IndexedDB. Error: ${t}`)})):Promise.resolve()}function ag(){return qp().enabled}async function cg(){const t=qp();if(t.enabled&&t.token)return t.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}function lg(){const t=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("Unable to locate global object.")}(),r=qp();if(r.initialized=!0,"string"!=typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN&&!0!==t.FIREBASE_APPCHECK_DEBUG_TOKEN)return;r.enabled=!0;const i=new e;r.token=i,"string"==typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN?i.resolve(t.FIREBASE_APPCHECK_DEBUG_TOKEN):i.resolve(async function(){let t;try{t=await rg(Zp)}catch(t){}if(t)return t;{const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}));return(e=t,ng(Zp,e)).catch((t=>sg.warn(`Failed to persist debug token to IndexedDB. Error: ${t}`))),t}var e}())}const hg={error:"UNKNOWN_ERROR"};async function ug(e,n=!1){const r=e.app;Gp(r);const i=jp(r);let s,o=i.token;if(!o){const t=await i.cachedTokenPromise;t&&mg(t)&&(o=t)}if(!n&&o&&mg(o))return{token:o.token};let a,c=!1;if(ag()){i.exchangeTokenPromise||(i.exchangeTokenPromise=Yp(function(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${$p}/projects/${n}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}(r,await cg()),e.platformLoggerProvider).then((t=>(i.exchangeTokenPromise=void 0,t))),c=!0);const t=await i.exchangeTokenPromise;return await og(r,t),Hp(r,Object.assign(Object.assign({},i),{token:t})),{token:t.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().then((t=>(i.exchangeTokenPromise=void 0,t))),c=!0),o=await i.exchangeTokenPromise}catch(t){"appCheck/throttled"===t.code?sg.warn(t.message):sg.error(t),s=t}return o?(a={token:o.token},Hp(r,Object.assign(Object.assign({},i),{token:o})),await og(r,o)):a=function(e){return{token:(n=hg,t.encodeString(JSON.stringify(n),!1)),error:e};var n}(s),c&&gg(r,a),a}function dg(t,e,n,r){const{app:i}=t,s=jp(i),o={next:n,error:r,type:e};if(Hp(i,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,o]})),s.token&&mg(s.token)){const e=s.token;Promise.resolve().then((()=>{n({token:e.token}),pg(t)})).catch((()=>{}))}s.cachedTokenPromise.then((()=>pg(t)))}function fg(t,e){const n=jp(t),r=n.tokenObservers.filter((t=>t.next!==e));0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),Hp(t,Object.assign(Object.assign({},n),{tokenObservers:r}))}function pg(t){const{app:e}=t,n=jp(e);let r=n.tokenRefresher;r||(r=function(t){const{app:e}=t;return new zp((async()=>{let n;if(n=jp(e).token?await ug(t,!0):await ug(t),n.error)throw n.error}),(()=>!0),(()=>{const t=jp(e);if(t.token){let e=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;const n=t.token.expireTimeMillis-3e5;return e=Math.min(e,n),Math.max(0,e-Date.now())}return 0}),3e4,96e4)}(t),Hp(e,Object.assign(Object.assign({},n),{tokenRefresher:r}))),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function gg(t,e){const n=jp(t).tokenObservers;for(const t of n)try{"EXTERNAL"===t.type&&null!=e.error?t.error(e.error):t.next(e)}catch(t){}}function mg(t){return t.expireTimeMillis-Date.now()>0}class yg{constructor(t,e){this.app=t,this.platformLoggerProvider=e}_delete(){const{tokenObservers:t}=jp(this.app);for(const e of t)fg(this.app,e.next);return Promise.resolve()}}function vg(t,n){const r=jp(t),i=new e;Hp(t,Object.assign(Object.assign({},r),{reCAPTCHAState:{initialized:i}}));const s=function(t){const e=`fire_app_check_${t.name}`,n=document.createElement("div");return n.id=e,n.style.display="none",document.body.appendChild(n),e}(t),o=Wp(!1);return o?wg(t,n,o,s,i):function(e){const r=document.createElement("script");r.src="https://www.google.com/recaptcha/api.js",r.onload=()=>{const e=Wp(!1);if(!e)throw new Error("no recaptcha");wg(t,n,e,s,i)},document.head.appendChild(r)}(),i.promise}function wg(t,e,n,r,i){n.ready((()=>{!function(t,e,n,r){const i=n.render(r,{sitekey:e,size:"invisible"}),s=jp(t);Hp(t,Object.assign(Object.assign({},s),{reCAPTCHAState:Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}))}(t,e,n,r),i.resolve(n)}))}class Eg{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t;!function(t){if(t&&Date.now()-t.allowRequestsAfter<=0)throw Kp.create("throttled",{time:Jp(t.allowRequestsAfter-Date.now()),httpStatus:t.httpStatus})}(this._throttleData);const e=await async function(t){Gp(t);const e=jp(t).reCAPTCHAState,n=await e.initialized.promise;return new Promise(((e,r)=>{const i=jp(t).reCAPTCHAState;n.ready((()=>{e(n.execute(i.widgetId,{action:"fire_app_check"}))}))}))}(this._app).catch((t=>{throw Kp.create("recaptcha-error")}));let n;try{n=await Yp(function(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${$p}/projects/${n}/apps/${r}:exchangeRecaptchaToken?key=${i}`,body:{recaptcha_token:e}}}(this._app,e),this._platformLoggerProvider)}catch(e){throw"fetch-status-error"===e.code?(this._throttleData=function(t,e){if(404===t||403===t)return{backoffCount:1,allowRequestsAfter:Date.now()+864e5,httpStatus:t};{const n=e?e.backoffCount:0,r=I(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:t}}}(Number(null===(t=e.customData)||void 0===t?void 0:t.httpStatus),this._throttleData),Kp.create("throttled",{time:Jp(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):e}return this._throttleData=null,n}initialize(t){this._app=t,this._platformLoggerProvider=q(t,"platform-logger"),vg(t,this._siteKey).catch((()=>{}))}isEqual(t){return t instanceof Eg&&this._siteKey===t._siteKey}}const Ig="app-check-internal";H(new b("app-check",(t=>function(t,e){return new yg(t,e)}(t.getProvider("app").getImmediate(),t.getProvider("platform-logger"))),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((t,e,n)=>{t.getProvider(Ig).initialize()}))),H(new b(Ig,(t=>{return e=t.getProvider("app-check").getImmediate(),{getToken:t=>ug(e,t),addTokenListener:t=>dg(e,"INTERNAL",t),removeTokenListener:t=>fg(e.app,t)};var e}),"PUBLIC").setInstantiationMode("EXPLICIT")),G("@firebase/app-check","0.5.2");const Tg=function(t,e={}){"object"!=typeof e&&(e={name:e});const n=Object.assign({name:"[DEFAULT]",automaticDataCollectionEnabled:!1},e),r=n.name;if("string"!=typeof r||!r)throw $.create("bad-app-name",{appName:String(r)});const i=V.get(r);if(i){if(p(t,i.options)&&p(n,i.config))return i;throw $.create("duplicate-app",{appName:r})}const s=new k(r);for(const t of B.values())s.addComponent(t);const o=new z(t,n,s);return V.set(r,o),o}({apiKey:"AIzaSyCLtTnAVBuPzBL_dFK-ClbCHP2Dqp3gW4g",authDomain:"stem-day-project-43876.firebaseapp.com",projectId:"stem-day-project-43876",storageBucket:"stem-day-project-43876.appspot.com",messagingSenderId:"366923636539",appId:"1:366923636539:web:f85b89b2ddc315e67ee11e"});!function(t=W(),e){const n=q(t=T(t),"app-check");if(qp().initialized||lg(),ag()&&cg().then((t=>console.log(`App Check debug token: ${t}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`))),n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(i.isTokenAutoRefreshEnabled===e.isTokenAutoRefreshEnabled&&i.provider.isEqual(e.provider))return r;throw Kp.create("already-initialized",{appName:t.name})}const r=n.initialize({options:e});(function(t,e,n){const r=jp(t),i=Object.assign(Object.assign({},r),{activated:!0});i.provider=e,i.cachedTokenPromise=async function(t){if(c()){let e;try{e=await function(t){return rg(ig(t))}(t)}catch(t){sg.warn(`Failed to read token from IndexedDB. Error: ${t}`)}return e}}(t).then((e=>(e&&mg(e)&&(Hp(t,Object.assign(Object.assign({},jp(t)),{token:e})),gg(t,{token:e.token})),e))),i.isTokenAutoRefreshEnabled=void 0===n?t.automaticDataCollectionEnabled:n,Hp(t,i),i.provider.initialize(t)})(t,e.provider,e.isTokenAutoRefreshEnabled),jp(t).isTokenAutoRefreshEnabled&&dg(r,"INTERNAL",(()=>{}))}(Tg,{provider:new Eg("6Le-IW4dAAAAALzT3aSMhpPh8VAL0tiguitwEedm")}),function(t=W()){q(t=T(t),"performance").getImmediate()}(Tg),function(t=W()){const e=q(t=T(t),up);e.isInitialized()?e.getImmediate():function(t,e={}){const n=q(t,up);if(n.isInitialized()){const t=n.getImmediate();if(p(e,n.getOptions()))return t;throw gp.create("already-initialized")}n.initialize({options:e})}(t)}(Tg);const bg=document.getElementById("info"),_g=document.getElementById("login"),Sg=document.getElementById("login-github"),kg=document.getElementById("twitter"),Ag=document.getElementById("logout"),Rg=(document.getElementById("deleteAccount"),new pe),Cg=new ge,Ng=new me,Og=function(t=W()){const e=q(t,"auth");return e.isInitialized()?e.getImmediate():function(t,e){const n=q(t,"auth");if(n.isInitialized()){const t=n.getImmediate();if(p(n.getOptions(),null!=e?e:{}))return t;ot(t,"already-initialized")}return n.initialize({options:e})}(t,{popupRedirectResolver:In,persistence:[je,_e,ke]})}(),Dg=function(t=W()){return q(t,"firestore").getImmediate()}();_g.addEventListener("click",(()=>{Ye(Og,Rg).then((()=>{console.log("Yay! Signed in")})).catch((t=>{console.error(t)}))})),Sg.addEventListener("click",(()=>{Ye(Og,Cg).then((()=>{console.log("Signed in with GitHub")})).catch((t=>{console.error(t)}))})),Ag.addEventListener("click",(()=>{(function(t){return T(t).signOut()})(Og).then((()=>{console.log("Sucessfully signed out")})).catch((t=>{console.error(t)}))})),kg.addEventListener("click",(()=>{Ye(Og,Ng).then((()=>{console.log("Signed in with Twitter")})).catch((t=>{console.error(t)}))})),function(t,e,n,r){T(t).onAuthStateChanged((t=>{t?(_g.style.display="none",Sg.style.display="none",kg.style.display="none",Ag.style.display="block",bg.innerHTML=`Greetings ${t.displayName}`):(_g.style.display="block",Sg.style.display="block",kg.style.display="block",Ag.style.display="none",bg.innerHTML="")}),void 0,void 0)}(Og);const Lg=function(t,...e){for(const n of e)t=n._apply(t);return t}(function(t,e,...n){if(t=T(t),function(t,e,n){if(!n)throw new na(ea.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}("collection","path",e),t instanceof Qu){const r=Ea.fromString(e,...n);return Ju(r),new ed(t,null,r)}{if(!(t instanceof Zu||t instanceof ed))throw new na(ea.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ea.fromString(e,...n));return Ju(r),new ed(t.firestore,null,r)}}(Dg,"movies"));!function(t,...e){var n,r,i;t=T(t);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||rd(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(rd(e[o])){const t=e[o];e[o]=null===(n=t.next)||void 0===n?void 0:n.bind(t),e[o+1]=null===(r=t.error)||void 0===r?void 0:r.bind(t),e[o+2]=null===(i=t.complete)||void 0===i?void 0:i.bind(t)}let c,l,h;if(t instanceof Zu)l=Xu(t.firestore,id),h=mc(t._key.path),c={next:n=>{e[o]&&e[o](function(t,e,n){const r=n.docs.get(e._key),i=new wd(t);return new gd(t,i,e._key,r,new pd(n.hasPendingWrites,n.fromCache),e.converter)}(l,t,n))},error:e[o+1],complete:e[o+2]};else{const n=Xu(t,td);l=Xu(n.firestore,id),h=n._query;const r=new wd(l);c={next:t=>{e[o]&&e[o](new yd(l,r,n,t))},error:e[o+1],complete:e[o+2]},function(t){if(vc(t)&&0===t.explicitOrderBy.length)throw new na(ea.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query)}!function(t,e,n,r){const i=new Hu(r),s=new Eu(e,i,n);t.asyncQueue.enqueueAndForget((async()=>async function(t,e){const n=ta(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new gu),i)try{s.so=await n.onListen(r)}catch(t){const n=uu(t,`Initialization of query '${bc(e.query)}' failed`);return void e.onError(n)}n.queries.set(r,s),s.listeners.push(e),e.ro(n.onlineState),s.so&&e.oo(s.so)&&wu(n)}(await zu(t),s)))}(function(t){return t._firestoreClient||sd(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}(l),h,a,c)}(Lg,(t=>{t.forEach((t=>{console.log(t.data())}))}))})()})();